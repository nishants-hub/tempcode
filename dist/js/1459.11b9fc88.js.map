{"version":3,"file":"js/1459.11b9fc88.js","mappings":"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","sources":["webpack://construction-commercial-search-frontend/./src/components/Utility/CustomDropdowns/UserSearch.vue","webpack://construction-commercial-search-frontend/src/components/Utility/CustomDropdowns/UserSearch.vue","webpack://construction-commercial-search-frontend/./src/components/Utility/CustomDropdowns/UserSearch.vue?cc75","webpack://construction-commercial-search-frontend/./src/components/Utility/CustomDropdowns/UserSearch.vue?d594"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isMultiSelect && _vm.group?.length > 0)?_c('div',{staticClass:\"mb-spacing-250 flex w-full flex-wrap gap-spacing-150\"},_vm._l((_vm.group),function(user){return _c('GeneralRemovableItem',{key:user?._id,attrs:{\"item-name\":user?.display_name},on:{\"on-item-removed\":function($event){return _vm.removeUserFromGroup(user)}}})}),1):_vm._e(),_c('FormInput',{attrs:{\"label\":_vm.dropdownLabel,\"input-type\":'searchable-input',\"inputId\":_vm.dropdownId,\"prevent-v-model\":true,\"clear-button\":_vm.user ? true : false,\"suggestions\":_vm.getFilteredUserSuggestions,\"is-suggestions-fetching\":_vm.isUserSuggestionsFetching},on:{\"set-suggestion\":_vm.handleSelect,\"reset-suggestions\":_vm.handleReset,\"fetch-suggestions\":_vm.fetchDebouncedUserSuggestions,\"enter-pressed\":function($event){return _vm.$emit('enter-pressed')}},model:{value:(_vm.user),callback:function ($$v) {_vm.user=$$v},expression:\"user\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- Display selected users in multi-select mode -->\r\n    <div\r\n      v-if=\"isMultiSelect && group?.length > 0\"\r\n      class=\"mb-spacing-250 flex w-full flex-wrap gap-spacing-150\"\r\n    >\r\n      <GeneralRemovableItem\r\n        v-for=\"user in group\"\r\n        :key=\"user?._id\"\r\n        :item-name=\"user?.display_name\"\r\n        @on-item-removed=\"removeUserFromGroup(user)\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Form input for searching and selecting users -->\r\n    <FormInput\r\n      v-model=\"user\"\r\n      :label=\"dropdownLabel\"\r\n      :input-type=\"'searchable-input'\"\r\n      :inputId=\"dropdownId\"\r\n      :prevent-v-model=\"true\"\r\n      :clear-button=\"user ? true : false\"\r\n      :suggestions=\"getFilteredUserSuggestions\"\r\n      :is-suggestions-fetching=\"isUserSuggestionsFetching\"\r\n      @set-suggestion=\"handleSelect\"\r\n      @reset-suggestions=\"handleReset\"\r\n      @fetch-suggestions=\"fetchDebouncedUserSuggestions\"\r\n      @enter-pressed=\"$emit('enter-pressed')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { debounce } from \"lodash\";\r\nimport { mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    GeneralRemovableItem: () =>\r\n      import(\"@/components/General/RemovableItem.vue\"),\r\n    FormInput: () => import(\"@/components/General/FormInput.vue\"),\r\n  },\r\n  props: {\r\n    group: {\r\n      type: Array,\r\n      required: false,\r\n      default: () => [],\r\n    },\r\n    selectedUser: {\r\n      type: Object,\r\n      required: false,\r\n      default: null,\r\n    },\r\n    dropdownLabel: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    dropdownId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    isMultiSelect: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      user: this.selectedUser?.display_name,\r\n      userSuggestions: [],\r\n      isUserSuggestionsFetching: false,\r\n      fetchDebouncedUserSuggestions: debounce(this.fetchUserSuggestions, 300),\r\n    };\r\n  },\r\n  watch: {\r\n    selectedUser() {\r\n      this.user = this.selectedUser?.display_name;\r\n    },\r\n  },\r\n  computed: {\r\n    getFilteredUserSuggestions() {\r\n      let output;\r\n      if (this.isMultiSelect) {\r\n        // Filter out users already in the group\r\n        output = this.userSuggestions?.filter(\r\n          (suggestion) =>\r\n            !this.group?.some((user) => user?._id === suggestion?._id),\r\n        );\r\n      } else {\r\n        // Filter out the selected user if single select\r\n        output = this.userSuggestions?.filter(\r\n          (suggestion) => this.selectedUser?._id !== suggestion?._id,\r\n        );\r\n      }\r\n      return output;\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      getUserSuggestions: \"auth/getUserSuggestions\",\r\n    }),\r\n    async fetchUserSuggestions(query) {\r\n      if (query === \"\") return (this.userSuggestions = []);\r\n      this.isUserSuggestionsFetching = true;\r\n      const responseData = await this.getUserSuggestions({\r\n        params: { name: query },\r\n      });\r\n      this.userSuggestions = responseData?.users?.map((user) => {\r\n        return {\r\n          display_name: user?.name,\r\n          _id: user?._id,\r\n        };\r\n      });\r\n      this.isUserSuggestionsFetching = false;\r\n    },\r\n    handleReset(forceReset) {\r\n      if (!this.isMultiSelect || forceReset) {\r\n        this.userSuggestions = [];\r\n      }\r\n    },\r\n    handleSelect(user) {\r\n      if (this.isMultiSelect) {\r\n        this.addUserToGroup(user);\r\n      } else {\r\n        this.selectUser(user);\r\n      }\r\n    },\r\n    selectUser(user) {\r\n      this.user = user?.display_name;\r\n      this.$emit(\"on-user-update\", user);\r\n    },\r\n    addUserToGroup(user) {\r\n      let output = [...this.group, user];\r\n      this.$emit(\"on-group-update\", output);\r\n    },\r\n    removeUserFromGroup(user) {\r\n      let output = this.group.filter((item) => item?._id !== user?._id);\r\n      this.$emit(\"on-group-update\", output);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserSearch.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserSearch.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserSearch.vue?vue&type=template&id=64160ffa\"\nimport script from \"./UserSearch.vue?vue&type=script&lang=js\"\nexport * from \"./UserSearch.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","isMultiSelect","group","length","staticClass","_l","user","key","_id","attrs","display_name","on","$event","removeUserFromGroup","_e","dropdownLabel","dropdownId","getFilteredUserSuggestions","isUserSuggestionsFetching","handleSelect","handleReset","fetchDebouncedUserSuggestions","$emit","model","value","callback","$$v","expression","staticRenderFns","components","GeneralRemovableItem","FormInput","props","type","Array","required","default","selectedUser","Object","String","Boolean","data","userSuggestions","debounce","fetchUserSuggestions","watch","computed","output","filter","suggestion","some","methods","mapActions","getUserSuggestions","query","responseData","params","name","users","map","forceReset","addUserToGroup","selectUser","item","component"],"sourceRoot":""}