"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[1459],{91459:function(e,s,t){t.r(s),t.d(s,{default:function(){return l}});var i=t(78626),r=t(93518),n={components:{GeneralRemovableItem:()=>t.e(7349).then(t.bind(t,57349)),FormInput:()=>t.e(6342).then(t.bind(t,96342))},props:{group:{type:Array,required:!1,default:()=>[]},selectedUser:{type:Object,required:!1,default:null},dropdownLabel:{type:String,required:!0},dropdownId:{type:String,required:!0},isMultiSelect:{type:Boolean,required:!1,default:!1}},data(){return{user:this.selectedUser?.display_name,userSuggestions:[],isUserSuggestionsFetching:!1,fetchDebouncedUserSuggestions:(0,i.debounce)(this.fetchUserSuggestions,300)}},watch:{selectedUser(){this.user=this.selectedUser?.display_name}},computed:{getFilteredUserSuggestions(){let e;return e=this.isMultiSelect?this.userSuggestions?.filter((e=>!this.group?.some((s=>s?._id===e?._id)))):this.userSuggestions?.filter((e=>this.selectedUser?._id!==e?._id)),e}},methods:{...(0,r.i0)({getUserSuggestions:"auth/getUserSuggestions"}),async fetchUserSuggestions(e){if(""===e)return this.userSuggestions=[];this.isUserSuggestionsFetching=!0;const s=await this.getUserSuggestions({params:{name:e}});this.userSuggestions=s?.users?.map((e=>({display_name:e?.name,_id:e?._id}))),this.isUserSuggestionsFetching=!1},handleReset(e){this.isMultiSelect&&!e||(this.userSuggestions=[])},handleSelect(e){this.isMultiSelect?this.addUserToGroup(e):this.selectUser(e)},selectUser(e){this.user=e?.display_name,this.$emit("on-user-update",e)},addUserToGroup(e){let s=[...this.group,e];this.$emit("on-group-update",s)},removeUserFromGroup(e){let s=this.group.filter((s=>s?._id!==e?._id));this.$emit("on-group-update",s)}}},u=n,o=(0,t(81656).A)(u,(function(){var e=this,s=e._self._c;return s("div",[e.isMultiSelect&&e.group?.length>0?s("div",{staticClass:"mb-spacing-250 flex w-full flex-wrap gap-spacing-150"},e._l(e.group,(function(t){return s("GeneralRemovableItem",{key:t?._id,attrs:{"item-name":t?.display_name},on:{"on-item-removed":function(s){return e.removeUserFromGroup(t)}}})})),1):e._e(),s("FormInput",{attrs:{label:e.dropdownLabel,"input-type":"searchable-input",inputId:e.dropdownId,"prevent-v-model":!0,"clear-button":!!e.user,suggestions:e.getFilteredUserSuggestions,"is-suggestions-fetching":e.isUserSuggestionsFetching},on:{"set-suggestion":e.handleSelect,"reset-suggestions":e.handleReset,"fetch-suggestions":e.fetchDebouncedUserSuggestions,"enter-pressed":function(s){return e.$emit("enter-pressed")}},model:{value:e.user,callback:function(s){e.user=s},expression:"user"}})],1)}),[],!1,null,null,null),l=o.exports}}]);