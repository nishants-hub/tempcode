{"version":3,"file":"js/4077.6474b41c.js","mappings":"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","sources":["webpack://construction-commercial-search-frontend/./src/components/MarketResearch/ResearchStatusForm.vue","webpack://construction-commercial-search-frontend/src/components/MarketResearch/ResearchStatusForm.vue","webpack://construction-commercial-search-frontend/./src/components/MarketResearch/ResearchStatusForm.vue?64f4","webpack://construction-commercial-search-frontend/./src/components/MarketResearch/ResearchStatusForm.vue?e3b7"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"h-full w-full\"},[_c('GeneralForm',{attrs:{\"heading\":'STATUS UPDATE',\"sub-heading\":_vm.companyData?.companyName || 'Unknown Company',\"showCloseButton\":true,\"submit-button-label\":'Confirm',\"is-form-submitting\":_vm.isFormSubmitting},on:{\"close-pressed\":_vm.handleClose,\"form-submitted\":_vm.handleSubmit},scopedSlots:_vm._u([{key:\"form-body\",fn:function(){return [_c('div',{staticClass:\"flex flex-col gap-spacing-200\"},[(_vm.nextFollowUpDate?.shifted)?_c('div',{staticClass:\"mb-spacing-100 flex items-center gap-spacing-100 rounded-08 border border-stroke-info bg-bg-status-info px-spacing-200 py-spacing-100\"},[_c('IconInfo',{staticClass:\"h-spacing-200 w-spacing-200 text-content-on-status-on-info\"}),_c('p',{staticClass:\"text-body/m/relaxed/400 text-content-on-status-on-info\"},[_vm._v(\" The follow-up date has been shifted by \"+_vm._s(_vm.nextFollowUpDate?.shifted === 1 ? \"one\" : \"two\")+\" \"+_vm._s(_vm.nextFollowUpDate?.shifted === 1 ? \"day\" : \"days\")+\". \")])],1):_vm._e(),_c('div',{staticClass:\"flex flex-col gap-spacing-200 ipadPro:flex-row\"},[_c('div',{staticClass:\"flex w-full flex-col gap-spacing-100 py-spacing-50 ipadPro:sticky ipadPro:top-spacing-0 ipadPro:w-1/3 ipadPro:self-start\"},[_c('StatusSearchDropdown',{ref:\"status\",staticClass:\"my-spacing-100\",attrs:{\"dropdown-label\":'Status',\"dropdown-id\":'status',\"selectedStatus\":{ display_name: _vm.formData?.status },\"is-multi-select\":false,\"field-validations\":_vm.fieldValidations?.status,\"order\":1,\"status-options\":_vm.statusOptions},on:{\"on-status-update\":_vm.updateStatus}}),_c('FormInput',{ref:\"updateDate\",attrs:{\"label\":\"Update Date\",\"input-id\":\"updateDate\",\"input-type\":\"date\",\"field-validations\":_vm.fieldValidations?.updateDate,\"order\":2},on:{\"enter-pressed\":function($event){return _vm.$focusNextElement('updateNotes')}},model:{value:(_vm.formData.date),callback:function ($$v) {_vm.$set(_vm.formData, \"date\", $$v)},expression:\"formData.date\"}}),_c('FormInput',{ref:\"note\",attrs:{\"label\":\"Update/Notes\",\"input-id\":\"updateNotes\",\"placeholder\":\"Type your notes...\",\"multiline\":true,\"field-validations\":_vm.fieldValidations?.note,\"order\":3},model:{value:(_vm.formData.note),callback:function ($$v) {_vm.$set(_vm.formData, \"note\", $$v)},expression:\"formData.note\"}}),_c('FormInput',{ref:\"followUpDate\",attrs:{\"label\":\"Follow-up Date\",\"input-id\":\"followUpDate\",\"input-type\":\"date\",\"field-validations\":_vm.fieldValidations?.followUpDate,\"order\":4},on:{\"enter-pressed\":function($event){return _vm.$focusNextElement('price-0')}},model:{value:(_vm.formData.followUpDate),callback:function ($$v) {_vm.$set(_vm.formData, \"followUpDate\", $$v)},expression:\"formData.followUpDate\"}})],1),_c('div',{staticClass:\"border-r border-t border-stroke-bold\"}),_c('div',{staticClass:\"flex w-full flex-col gap-spacing-100 ipadPro:w-2/3\"},[_c('p',{staticClass:\"mb-spacing-100 border-b border-stroke-bold pb-spacing-100 text-center text-overline/m/relaxed/500 text-content-on-neutral-secondary\"},[_vm._v(\" ADD PRICES \")]),_vm._l((_vm.productPrices),function(product,index){return _c('div',{key:index},[_c('div',{staticClass:\"flex flex-col gap-spacing-100\"},[_c('div',{staticClass:\"flex items-center gap-spacing-100 text-body/m/relaxed/400 text-content-on-neutral-secondary\"},[_c('span',[_vm._v(_vm._s(product?.title)+\" - \"+_vm._s(product?.variableName))]),(\n                      !product?.variableId &&\n                      _vm.productVariableOptions?.[product?.productId]?.length > 1\n                    )?_c('div',{staticClass:\"flex h-spacing-250 w-spacing-250 cursor-pointer items-center justify-center rounded-full bg-constant-brand-primary hover:bg-hover-constant-brand-primary\",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.addNewVariablePrice(product, index + 1)}}},[_c('IconPlus',{staticClass:\"h-spacing-200 w-spacing-200 text-content-on-neutral-primary\"})],1):_vm._e()]),_c('div',{staticClass:\"grid grid-cols-1 gap-x-spacing-100 gap-y-spacing-100 ipadPro:grid-cols-2\"},[_c('FormInput',{attrs:{\"label\":\"Price\",\"input-id\":`price-${index}`,\"input-type\":\"number\"},model:{value:(product.price),callback:function ($$v) {_vm.$set(product, \"price\", $$v)},expression:\"product.price\"}}),_c('div',{staticClass:\"flex items-center gap-spacing-100\"},[_c('FormInput',{attrs:{\"label\":\"Date\",\"input-id\":`date-${index}`,\"input-type\":\"date\"},model:{value:(product.dateAdded),callback:function ($$v) {_vm.$set(product, \"dateAdded\", $$v)},expression:\"product.dateAdded\"}}),_c('div',{staticClass:\"mb-spacing-300 ml-spacing-100 cursor-pointer\",on:{\"click\":function($event){return _vm.removeVariablePrice(product, index)}}},[_c('IconTrash2',{staticClass:\"h-spacing-200 w-spacing-200 text-content-on-neutral-secondary hover:text-constant-status-error\"})],1)],1)],1)])])}),_c('div',{staticClass:\"mb-spacing-200 flex\"},[_c('div',{on:{\"click\":_vm.openProductQuotationSelectModal}},[_c('GeneralButton',{attrs:{\"button-type\":'button',\"type\":'brand',\"size\":'small',\"emphasis\":'secondary',\"icon-position\":'none',\"label\":_vm.quotationFileData?.length > 0\n                      ? 'Manage Uploaded Quotations'\n                      : 'Upload Quotation'}})],1)]),(_vm.quotationFileData?.length > 0)?_c('p',{staticClass:\"border-b border-stroke-medium py-spacing-100 text-body/l/relaxed/400 text-content-on-neutral-primary\"},[_vm._v(\" Attached Quotation Files: \")]):_vm._e(),(_vm.quotationFileData?.length > 0)?_c('ClassicTable',{staticClass:\"mt-spacing-200\",attrs:{\"headers\":_vm.quotationHeaders,\"horizontal-padding\":'px-spacing-0',\"bgClass\":'bg-transparent'},scopedSlots:_vm._u([{key:\"table-body\",fn:function(){return _vm._l((_vm.quotationFileData),function(quotation,index){return _c('tr',{key:index,staticClass:\"border-b border-stroke-medium text-left text-body/m/relaxed/400 text-content-on-neutral-primary\"},[_c('td',{staticClass:\"max-w-[200px] py-spacing-100 pr-spacing-100\",class:quotation?.file?.isLink\n                        ? 'text-content-on-neutral-tertiary'\n                        : 'text-content-on-neutral-primary'},[_c('p',[_vm._v(\" \"+_vm._s(quotation?.file?.name)+\" \"),(!quotation?.file?.isLink)?_c('span',{staticClass:\"ml-spacing-50 rounded-04 bg-bg-status-success px-spacing-50 py-spacing-0 text-overline/s/relaxed/500 text-content-on-status-on-success\"},[_vm._v(\" NEW \")]):_vm._e()])]),_c('td',{staticClass:\"py-spacing-100 pr-spacing-100\"},[_c('div',{staticClass:\"flex flex-wrap items-center gap-spacing-50\"},_vm._l((quotation?.products),function(prod){return _c('div',{key:prod?._id,staticClass:\"text-content-on-neutral-primary\"},[_c('GeneralRemovableItem',{attrs:{\"item-name\":`${prod?.title}${\n                            prod?.variableName ? ' - ' : ' - '\n                          }${prod?.variableName || 'default[1]'}`,\"is-disabled\":quotation?.file?.isLink},on:{\"on-item-removed\":function($event){return _vm.removeProductQuotation(prod)}}})],1)}),0)]),_c('td',{staticClass:\"py-spacing-100 pr-spacing-100\"},[_c('FileActions',{attrs:{\"file\":quotation?.file},on:{\"remove\":function($event){return _vm.removeQuotation(index)}}})],1)])})},proxy:true}],null,false,3324267438)}):_vm._e()],2)])])]},proxy:true}])}),_c('ProductQuotationSelectModal'),_c('SelectProductVariableModal')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"h-full w-full\">\r\n    <GeneralForm\r\n      :heading=\"'STATUS UPDATE'\"\r\n      :sub-heading=\"companyData?.companyName || 'Unknown Company'\"\r\n      :showCloseButton=\"true\"\r\n      :submit-button-label=\"'Confirm'\"\r\n      @close-pressed=\"handleClose\"\r\n      @form-submitted=\"handleSubmit\"\r\n      :is-form-submitting=\"isFormSubmitting\"\r\n    >\r\n      <template #form-body>\r\n        <div class=\"flex flex-col gap-spacing-200\">\r\n          <div\r\n            v-if=\"nextFollowUpDate?.shifted\"\r\n            class=\"mb-spacing-100 flex items-center gap-spacing-100 rounded-08 border border-stroke-info bg-bg-status-info px-spacing-200 py-spacing-100\"\r\n          >\r\n            <IconInfo\r\n              class=\"h-spacing-200 w-spacing-200 text-content-on-status-on-info\"\r\n            />\r\n            <p class=\"text-body/m/relaxed/400 text-content-on-status-on-info\">\r\n              The follow-up date has been shifted by\r\n              {{ nextFollowUpDate?.shifted === 1 ? \"one\" : \"two\" }}\r\n              {{ nextFollowUpDate?.shifted === 1 ? \"day\" : \"days\" }}.\r\n            </p>\r\n          </div>\r\n          <div class=\"flex flex-col gap-spacing-200 ipadPro:flex-row\">\r\n            <!-- Left Form Section -->\r\n\r\n            <div\r\n              class=\"flex w-full flex-col gap-spacing-100 py-spacing-50 ipadPro:sticky ipadPro:top-spacing-0 ipadPro:w-1/3 ipadPro:self-start\"\r\n            >\r\n              <StatusSearchDropdown\r\n                ref=\"status\"\r\n                :dropdown-label=\"'Status'\"\r\n                :dropdown-id=\"'status'\"\r\n                :selectedStatus=\"{ display_name: formData?.status }\"\r\n                :is-multi-select=\"false\"\r\n                class=\"my-spacing-100\"\r\n                @on-status-update=\"updateStatus\"\r\n                :field-validations=\"fieldValidations?.status\"\r\n                :order=\"1\"\r\n                :status-options=\"statusOptions\"\r\n              />\r\n\r\n              <FormInput\r\n                ref=\"updateDate\"\r\n                label=\"Update Date\"\r\n                v-model=\"formData.date\"\r\n                input-id=\"updateDate\"\r\n                input-type=\"date\"\r\n                :field-validations=\"fieldValidations?.updateDate\"\r\n                @enter-pressed=\"$focusNextElement('updateNotes')\"\r\n                :order=\"2\"\r\n              />\r\n\r\n              <FormInput\r\n                ref=\"note\"\r\n                label=\"Update/Notes\"\r\n                v-model=\"formData.note\"\r\n                input-id=\"updateNotes\"\r\n                placeholder=\"Type your notes...\"\r\n                :multiline=\"true\"\r\n                :field-validations=\"fieldValidations?.note\"\r\n                :order=\"3\"\r\n              />\r\n\r\n              <FormInput\r\n                ref=\"followUpDate\"\r\n                label=\"Follow-up Date\"\r\n                v-model=\"formData.followUpDate\"\r\n                input-id=\"followUpDate\"\r\n                input-type=\"date\"\r\n                @enter-pressed=\"$focusNextElement('price-0')\"\r\n                :field-validations=\"fieldValidations?.followUpDate\"\r\n                :order=\"4\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Divider -->\r\n            <div class=\"border-r border-t border-stroke-bold\" />\r\n\r\n            <!-- Right Form Section -->\r\n            <div class=\"flex w-full flex-col gap-spacing-100 ipadPro:w-2/3\">\r\n              <p\r\n                class=\"mb-spacing-100 border-b border-stroke-bold pb-spacing-100 text-center text-overline/m/relaxed/500 text-content-on-neutral-secondary\"\r\n              >\r\n                ADD PRICES\r\n              </p>\r\n              <div v-for=\"(product, index) in productPrices\" :key=\"index\">\r\n                <div class=\"flex flex-col gap-spacing-100\">\r\n                  <div\r\n                    class=\"flex items-center gap-spacing-100 text-body/m/relaxed/400 text-content-on-neutral-secondary\"\r\n                  >\r\n                    <span\r\n                      >{{ product?.title }} - {{ product?.variableName }}</span\r\n                    >\r\n\r\n                    <div\r\n                      v-if=\"\r\n                        !product?.variableId &&\r\n                        productVariableOptions?.[product?.productId]?.length > 1\r\n                      \"\r\n                      class=\"flex h-spacing-250 w-spacing-250 cursor-pointer items-center justify-center rounded-full bg-constant-brand-primary hover:bg-hover-constant-brand-primary\"\r\n                      @click=\"addNewVariablePrice(product, index + 1)\"\r\n                      tabindex=\"0\"\r\n                    >\r\n                      <IconPlus\r\n                        class=\"h-spacing-200 w-spacing-200 text-content-on-neutral-primary\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div\r\n                    class=\"grid grid-cols-1 gap-x-spacing-100 gap-y-spacing-100 ipadPro:grid-cols-2\"\r\n                  >\r\n                    <FormInput\r\n                      label=\"Price\"\r\n                      v-model=\"product.price\"\r\n                      :input-id=\"`price-${index}`\"\r\n                      input-type=\"number\"\r\n                    />\r\n                    <div class=\"flex items-center gap-spacing-100\">\r\n                      <FormInput\r\n                        label=\"Date\"\r\n                        v-model=\"product.dateAdded\"\r\n                        :input-id=\"`date-${index}`\"\r\n                        input-type=\"date\"\r\n                      />\r\n                      <div\r\n                        @click=\"removeVariablePrice(product, index)\"\r\n                        class=\"mb-spacing-300 ml-spacing-100 cursor-pointer\"\r\n                      >\r\n                        <IconTrash2\r\n                          class=\"h-spacing-200 w-spacing-200 text-content-on-neutral-secondary hover:text-constant-status-error\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-spacing-200 flex\">\r\n                <div @click=\"openProductQuotationSelectModal\">\r\n                  <GeneralButton\r\n                    :button-type=\"'button'\"\r\n                    :type=\"'brand'\"\r\n                    :size=\"'small'\"\r\n                    :emphasis=\"'secondary'\"\r\n                    :icon-position=\"'none'\"\r\n                    :label=\"\r\n                      quotationFileData?.length > 0\r\n                        ? 'Manage Uploaded Quotations'\r\n                        : 'Upload Quotation'\r\n                    \"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <p\r\n                v-if=\"quotationFileData?.length > 0\"\r\n                class=\"border-b border-stroke-medium py-spacing-100 text-body/l/relaxed/400 text-content-on-neutral-primary\"\r\n              >\r\n                Attached Quotation Files:\r\n              </p>\r\n              <ClassicTable\r\n                :headers=\"quotationHeaders\"\r\n                v-if=\"quotationFileData?.length > 0\"\r\n                class=\"mt-spacing-200\"\r\n                :horizontal-padding=\"'px-spacing-0'\"\r\n                :bgClass=\"'bg-transparent'\"\r\n              >\r\n                <template #table-body>\r\n                  <tr\r\n                    v-for=\"(quotation, index) in quotationFileData\"\r\n                    :key=\"index\"\r\n                    class=\"border-b border-stroke-medium text-left text-body/m/relaxed/400 text-content-on-neutral-primary\"\r\n                  >\r\n                    <td\r\n                      class=\"max-w-[200px] py-spacing-100 pr-spacing-100\"\r\n                      :class=\"\r\n                        quotation?.file?.isLink\r\n                          ? 'text-content-on-neutral-tertiary'\r\n                          : 'text-content-on-neutral-primary'\r\n                      \"\r\n                    >\r\n                      <p>\r\n                        {{ quotation?.file?.name }}\r\n                        <span\r\n                          v-if=\"!quotation?.file?.isLink\"\r\n                          class=\"ml-spacing-50 rounded-04 bg-bg-status-success px-spacing-50 py-spacing-0 text-overline/s/relaxed/500 text-content-on-status-on-success\"\r\n                        >\r\n                          NEW\r\n                        </span>\r\n                      </p>\r\n                    </td>\r\n\r\n                    <!-- Associated Products -->\r\n                    <td class=\"py-spacing-100 pr-spacing-100\">\r\n                      <div class=\"flex flex-wrap items-center gap-spacing-50\">\r\n                        <div\r\n                          v-for=\"prod in quotation?.products\"\r\n                          :key=\"prod?._id\"\r\n                          class=\"text-content-on-neutral-primary\"\r\n                        >\r\n                          <GeneralRemovableItem\r\n                            :item-name=\"`${prod?.title}${\r\n                              prod?.variableName ? ' - ' : ' - '\r\n                            }${prod?.variableName || 'default[1]'}`\"\r\n                            @on-item-removed=\"removeProductQuotation(prod)\"\r\n                            :is-disabled=\"quotation?.file?.isLink\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <!-- Remove Button -->\r\n                    <td class=\"py-spacing-100 pr-spacing-100\">\r\n                      <FileActions\r\n                        :file=\"quotation?.file\"\r\n                        @remove=\"removeQuotation(index)\"\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                </template>\r\n              </ClassicTable>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </GeneralForm>\r\n    <ProductQuotationSelectModal />\r\n    <SelectProductVariableModal />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { FormValidationRule } from \"@/utilities/helpers/formValidations\";\r\nimport { getDateFromToday, getNextDate } from \"@/utilities/helpers/utils\";\r\nimport { mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  props: {\r\n    companyData: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    marketResearchId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    marketResearchSettings: {\r\n      type: Object,\r\n      required: false,\r\n    },\r\n    // for only one price\r\n    productId: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    statusOptions: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  components: {\r\n    FormInput: () => import(\"@/components/General/FormInput.vue\"),\r\n    GeneralForm: () => import(\"@/components/General/Form.vue\"),\r\n    GeneralButton: () => import(\"@/components/General/CustomButton.vue\"),\r\n    ProductQuotationSelectModal: () =>\r\n      import(\"@/components/Modals/ProductQuotationSelect.vue\"),\r\n    ClassicTable: () => import(\"@/components/General/Table/ClassicTable.vue\"),\r\n    IconPlus: () => import(\"@/components/svgIcons/plus.vue\"),\r\n    IconInfo: () => import(\"@/components/svgIcons/info.vue\"),\r\n    IconTrash2: () => import(\"@/components/svgIcons/trash-2.vue\"),\r\n    GeneralRemovableItem: () =>\r\n      import(\"@/components/General/RemovableItem.vue\"),\r\n    FileActions: () =>\r\n      import(\"@/components/Utility/FileViewer/FileActions.vue\"),\r\n    StatusSearchDropdown: () =>\r\n      import(\"@/components/Utility/CustomDropdowns/StatusSearch.vue\"),\r\n    SelectProductVariableModal: () =>\r\n      import(\"@/components/Modals/SelectProductVariableModal.vue\"),\r\n  },\r\n  data() {\r\n    return {\r\n      isFormSubmitting: false,\r\n      formData: {\r\n        status: \"\",\r\n        date: getDateFromToday(0), // Default to today's date\r\n        note: \"\",\r\n        followUpDate: \"\",\r\n      },\r\n      quotationFileData: [],\r\n      productPrices: [],\r\n      quotationHeaders: [\r\n        { key: \"file\", value: \"File\", sortable: false },\r\n        { key: \"products\", value: \"Products\", sortable: false },\r\n        { key: \"action\", value: \"\", sortable: false },\r\n      ],\r\n      productVariables: {},\r\n      fieldValidations: {\r\n        status: new FormValidationRule({\r\n          minLength: 2,\r\n          maxLength: 50,\r\n          required: true,\r\n        }),\r\n        updateDate: new FormValidationRule({\r\n          required: true,\r\n          type: \"DATE\",\r\n          minDate: getDateFromToday(0),\r\n          maxDate: getDateFromToday(0),\r\n        }),\r\n        note: new FormValidationRule({\r\n          minLength: 5,\r\n          required: false,\r\n          maxLength: 200,\r\n        }),\r\n        followUpDate: new FormValidationRule({\r\n          required: true,\r\n          type: \"DATE\",\r\n          minDate: getDateFromToday(0),\r\n          maxDate: getDateFromToday(60),\r\n        }),\r\n      },\r\n      deletionList: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$bus.$on(\"attach-quotations-to-status-form\", (data) => {\r\n      if (data) this.quotationFileData = data;\r\n    });\r\n    this.$bus.$on(\"product-variable-selected-new-price\", (data) => {\r\n      if (data?.index && data?.variable && data?.product)\r\n        this.productPrices.splice(data?.index, 0, {\r\n          title: data?.product?.title,\r\n          price: data?.price || \"\",\r\n          dateAdded:\r\n            data?.dateAdded || new Date().toISOString().substring(0, 10),\r\n          productId: data?.product?.productId,\r\n          variableId: data?.variable?.id,\r\n          _id: `${data?.product?.productId}-${data?.variable?.id || \"none\"}`,\r\n          isNew: true,\r\n          variableName: data?.variable?.name,\r\n        });\r\n    });\r\n    this.fetchProductsVariables();\r\n  },\r\n  watch: {\r\n    nextFollowUpDate: {\r\n      immediate: true,\r\n      handler: function () {\r\n        this.formData.followUpDate = this.nextFollowUpDate\r\n          ? this.nextFollowUpDate?.date\r\n          : \"\";\r\n      },\r\n    },\r\n    productsData: {\r\n      immediate: true,\r\n      handler: function () {\r\n        this.fetchProductsVariables();\r\n        this.initializeProductPrices();\r\n        this.setQuotationData();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  computed: {\r\n    nextFollowUpDate() {\r\n      // let output = this.companyData?.followUpHistory?.nextFollowUpDate\r\n      //   ? getNextDate(\r\n      //       this.companyData?.followUpHistory?.nextFollowUpDate,\r\n      //       this.marketResearchSettings?.followUpDateInterval,\r\n      //       this.marketResearchSettings?.weekendsSchedulingAllowed === \"YES\",\r\n      //     )\r\n      //   : getNextDate(\r\n      //       this.marketResearchSettings?.dateStart,\r\n      //       this.marketResearchSettings?.followUpDateInterval,\r\n      //       this.marketResearchSettings?.weekendsSchedulingAllowed === \"YES\",\r\n      //     );\r\n      let output = getNextDate(\r\n        getDateFromToday(0),\r\n        this.marketResearchSettings?.followUpDateInterval,\r\n      );\r\n      return output;\r\n    },\r\n    productsData() {\r\n      let output = [];\r\n      if (this.productId) {\r\n        output = this.companyData?.products?.filter(\r\n          (product) =>\r\n            product?.doesCompanySell && product?.productId === this.productId,\r\n        );\r\n      } else {\r\n        output = this.companyData?.products?.filter(\r\n          (item) => item?.doesCompanySell,\r\n        );\r\n      }\r\n      output =\r\n        output?.map((product) => ({\r\n          _id: product?.productId,\r\n          title: product?.productName,\r\n          quotation: product?.quotation,\r\n        })) || [];\r\n      return output;\r\n    },\r\n    productVariableOptions() {\r\n      if (\r\n        !this.productVariables ||\r\n        !Object.keys(this.productVariables).length\r\n      ) {\r\n        return {};\r\n      }\r\n\r\n      return Object.entries(this.productVariables).reduce(\r\n        (output, [key, items]) => {\r\n          output[key] = [\r\n            ...items\r\n              ?.filter(\r\n                (item) =>\r\n                  !this.productPrices?.some(\r\n                    (price) => price.variableId === item?._id,\r\n                  ),\r\n              )\r\n              ?.map((item) => ({\r\n                key: item?._id,\r\n                value: `${item.name} [${item.coefficient}]`,\r\n              })),\r\n            {\r\n              key: \"\",\r\n              value: \"Select Variable\",\r\n              default: true,\r\n            },\r\n          ];\r\n          return output;\r\n        },\r\n        {},\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      getTrackers: \"auth/getTrackers\",\r\n      getFileBlob: \"utils/getFileBlob\",\r\n      addQuotation: \"marketResearch/addQuotation\",\r\n      getProductVariables: \"category/getProductVariables\",\r\n    }),\r\n\r\n    checkForQuotationAndPrices(productPricesData) {\r\n      const productsInPrices = productPricesData?.map((price) => price?._id);\r\n      const productsInQuotationFiles =\r\n        this.quotationFileData?.flatMap((file) => file?.products || []) || [];\r\n\r\n      productPricesData?.forEach((priceData) => {\r\n        const product = productsInQuotationFiles.find(\r\n          (product) => product?._id === priceData?._id,\r\n        );\r\n        if (!product) {\r\n          throw new Error(\r\n            `Quotation file is required for product: ${priceData?.title}${\r\n              priceData?.variableName ? \"-\" : \"\"\r\n            }${priceData?.variableName || \"\"}.`,\r\n          );\r\n        }\r\n      });\r\n\r\n      productsInQuotationFiles.forEach((product) => {\r\n        if (!productsInPrices.includes(product?._id)) {\r\n          throw new Error(\r\n            `Price is required for product: ${product?.title}${\r\n              product?.variableName ? \"-\" : \"\"\r\n            }${product?.variableName || \"\"}.`,\r\n          );\r\n        }\r\n      });\r\n    },\r\n\r\n    async handleSubmit() {\r\n      const isValid = this.$validateForm();\r\n      if (!isValid) {\r\n        return;\r\n      }\r\n\r\n      const productPricesData = this.productPrices\r\n        ?.filter((item) => item?.price)\r\n        ?.map((item) => ({\r\n          ...item,\r\n          price: Number(item?.price),\r\n        }));\r\n\r\n      try {\r\n        this.checkForQuotationAndPrices(productPricesData);\r\n      } catch (err) {\r\n        return this.$toast.error(err?.message);\r\n      }\r\n\r\n      const formData = new FormData();\r\n\r\n      // Append regular data to formData\r\n      formData.append(\"marketResearchId\", this.marketResearchId);\r\n      formData.append(\"companyId\", this.companyData?.companyId);\r\n      formData.append(\"followUp\", JSON.stringify(this.formData)); // stringify if it's an object\r\n      formData.append(\"prices\", JSON.stringify(productPricesData));\r\n      formData.append(\"deletionList\", JSON.stringify(this.deletionList));\r\n\r\n      this.quotationFileData?.forEach((item, index) => {\r\n        // Add the file\r\n        if (item?.file?.isLink) {\r\n          formData.append(`files[${index}]`, index);\r\n        } else {\r\n          formData.append(`files[${index}]`, item.file);\r\n        }\r\n\r\n        // Add associated products as a JSON string\r\n        formData.append(\r\n          `products[${index}]`,\r\n          JSON.stringify(item.products?.map((p) => p?._id)),\r\n        );\r\n      });\r\n      this.isFormSubmitting = true;\r\n      const res = await this.addQuotation(formData);\r\n      if (res?.success) {\r\n        this.$bus.$emit(\"refetch-market-research-details\");\r\n        this.getTrackers();\r\n        this.handleClose();\r\n      } else {\r\n        this.$toast.error(res?.message);\r\n      }\r\n      this.isFormSubmitting = false;\r\n    },\r\n    initializeProductPrices() {\r\n      this.productPrices = this.productsData?.map((prod) => {\r\n        return {\r\n          title: prod?.title,\r\n          price: !isNaN(parseInt(prod?.quotation?.price))\r\n            ? prod?.quotation?.price\r\n            : \"\",\r\n          dateAdded: prod?.quotation\r\n            ? new Date(prod?.quotation?.dateOfPriceAdded)\r\n                .toISOString()\r\n                .substring(0, 10)\r\n            : new Date().toISOString().substring(0, 10),\r\n          productId: prod?._id,\r\n          variableId: prod?.quotation?.variableId?._id\r\n            ? prod?.quotation?.variableId?._id\r\n            : \"\",\r\n          isNew: !isNaN(parseInt(prod?.quotation?.price)) ? false : true,\r\n          variableName: prod?.quotation?.variableId\r\n            ? `${prod?.quotation?.variableId?.name} [${prod?.quotation?.variableId?.coefficient}]`\r\n            : `default [1]`,\r\n          _id: `${prod?._id}-${prod?.quotation?.variableId?._id || \"none\"}`,\r\n        };\r\n      });\r\n    },\r\n    setQuotationData() {\r\n      const quotationData = this.productsData?.reduce((acc, prod) => {\r\n        const { quotation, _id, title } = prod || {};\r\n        const quotationFile = quotation?.quotationFile;\r\n\r\n        if (quotationFile) {\r\n          acc[quotationFile] = acc[quotationFile] || [];\r\n          acc[quotationFile].push({\r\n            productId: _id,\r\n            title,\r\n            variableId: prod?.quotation?.variableId?._id\r\n              ? prod?.quotation?.variableId?._id\r\n              : \"\",\r\n            variableName: prod?.quotation?.variableId\r\n              ? `${prod?.quotation?.variableId?.name} [${prod?.quotation?.variableId?.coefficient}]`\r\n              : null,\r\n            _id: `${_id}-${prod?.quotation?.variableId?._id || \"none\"}`,\r\n          });\r\n        }\r\n\r\n        return acc;\r\n      }, {});\r\n\r\n      this.quotationFileData = Object.entries(quotationData || {}).map(\r\n        ([quotationFile, products]) => ({\r\n          file: {\r\n            link: quotationFile,\r\n            name: quotationFile?.split(\"/\")?.pop(),\r\n            isLink: true,\r\n          },\r\n          products,\r\n        }),\r\n      );\r\n    },\r\n    async fetchProductsVariables() {\r\n      const productIds = this.productsData.map((item) => item?._id);\r\n      if (!productIds || productIds?.length === 0) {\r\n        return;\r\n      }\r\n      const res = await this.getProductVariables({\r\n        params: {\r\n          productIds: productIds,\r\n        },\r\n      });\r\n      if (res?.success) {\r\n        this.productVariables = res?.data;\r\n      }\r\n    },\r\n    addNewVariablePrice(product, index) {\r\n      this.$bus.$emit(\"select-product-variable-modal\", {\r\n        showModal: true,\r\n        selectOptions: this.productVariableOptions[product?.productId],\r\n        index: index,\r\n        product: product,\r\n      });\r\n    },\r\n    handleClose() {\r\n      this.$bus.$emit(\"research-status-modal\", false);\r\n    },\r\n    openProductQuotationSelectModal() {\r\n      this.$bus.$emit(\"product-quotation-select-modal\", {\r\n        showModal: true,\r\n        products: [...this.productPrices],\r\n        quotationFiles: [...this.quotationFileData],\r\n      });\r\n    },\r\n    removeQuotation(index) {\r\n      this.quotationFileData.splice(index, 1);\r\n    },\r\n    removeProductQuotation(product) {\r\n      this.quotationFileData = this.quotationFileData\r\n        .map((item) => ({\r\n          ...item,\r\n          products: item.products?.filter((prod) => prod?._id !== product?._id),\r\n        }))\r\n        ?.filter((item) => item?.products?.length > 0);\r\n    },\r\n    updateStatus(status) {\r\n      this.formData.status = status?.display_name;\r\n    },\r\n    removeVariablePrice(product, index) {\r\n      if (!this.product?.isNew) {\r\n        this.deletionList.push({\r\n          productId: product?.productId,\r\n          variableId: product?.variableId,\r\n        });\r\n      }\r\n      this.productPrices?.splice(index, 1);\r\n      this.removeProductQuotation(product);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"attach-quotations-to-status-form\");\r\n    this.$bus.$off(\"product-variable-selected-new-price\");\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResearchStatusForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResearchStatusForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ResearchStatusForm.vue?vue&type=template&id=7cb6780e\"\nimport script from \"./ResearchStatusForm.vue?vue&type=script&lang=js\"\nexport * from \"./ResearchStatusForm.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","companyData","companyName","isFormSubmitting","on","handleClose","handleSubmit","scopedSlots","_u","key","fn","nextFollowUpDate","shifted","_v","_s","_e","ref","display_name","formData","status","fieldValidations","statusOptions","updateStatus","updateDate","$event","$focusNextElement","model","value","date","callback","$$v","$set","expression","note","followUpDate","_l","productPrices","product","index","title","variableName","variableId","productVariableOptions","productId","length","addNewVariablePrice","price","dateAdded","removeVariablePrice","openProductQuotationSelectModal","quotationFileData","quotationHeaders","quotation","class","file","isLink","name","products","prod","_id","removeProductQuotation","removeQuotation","proxy","staticRenderFns","props","type","Object","required","marketResearchId","String","marketResearchSettings","Array","components","FormInput","GeneralForm","GeneralButton","ProductQuotationSelectModal","ClassicTable","IconPlus","IconInfo","IconTrash2","GeneralRemovableItem","FileActions","StatusSearchDropdown","SelectProductVariableModal","data","getDateFromToday","sortable","productVariables","FormValidationRule","minLength","maxLength","minDate","maxDate","deletionList","mounted","$bus","$on","variable","splice","Date","toISOString","substring","id","isNew","fetchProductsVariables","watch","immediate","handler","productsData","initializeProductPrices","setQuotationData","deep","computed","output","getNextDate","followUpDateInterval","filter","doesCompanySell","item","map","productName","keys","entries","reduce","items","some","coefficient","default","methods","mapActions","getTrackers","getFileBlob","addQuotation","getProductVariables","checkForQuotationAndPrices","productPricesData","productsInPrices","productsInQuotationFiles","flatMap","forEach","priceData","find","Error","includes","isValid","$validateForm","Number","err","$toast","error","message","FormData","append","companyId","JSON","stringify","p","res","success","$emit","isNaN","parseInt","dateOfPriceAdded","quotationData","acc","quotationFile","push","link","split","pop","productIds","params","showModal","selectOptions","quotationFiles","beforeDestroy","$off","component"],"sourceRoot":""}