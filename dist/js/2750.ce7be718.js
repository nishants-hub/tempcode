"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[2750],{32750:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n(78626),i=n(93518),o={components:{GeneralRemovableItem:()=>n.e(7349).then(n.bind(n,57349)),FormInput:()=>n.e(6342).then(n.bind(n,96342))},props:{companies:{type:Array,required:!1,default:()=>[]},selectedCompany:{type:Object,required:!1,default:null},dropdownLabel:{type:String,required:!0},dropdownId:{type:String,required:!0},isMultiSelect:{type:Boolean,required:!1,default:!1},showSelectedList:{type:Boolean,required:!1,default:!0},showError:{type:Boolean,required:!1,default:!0},verticalPadding:{type:String,required:!1},blackListed:{type:Array,required:!1,default:()=>[]},allowCreateNew:{type:Boolean,default:!1}},data(){return{company:this.selectedCompany?.display_name||"",companySuggestions:[],isCompanySuggestionsFetching:!1,fetchDebouncedCompanySuggestions:(0,s.debounce)(this.fetchCompanySuggestions,300)}},watch:{selectedCompany(){this.company=this.selectedCompany?.display_name}},computed:{getFilteredCompanySuggestions(){let e;return e=this.isMultiSelect?this.companySuggestions?.filter((e=>!this.companies?.some((t=>t?._id===e?._id)))):this.companySuggestions?.filter((e=>this.selectedCompany?._id!==e?._id)),this.blackListed?.length>0&&(e=e?.filter((e=>!this.blackListed.includes(e?._id)))),e}},methods:{...(0,i.i0)("company",["getCompanySuggestions"]),async fetchCompanySuggestions(e){if(""===e)return void(this.companySuggestions=[]);this.isCompanySuggestionsFetching=!0;const t=await this.getCompanySuggestions({params:{searchTerm:e?.trim()}});let n=!1;this.companySuggestions=t?.map((t=>(t?.name?.toLowerCase()?.trim()===e?.toLowerCase()?.trim()&&(n=!0),{display_name:t?.name,_id:t?.id,is_html:!1}))),!n&&this.allowCreateNew&&this.companySuggestions.unshift({htmlContent:`Create: <span class="ml-spacing-50 bg-bg-neutral-default py-spacing-50 px-spacing-100 rounded-08">${e}</span>`,display_name:e?.trim(),_id:e?.toLowerCase()?.trim(),isNew:!0,is_html:!0}),this.isCompanySuggestionsFetching=!1},handleReset(e){this.isMultiSelect&&!e||(this.companySuggestions=[])},handleSelect(e){this.isMultiSelect?this.addCompanyToCompanies(e):this.selectCompany(e)},selectCompany(e){this.company=e?.display_name,this.$emit("on-company-update",e)},addCompanyToCompanies(e){let t=[...this.companies,e];this.$emit("on-companies-update",t)},removeCompanyFromCompanies(e){let t=this.companies.filter((t=>t?._id!==e?._id));this.$emit("on-companies-update",t)}}},a=o,r=(0,n(81656).A)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[e.isMultiSelect&&e.showSelectedList&&e.companies?.length>0?t("div",{staticClass:"mb-spacing-250 flex w-full flex-wrap gap-spacing-150"},e._l(e.companies,(function(n){return t("GeneralRemovableItem",{key:n?._id,attrs:{"item-name":n?.display_name},on:{"on-item-removed":function(t){return e.removeCompanyFromCompanies(n)}}})})),1):e._e(),t("FormInput",{attrs:{label:e.dropdownLabel,"input-type":"searchable-input",inputId:e.dropdownId,"prevent-v-model":!0,"clear-button":!!e.company,suggestions:e.getFilteredCompanySuggestions,"vertical-padding":e.verticalPadding,"show-error":e.showError,"is-suggestions-fetching":e.isCompanySuggestionsFetching},on:{"set-suggestion":e.handleSelect,"reset-suggestions":e.handleReset,"fetch-suggestions":e.fetchDebouncedCompanySuggestions,"enter-pressed":function(t){return e.$emit("enter-pressed")}},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}})],1)}),[],!1,null,null,null),l=r.exports}}]);