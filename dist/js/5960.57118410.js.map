{"version":3,"file":"js/5960.57118410.js","mappings":"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","sources":["webpack://construction-commercial-search-frontend/./src/components/Category/NewCategoryForm.vue","webpack://construction-commercial-search-frontend/src/components/Category/NewCategoryForm.vue","webpack://construction-commercial-search-frontend/./src/components/Category/NewCategoryForm.vue?d6fa","webpack://construction-commercial-search-frontend/./src/components/Category/NewCategoryForm.vue?ce65"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex h-full min-h-[500px] w-full flex-col\"},[_c('GeneralForm',{staticClass:\"flex-1\",attrs:{\"heading\":_vm.update ? _vm.formData?.title : `New ${_vm.selectedCommercialItem?.key}`,\"sub-heading\":_vm.parent?.title || '',\"showCloseButton\":true,\"submit-button-label\":_vm.update ? 'Update' : 'Add',\"submit-button-type\":_vm.update ? 'brand' : 'success',\"is-form-submitting\":_vm.loading},on:{\"close-pressed\":_vm.handleClose,\"form-submitted\":_vm.handleSubmit},scopedSlots:_vm._u([{key:\"form-body\",fn:function(){return [_c('div',{staticClass:\"flex flex-1 flex-col gap-spacing-100\"},[(!_vm.update)?_c('div',{staticClass:\"mb-spacing-250 flex items-center gap-spacing-200\"},_vm._l((_vm.commercialItemOptions),function(data,index){return _c('div',{key:index,staticClass:\"flex cursor-pointer flex-row gap-spacing-100\",on:{\"click\":function($event){return _vm.handleFieldChange(data)}}},[_c('RadioButton',{attrs:{\"selected\":_vm.selectedCommercialItem?.value === data?.value,\"isEditable\":true}}),_c('p',{staticClass:\"text-body/m/relaxed/400 text-content-on-neutral-primary\"},[_vm._v(\" \"+_vm._s(data?.key)+\" \")])],1)}),0):_vm._e(),_c('div',{class:_vm.selectedCommercialItem?.value === 'PRODUCT'\n              ? 'mb-spacing-100 grid grid-cols-1 gap-x-spacing-200 gap-y-spacing-100 ipad:grid-cols-2'\n              : ''},[_c('FormInput',{ref:\"titleInput\",attrs:{\"label\":`${_vm.selectedCommercialItem?.key} Title`,\"inputId\":\"title\",\"autofocus\":\"\",\"fieldValidations\":_vm.fieldValidations?.title,\"order\":1},on:{\"enter-pressed\":function($event){_vm.selectedCommercialItem?.value === 'PRODUCT'\n                ? _vm.$focusNextElement('unit')\n                : _vm.handleSubmit()}},model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}}),(_vm.selectedCommercialItem?.value === 'PRODUCT')?_c('UnitSearchDropDown',{ref:\"unit\",attrs:{\"dropdown-label\":'Unit',\"dropdown-id\":'unit',\"selected-unit\":{ display_name: _vm.formData?.productDetails?.unit },\"is-multi-select\":false,\"field-validations\":_vm.fieldValidations?.productDetails?.unit,\"order\":2},on:{\"on-unit-update\":_vm.updateUnit,\"enter-pressed\":function($event){_vm.formData?.productDetails?.variables?.length\n                ? _vm.$focusNextElement('variable-name-0')\n                : undefined}}}):_vm._e()],1),(\n            _vm.selectedCommercialItem?.value === 'PRODUCT' &&\n            _vm.formData?.productDetails?.variables?.length > 0\n          )?_c('div',{staticClass:\"grid grid-cols-1 gap-x-spacing-200 gap-y-spacing-300 ipad:grid-cols-2\"},_vm._l((_vm.formData?.productDetails?.variables),function(variable,index){return _c('div',{key:index,staticClass:\"relative flex flex-col gap-spacing-100 rounded-12 border border-stroke-bold p-spacing-150 pt-spacing-300\"},[_c('p',{staticClass:\"absolute -top-[14px] left-spacing-200 origin-0 bg-bg-neutral-default p-spacing-50 text-body/m/relaxed/400 text-content-on-neutral-secondary\"},[_vm._v(\" Variable \")]),(variable?.isNew)?_c('div',{staticClass:\"absolute -right-spacing-150 -top-spacing-150 z-10 flex h-spacing-300 w-spacing-300 cursor-pointer items-center justify-center rounded-full bg-bg-neutral-disabled text-content-on-neutral-secondary hover:bg-constant-status-error hover:text-constant-neutral-white\",on:{\"click\":function($event){return _vm.removeVariable(index)}}},[_c('IconX',{staticClass:\"h-spacing-250 w-spacing-250 text-current\"})],1):_vm._e(),_c('FormInput',{ref:\"variableName\",refInFor:true,attrs:{\"label\":`Name`,\"inputId\":`variable-name-${index}`,\"fieldValidations\":_vm.fieldValidations?.productDetails?.variables?.name,\"order\":3 + index * 2},on:{\"enter-pressed\":function($event){return _vm.$focusNextElement(`variable-coefficient-${index}`)}},model:{value:(variable.name),callback:function ($$v) {_vm.$set(variable, \"name\", $$v)},expression:\"variable.name\"}}),_c('FormInput',{ref:\"variableCoefficient\",refInFor:true,attrs:{\"label\":`Coefficient`,\"input-type\":\"number\",\"inputId\":`variable-coefficient-${index}`,\"fieldValidations\":_vm.fieldValidations?.productDetails?.variables?.coefficient,\"order\":4 + index * 2},on:{\"enter-pressed\":function($event){return _vm.$focusNextElement(`variable-name-${index + 1}`)}},model:{value:(variable.coefficient),callback:function ($$v) {_vm.$set(variable, \"coefficient\", $$v)},expression:\"variable.coefficient\"}})],1)}),0):_vm._e(),(_vm.selectedCommercialItem?.value === 'PRODUCT')?_c('div',{staticClass:\"my-spacing-150 flex\"},[_c('div',{on:{\"click\":_vm.addVariable}},[_c('GeneralButton',{attrs:{\"button-type\":'button',\"type\":'brand',\"size\":'small',\"emphasis\":'secondary',\"icon-position\":'none',\"label\":'Add Variable'}})],1)]):_vm._e()])]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"flex h-full min-h-[500px] w-full flex-col\">\r\n    <GeneralForm\r\n      :heading=\"update ? formData?.title : `New ${selectedCommercialItem?.key}`\"\r\n      :sub-heading=\"parent?.title || ''\"\r\n      :showCloseButton=\"true\"\r\n      @close-pressed=\"handleClose\"\r\n      @form-submitted=\"handleSubmit\"\r\n      :submit-button-label=\"update ? 'Update' : 'Add'\"\r\n      :submit-button-type=\"update ? 'brand' : 'success'\"\r\n      :is-form-submitting=\"loading\"\r\n      class=\"flex-1\"\r\n    >\r\n      <template #form-body>\r\n        <div class=\"flex flex-1 flex-col gap-spacing-100\">\r\n          <!-- Commercial Item Type Selection -->\r\n          <div\r\n            v-if=\"!update\"\r\n            class=\"mb-spacing-250 flex items-center gap-spacing-200\"\r\n          >\r\n            <div\r\n              v-for=\"(data, index) in commercialItemOptions\"\r\n              :key=\"index\"\r\n              class=\"flex cursor-pointer flex-row gap-spacing-100\"\r\n              @click=\"handleFieldChange(data)\"\r\n            >\r\n              <RadioButton\r\n                :selected=\"selectedCommercialItem?.value === data?.value\"\r\n                :isEditable=\"true\"\r\n              />\r\n              <p\r\n                class=\"text-body/m/relaxed/400 text-content-on-neutral-primary\"\r\n              >\r\n                {{ data?.key }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Title Input -->\r\n          <div\r\n            :class=\"\r\n              selectedCommercialItem?.value === 'PRODUCT'\r\n                ? 'mb-spacing-100 grid grid-cols-1 gap-x-spacing-200 gap-y-spacing-100 ipad:grid-cols-2'\r\n                : ''\r\n            \"\r\n          >\r\n            <FormInput\r\n              ref=\"titleInput\"\r\n              :label=\"`${selectedCommercialItem?.key} Title`\"\r\n              v-model=\"formData.title\"\r\n              inputId=\"title\"\r\n              autofocus\r\n              :fieldValidations=\"fieldValidations?.title\"\r\n              @enter-pressed=\"\r\n                selectedCommercialItem?.value === 'PRODUCT'\r\n                  ? $focusNextElement('unit')\r\n                  : handleSubmit()\r\n              \"\r\n              :order=\"1\"\r\n            />\r\n\r\n            <UnitSearchDropDown\r\n              v-if=\"selectedCommercialItem?.value === 'PRODUCT'\"\r\n              ref=\"unit\"\r\n              :dropdown-label=\"'Unit'\"\r\n              :dropdown-id=\"'unit'\"\r\n              :selected-unit=\"{ display_name: formData?.productDetails?.unit }\"\r\n              :is-multi-select=\"false\"\r\n              :field-validations=\"fieldValidations?.productDetails?.unit\"\r\n              @on-unit-update=\"updateUnit\"\r\n              @enter-pressed=\"\r\n                formData?.productDetails?.variables?.length\r\n                  ? $focusNextElement('variable-name-0')\r\n                  : undefined\r\n              \"\r\n              :order=\"2\"\r\n            />\r\n          </div>\r\n\r\n          <div\r\n            v-if=\"\r\n              selectedCommercialItem?.value === 'PRODUCT' &&\r\n              formData?.productDetails?.variables?.length > 0\r\n            \"\r\n            class=\"grid grid-cols-1 gap-x-spacing-200 gap-y-spacing-300 ipad:grid-cols-2\"\r\n          >\r\n            <div\r\n              v-for=\"(variable, index) in formData?.productDetails?.variables\"\r\n              :key=\"index\"\r\n              class=\"relative flex flex-col gap-spacing-100 rounded-12 border border-stroke-bold p-spacing-150 pt-spacing-300\"\r\n            >\r\n              <p\r\n                class=\"absolute -top-[14px] left-spacing-200 origin-0 bg-bg-neutral-default p-spacing-50 text-body/m/relaxed/400 text-content-on-neutral-secondary\"\r\n              >\r\n                Variable\r\n              </p>\r\n              <div\r\n                v-if=\"variable?.isNew\"\r\n                @click=\"removeVariable(index)\"\r\n                class=\"absolute -right-spacing-150 -top-spacing-150 z-10 flex h-spacing-300 w-spacing-300 cursor-pointer items-center justify-center rounded-full bg-bg-neutral-disabled text-content-on-neutral-secondary hover:bg-constant-status-error hover:text-constant-neutral-white\"\r\n              >\r\n                <IconX class=\"h-spacing-250 w-spacing-250 text-current\" />\r\n              </div>\r\n              <FormInput\r\n                ref=\"variableName\"\r\n                :label=\"`Name`\"\r\n                v-model=\"variable.name\"\r\n                :inputId=\"`variable-name-${index}`\"\r\n                :fieldValidations=\"\r\n                  fieldValidations?.productDetails?.variables?.name\r\n                \"\r\n                @enter-pressed=\"\r\n                  $focusNextElement(`variable-coefficient-${index}`)\r\n                \"\r\n                :order=\"3 + index * 2\"\r\n              />\r\n              <FormInput\r\n                ref=\"variableCoefficient\"\r\n                :label=\"`Coefficient`\"\r\n                v-model=\"variable.coefficient\"\r\n                input-type=\"number\"\r\n                :inputId=\"`variable-coefficient-${index}`\"\r\n                :fieldValidations=\"\r\n                  fieldValidations?.productDetails?.variables?.coefficient\r\n                \"\r\n                @enter-pressed=\"$focusNextElement(`variable-name-${index + 1}`)\"\r\n                :order=\"4 + index * 2\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            v-if=\"selectedCommercialItem?.value === 'PRODUCT'\"\r\n            class=\"my-spacing-150 flex\"\r\n          >\r\n            <div @click=\"addVariable\">\r\n              <GeneralButton\r\n                :button-type=\"'button'\"\r\n                :type=\"'brand'\"\r\n                :size=\"'small'\"\r\n                :emphasis=\"'secondary'\"\r\n                :icon-position=\"'none'\"\r\n                :label=\"'Add Variable'\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </GeneralForm>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { FormValidationRule } from \"@/utilities/helpers/formValidations\";\r\nimport { mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    FormInput: () => import(\"@/components/General/FormInput.vue\"),\r\n    GeneralForm: () => import(\"@/components/General/Form.vue\"),\r\n    RadioButton: () => import(\"@/components/General/RadioButton.vue\"),\r\n    GeneralButton: () => import(\"@/components/General/CustomButton.vue\"),\r\n    UnitSearchDropDown: () =>\r\n      import(\"@/components/Utility/CustomDropdowns/UnitSearch.vue\"),\r\n    IconX: () => import(\"@/components/svgIcons/x.vue\"),\r\n  },\r\n  data() {\r\n    return {\r\n      selectedCommercialItem: { key: \"Category\", value: \"CATEGORY\" },\r\n      id: null,\r\n      update: false,\r\n      parent: null,\r\n      loading: false,\r\n      commercialItemOptions: [\r\n        { key: \"Category\", value: \"CATEGORY\" },\r\n        { key: \"Product\", value: \"PRODUCT\" },\r\n      ],\r\n      formData: {\r\n        title: \"\",\r\n        productDetails: {\r\n          unit: \"\",\r\n          variables: [],\r\n        },\r\n      },\r\n      fieldValidations: {\r\n        title: new FormValidationRule({\r\n          required: true,\r\n          minLength: 3,\r\n        }),\r\n        productDetails: {\r\n          variables: {\r\n            name: new FormValidationRule({ required: true, minLength: 2 }),\r\n            coefficient: new FormValidationRule({\r\n              required: true,\r\n              min: 0,\r\n              max: 1,\r\n            }),\r\n          },\r\n          unit: new FormValidationRule({\r\n            minLength: 1,\r\n            maxLength: 10,\r\n            required: true,\r\n          }),\r\n        },\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$bus.$on(\"category-form-update\", (data) => {\r\n      this.updateForm(data);\r\n    });\r\n    this.$focusNextElement(\"title\");\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      addCommercialItem: \"category/addCommercialItem\",\r\n      updateCommercialItem: \"category/updateCommercialItem\",\r\n    }),\r\n    hasUniqueNames(array) {\r\n      const seenNames = new Set();\r\n      return array.reduce((isUnique, item) => {\r\n        if (!isUnique) return false; // Short-circuit if duplicate already found\r\n        if (seenNames.has(item.name)) return false; // Duplicate found\r\n        seenNames.add(item.name); // Add to Set\r\n        return true; // Keep checking\r\n      }, true);\r\n    },\r\n    updateForm(data) {\r\n      this.parent = data?.parent || null;\r\n      this.id = data?.id || null;\r\n      if (data?.level >= 2) {\r\n        this.selectedCommercialItem = { key: \"Product\", value: \"PRODUCT\" };\r\n      }\r\n      if (data?.update && data?.formData) {\r\n        this.update = true;\r\n        this.selectedCommercialItem =\r\n          data?.type === \"PRODUCT\"\r\n            ? { key: \"Product\", value: \"PRODUCT\" }\r\n            : { key: \"Category\", value: \"CATEGORY\" };\r\n        this.formData.title = data?.formData?.title;\r\n        if (data?.type === \"PRODUCT\") {\r\n          this.formData.productDetails.unit = data?.formData?.unit || \"\";\r\n          this.formData.productDetails.variables = [\r\n            ...data?.formData?.productDetails?.variables?.map((variable) => ({\r\n              ...variable,\r\n              isNew: false,\r\n            })),\r\n          ];\r\n        }\r\n      }\r\n    },\r\n    async handleSubmit() {\r\n      const isValid = this.$validateForm();\r\n      if (!isValid) {\r\n        return;\r\n      }\r\n      if (!this.hasUniqueNames(this.formData?.productDetails?.variables)) {\r\n        return this.$toast.error(\"All variable names must be unique\");\r\n      }\r\n\r\n      this.loading = true;\r\n      const payload = this.buildPayload();\r\n\r\n      if (this.update) {\r\n        const res = await this.updateCommercialItem({\r\n          id: this.id,\r\n          body: payload,\r\n        });\r\n        if (res?.success) {\r\n          this.$bus.$emit(\"fetch-product-details\", { id: this.id });\r\n          this.$bus.$emit(\"refetch-commercial-items\");\r\n          this.handleClose();\r\n        } else {\r\n          this.$toast.error(res?.message);\r\n        }\r\n      } else {\r\n        const res = await this.addCommercialItem(payload);\r\n        if (res?.success) {\r\n          this.$bus.$emit(\"refetch-commercial-items\");\r\n          this.handleClose();\r\n        } else {\r\n          this.$toast.error(res?.message);\r\n        }\r\n      }\r\n      this.loading = false;\r\n    },\r\n    buildPayload() {\r\n      const { title, productDetails } = this.formData;\r\n      const commonData = this.update\r\n        ? { title }\r\n        : { title, parentId: this.parent?._id };\r\n      if (this.selectedCommercialItem.value === \"PRODUCT\") {\r\n        return {\r\n          ...commonData,\r\n          type: \"product\",\r\n          productDetails: {\r\n            unit: productDetails?.unit,\r\n            variables: productDetails?.variables,\r\n          },\r\n        };\r\n      } else {\r\n        return { ...commonData, type: \"category\" };\r\n      }\r\n    },\r\n    removeVariable(index) {\r\n      this.formData.productDetails.variables.splice(index, 1);\r\n    },\r\n\r\n    handleClose() {\r\n      this.$bus.$emit(\"add-new-commercial-item-modal\", { showModal: false });\r\n    },\r\n    handleFieldChange(data) {\r\n      this.selectedCommercialItem = data;\r\n      this.resetFields();\r\n      this.$focusNextElement(\"title\");\r\n    },\r\n    resetFields() {\r\n      this.formData = {\r\n        title: \"\",\r\n        productDetails: {\r\n          variables: [],\r\n          variable: {\r\n            name: \"\",\r\n            coefficient: \"\",\r\n          },\r\n        },\r\n      };\r\n    },\r\n    addVariable() {\r\n      this.formData.productDetails.variables.push({\r\n        name: \"\",\r\n        coefficient: \"\",\r\n        isNew: true,\r\n      });\r\n    },\r\n    removeVariableFromVariables(variable) {\r\n      let output = this.formData?.productDetails?.variables?.filter(\r\n        (item) => item?.name !== variable?.name,\r\n      );\r\n      this.formData.productDetails.variables = output;\r\n    },\r\n    updateUnit(unit) {\r\n      this.formData.productDetails.unit = unit?.display_name;\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"category-form-update\");\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewCategoryForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewCategoryForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./NewCategoryForm.vue?vue&type=template&id=cdf89534\"\nimport script from \"./NewCategoryForm.vue?vue&type=script&lang=js\"\nexport * from \"./NewCategoryForm.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","update","formData","title","selectedCommercialItem","key","parent","loading","on","handleClose","handleSubmit","scopedSlots","_u","fn","_e","_l","commercialItemOptions","data","index","$event","handleFieldChange","value","_v","_s","class","ref","fieldValidations","$focusNextElement","model","callback","$$v","$set","expression","display_name","productDetails","unit","updateUnit","variables","length","variable","isNew","removeVariable","refInFor","name","coefficient","addVariable","proxy","staticRenderFns","components","FormInput","GeneralForm","RadioButton","GeneralButton","UnitSearchDropDown","IconX","id","FormValidationRule","required","minLength","min","max","maxLength","mounted","$bus","$on","updateForm","methods","mapActions","addCommercialItem","updateCommercialItem","hasUniqueNames","array","seenNames","Set","reduce","isUnique","item","has","add","level","type","map","isValid","$validateForm","$toast","error","payload","buildPayload","res","body","success","$emit","message","commonData","parentId","_id","splice","showModal","resetFields","push","removeVariableFromVariables","output","filter","beforeDestroy","$off","component"],"sourceRoot":""}