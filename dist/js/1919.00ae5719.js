"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[1919],{81919:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var s=i(78626),n=i(93518),l={components:{GeneralRemovableItem:()=>i.e(7349).then(i.bind(i,57349)),FormInput:()=>i.e(6342).then(i.bind(i,96342))},props:{selectedUnits:{type:Array,required:!1,default:()=>[]},selectedUnit:{type:Object,required:!1,default:null},dropdownLabel:{type:String,required:!0},dropdownId:{type:String,required:!0},isMultiSelect:{type:Boolean,required:!1,default:!1},showSelectedList:{type:Boolean,required:!1,default:!0},showError:{type:Boolean,required:!1,default:!0},verticalPadding:{type:String,required:!1},fieldValidations:{type:Object,required:!1},order:{type:Number,required:!1}},data(){return{unit:this.selectedUnit?.display_name,unitSuggestions:[],isUnitSuggestionsFetching:!1,fetchDebouncedUnitSuggestions:(0,s.debounce)(this.fetchUnitSuggestions,300),unitOptions:[]}},watch:{selectedUnit(){this.unit=this.selectedUnit?.display_name},unit(e){this.$emit("on-unit-update",{display_name:e})}},async mounted(){const e=await this.getOptions({params:{type:"PRODUCT_UNIT"}});e?.success&&(this.unitOptions=e?.data)},computed:{getFilteredUnitSuggestions(){let e;return e=this.isMultiSelect?this.unitSuggestions?.filter((e=>!this.selectedUnits?.some((t=>t?.display_name===e?.display_name)))):this.unitSuggestions?.filter((e=>this.selectedUnit?.display_name!==e?.display_name)),e}},methods:{...(0,n.i0)("utils",["getOptions"]),async fetchUnitSuggestions(e){this.isUnitSuggestionsFetching=!0;const t=e?this.unitOptions?.filter((t=>t?.value?.toLowerCase()?.includes(e?.toLowerCase()))):this.unitOptions;this.unitSuggestions=t?.map((e=>({display_name:e?.value,_id:e?.id}))),this.isUnitSuggestionsFetching=!1},handleReset(e){this.isMultiSelect&&!e||(this.unitSuggestions=[])},async handleFocus(){await this.fetchUnitSuggestions()},handleSelect(e){this.isMultiSelect?this.addUnitToSelected(e):this.selectUnit(e)},selectUnit(e){this.unit=e?.display_name,this.$emit("on-unit-update",e)},addUnitToSelected(e){let t=[...this.selectedUnits,e];this.$emit("on-units-update",t)},removeUnitFromSelected(e){let t=this.selectedUnits.filter((t=>t?.display_name!==e?.display_name));this.$emit("on-units-update",t)},handleBlur(){},validate(){return this.$refs.searchInputRef?.validate()},scrollToComponent(){return this.$refs.searchInputRef?.scrollToComponent()},clearSuggestions(){this.unitSuggestions=[]}}},u=l,o=(0,i(81656).A)(u,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[e.isMultiSelect&&e.showSelectedList&&e.selectedUnits?.length>0?t("div",{staticClass:"mb-spacing-250 flex w-full flex-wrap gap-spacing-150"},e._l(e.selectedUnits,(function(i){return t("GeneralRemovableItem",{key:i?._id,attrs:{"item-name":i?.display_name},on:{"on-item-removed":function(t){return e.removeUnitFromSelected(i)}}})})),1):e._e(),t("FormInput",{ref:"searchInputRef",attrs:{label:e.dropdownLabel,"input-type":"searchable-input",inputId:e.dropdownId,"prevent-v-model":!0,"clear-button":!!e.unit,suggestions:e.getFilteredUnitSuggestions,"vertical-padding":e.verticalPadding,"show-error":e.showError,"field-validations":e.fieldValidations,"is-suggestions-fetching":e.isUnitSuggestionsFetching,order:e.order},on:{"set-suggestion":e.handleSelect,"reset-suggestions":e.handleReset,blur:e.handleBlur,focus:e.handleFocus,"clear-suggestions":e.clearSuggestions,"fetch-suggestions":e.fetchDebouncedUnitSuggestions,"enter-pressed":function(t){return e.$emit("enter-pressed")}},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}})],1)}),[],!1,null,null,null),r=o.exports}}]);