"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[3343],{33343:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var a=s(77788),i=s(93518),n={components:{AuthWrapper:()=>s.e(4932).then(s.bind(s,4932)),GeneralButton:()=>s.e(695).then(s.bind(s,90695)),FormInput:()=>s.e(6342).then(s.bind(s,96342)),GeneralSelect:()=>s.e(5933).then(s.bind(s,95933)),IconX:()=>s.e(6847).then(s.bind(s,96847))},props:{formData:{type:Object,default:()=>({})},update:{type:Boolean,required:!1,default:!1}},data:()=>({name:"",email:"",password:"",isLoading:!1,roleOptions:[{key:"ADMIN",value:"Admin",default:!0},{key:"MANAGER",value:"Manager"},{key:"VIEWER",value:"Viewer"}],role:"ADMIN",fieldValidations:{email:new a.s({type:"EMAIL",required:!0}),password:new a.s({type:"PASSWORD",required:!0}),name:new a.s({minLength:2,required:!0})}}),watch:{formData:{handler(e){e?.email&&(this.email=e?.email),e?.name&&(this.name=e?.name),e?.role&&(this.role=e?.role)},immediate:!0,deep:!0},update:{handler(e){e||this.resetFields()}}},methods:{...(0,i.i0)({signup:"auth/signup",updateUserByID:"auth/updateUserByID"}),buildPayload(){let e={name:this.name,email:this.email,role:this.role};return this.update||(e.password=this.password),e},async signupFn(){if(!this.$validateForm())return;this.isLoading=!0;let e=this.buildPayload();if(this.update){const t=await this.updateUserByID({id:this.formData?._id,body:e});t?.success?(this.$bus.$emit("refresh-users-list"),this.$toast.success(t?.message)):this.$toast.error(t?.message)}else{const t=await this.signup(e);t?.success?(this.resetFields(),this.$bus.$emit("refresh-users-list"),this.$toast.success(t?.message)):this.$toast.error(t?.message)}this.isLoading=!1},handleSelectedRole(e){this.role=e},resetFields(){this.email="",this.name="",this.role="ADMIN",this.password=""},handleClose(){this.$emit("close-pressed")}}},r=n,l=(0,s(81656).A)(r,(function(){var e=this,t=e._self._c;return t("AuthWrapper",{staticClass:"min-h-screen",attrs:{title:e.update?"Edit User":"Create Account"}},[t("div",{staticClass:"z-100000 absolute right-spacing-300 top-spacing-300 cursor-pointer",on:{click:function(t){return e.handleClose()}}},[t("IconX",{staticClass:"h-spacing-300 w-spacing-300 text-content-on-neutral-secondary hover:text-content-on-neutral-primary"})],1),t("form",{staticClass:"flex flex-1 flex-col overflow-y-auto px-spacing-300",on:{submit:function(t){return t.preventDefault(),e.signupFn.apply(null,arguments)}}},[t("div",{staticClass:"flex flex-1 flex-col gap-spacing-200 py-spacing-50"},[t("GeneralSelect",{attrs:{label:"Role",options:e.roleOptions,"selected-option-key":e.role},on:{"option-selected":e.handleSelectedRole,"enter-pressed":function(t){return e.$focusNextElement("user-name")}}}),t("FormInput",{ref:"create-account-user-name",attrs:{"input-type":"text",label:"Name","input-id":"user-name","field-validations":e.fieldValidations?.name},on:{"enter-pressed":function(t){return e.$focusNextElement("user-email")}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("FormInput",{ref:"create-account-user-email",attrs:{"input-type":"user-email",label:"Email","input-id":"email",autocomplete:"off","field-validations":e.fieldValidations?.email},on:{"enter-pressed":function(t){return e.$focusNextElement("user-password")}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.update?e._e():t("FormInput",{ref:"create-account-user-password",attrs:{"input-type":"user-password",label:"Password","input-id":"cc-number","field-validations":e.fieldValidations?.password,autocomplete:"off"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("div",{staticClass:"sticky bottom-0 bg-bg-neutral-default pt-spacing-100",on:{click:function(t){return e.signupFn()}}},[t("GeneralButton",{attrs:{"button-type":"button",type:"brand",size:"large",emphasis:"primary","icon-position":"none",icon:"",image:"","is-disabled":!1,"is-loading":e.isLoading,label:e.update?"Update Account Details":"Create Account"}})],1)])])}),[],!1,null,null,null),o=l.exports}}]);