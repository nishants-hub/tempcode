"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[7501],{87501:function(t,e,o){o.r(e),o.d(e,{default:function(){return d}});var a=o(93518),s={props:{productData:{type:Object,required:!0}},components:{GeneralForm:()=>o.e(6277).then(o.bind(o,76277)),CompanySearchDropdown:()=>o.e(2750).then(o.bind(o,32750))},computed:{...(0,a.L8)({user:"auth/getUser"}),blackListed(){return this.productData?.companies?.map((t=>t._id))||[]}},data:()=>({formData:{companies:[]},isFormSubmitting:!1}),methods:{...(0,a.i0)({addCompaniesToProduct:"category/addCompaniesToProduct"}),async handleSubmit(){this.isFormSubmitting=!0;let t=this.formData?.companies?.filter((t=>!t?.isNew))?.map((t=>t?._id)),e=this.formData?.companies?.filter((t=>t?.isNew))?.map((t=>({companyName:t?.display_name,addUser:this.user?._id,origin:"QUICK_ADD"}))),o={id:this.productData?._id,body:{companyIds:t,newCompanies:e}};const a=await this.addCompaniesToProduct(o);a?.success&&(this.$bus.$emit("fetch-product-details",{id:this.productData?._id}),this.handleClose()),this.isFormSubmitting=!1,this.handleClose()},handleClose(){this.$bus.$emit("add-companies-to-product-modal",{showModal:!1})},updateCompanies(t){this.formData.companies=t}}},i=s,n=(0,o(81656).A)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex h-full min-h-[500px] w-full flex-col"},[e("GeneralForm",{staticClass:"flex-1",attrs:{heading:`Add Companies to ${t.productData?.title}`,showCloseButton:!0,"is-form-submitting":t.isFormSubmitting},on:{"close-pressed":t.handleClose,"form-submitted":t.handleSubmit},scopedSlots:t._u([{key:"form-body",fn:function(){return[e("CompanySearchDropdown",{attrs:{"dropdown-label":"Companies","dropdown-id":"companies",companies:t.formData.companies,"is-multi-select":!0,"black-listed":t.blackListed,"allow-create-new":!0},on:{"on-companies-update":t.updateCompanies}})]},proxy:!0}])})],1)}),[],!1,null,null,null),d=n.exports}}]);