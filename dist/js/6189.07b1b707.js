"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[6189],{36189:function(t,e,a){a.r(e),a.d(e,{default:function(){return i}});var s=a(93518),o=a(78626),r={props:{companyId:{type:String,required:!0},marketResearchId:{type:String,required:!0}},components:{PaginatedTable:()=>a.e(9666).then(a.bind(a,19666)),GeneralForm:()=>a.e(6277).then(a.bind(a,76277)),GeneralSkeleton:()=>a.e(2174).then(a.bind(a,2174))},data(){return{sortKey:"",sortOrder:"",limit:10,followUpHeaders:[{key:"updateDate",value:"Last Update",sortable:!0},{key:"note",value:"Note",sortable:!1}],isLoading:!1,fetchDebouncedData:(0,o.debounce)(this.fetchData,300),currentPage:0}},mounted(){this.fetchData()},computed:{...(0,s.aH)({followUpsData:t=>t.marketResearch.followUpsByCompany?.followUpHistory,companyName:t=>t.marketResearch.followUpsByCompany?.company?.companyName,currentPageNumber:t=>t.marketResearch.followUpsByCompany?.currentPage||0,totalPages:t=>t.marketResearch.followUpsByCompany?.totalPages||1,totalCount:t=>t.marketResearch.followUpsByCompany?.totalCount||0,nextFollowUpDate:t=>t.marketResearch.followUpsByCompany?.nextFollowUpDate,status:t=>t.marketResearch.followUpsByCompany?.status,error:t=>t.marketResearch?.error})},methods:{...(0,s.i0)("marketResearch",["getAllFollowUpsByCompany"]),async fetchData(t=1,e){this.isLoading=!0,this.currentPage=t;let a={params:{marketResearchId:this.marketResearchId,companyId:this.companyId,sortBy:this.sortKey||void 0,sortOrder:this.sortOrder||void 0,page:t,limit:this.limit}};await this.getAllFollowUpsByCompany(a),this.currentPage=this.currentPageNumber,this.isLoading=!1,e&&e()},fetchSortedData(t){this.sortKey=t?.sortKey||"",this.sortOrder=t?.sortOrder||"",this.fetchDebouncedData()},handleClose(){this.$bus.$emit("more-follow-ups-modal",!1)}}},n=r,l=(0,a(81656).A)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full min-h-[500px] w-full"},[e("GeneralForm",{attrs:{heading:"Follow Ups","sub-heading":t.companyName,showCloseButton:!0,"show-submit-button":!1},on:{"close-pressed":t.handleClose},scopedSlots:t._u([{key:"form-body",fn:function(){return[e("div",{staticClass:"flex items-center gap-spacing-100"},[e("p",{staticClass:"text-body/l/relaxed/400 text-content-on-neutral-secondary"},[t._v(" Status: ")]),e("p",{staticClass:"text-body/l/relaxed/400 text-content-on-neutral-primary"},[t._v(" "+t._s(t.status)+" ")])]),e("div",{staticClass:"flex items-center gap-spacing-100"},[e("p",{staticClass:"text-body/l/relaxed/400 text-content-on-neutral-secondary"},[t._v(" Next Follow Up: ")]),e("p",{staticClass:"text-body/l/relaxed/400 text-content-on-neutral-primary"},[t._v(" "+t._s(t._f("toDate")(t.nextFollowUpDate))+" ")])]),e("PaginatedTable",{attrs:{headers:t.followUpHeaders,"current-page":t.currentPage,"total-pages":t.totalPages,"sort-key":t.sortKey,"sort-order":t.sortOrder,"total-count":t.totalCount,error:t.error,"horizontal-padding":"px-spacing-0"},on:{"fetch-sorted-data":t.fetchSortedData,"fetch-data":t.fetchData},scopedSlots:t._u([{key:"table-body",fn:function(){return[t._l(t.followUpsData,(function(a){return e("tr",{key:a?._id,staticClass:"text-left text-body/m/relaxed/400 text-content-on-neutral-primary nexus:text-body/l/relaxed/400"},[e("td",{staticClass:"gap-spacing-25 py-spacing-100 pr-spacing-100"},[t._v(" "+t._s(t._f("toDate")(a?.date))+" ")]),e("td",{staticClass:"py-spacing-100 pr-spacing-100"},[t._v(" "+t._s(a?.note||"-------------------")+" ")])])})),t._l(new Array(4).fill(""),(function(a,s){return e("tr",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],key:s,staticClass:"text-left"},t._l(new Array(2).fill(""),(function(t,a){return e("td",{key:a,staticClass:"gap-spacing-25 py-spacing-100 pr-spacing-100"},[e("GeneralSkeleton",{class:1==a?"h-spacing-300 w-[200px] ipad:w-[500px]":"h-spacing-300 w-spacing-1200",attrs:{"is-table-cell":!0}})],1)})),0)}))]},proxy:!0}])})]},proxy:!0}])})],1)}),[],!1,null,null,null),i=l.exports}}]);