{"version":3,"file":"js/6436.e7277131.js","mappings":"4NAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAMJ,EAAIK,MAAQ,EAAI,iBAAmB,IAAI,CAACH,EAAG,MAAM,CAACI,YAAY,YAAY,CAACJ,EAAG,MAAM,CAACI,YAAY,kEAAkEF,MAAM,CACpPJ,EAAIO,kBACA,8BACA,oCACH,CAACL,EAAG,OAAO,CAACE,MAAMJ,EAAIQ,kBAAoBR,EAAIS,UAAY,iBAAmB,GAAGC,GAAG,CAAC,MAAQV,EAAIW,gBAAgB,YAAc,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBb,EAAIc,iBAAiBC,MAAM,KAAMC,UAAU,IAAI,CAAEhB,EAAIQ,iBAAkBN,EAAG,OAAO,CAACI,YAAY,6CAA6C,CAAEN,EAAIiB,WAAYf,EAAG,IAAI,CAACI,YAAY,yFAAyFJ,EAAG,IAAI,CAACI,YAAY,4FAA4FJ,EAAG,OAAO,CAACI,YAAY,2DAA2DJ,EAAG,OAAO,CAACI,YAAY,2EAA2E,CAACN,EAAIkB,GAAGlB,EAAImB,GAAGnB,EAAIoB,iBAAkBpB,EAAIS,UAAWP,EAAG,IAAI,CAACI,YAAY,0HAA2HN,EAAIqB,YAAcrB,EAAIiB,WAAYf,EAAG,IAAI,CAACI,YAAY,4EAA6EN,EAAIqB,aAAerB,EAAIiB,WAAYf,EAAG,IAAI,CAACI,YAAY,uEAAuEN,EAAIsB,OAAOpB,EAAG,OAAO,CAACI,YAAY,iBAAiBF,MAAMJ,EAAIQ,kBAAoBR,EAAIS,UAAY,iBAAmB,GAAGc,MAAM,CAAC,MAAQvB,EAAIwB,MAAMC,OAAOC,SAAS,CAAC,UAAY1B,EAAImB,GAAGnB,EAAI2B,gBAAgB3B,EAAIwB,MAAMC,MAAOzB,EAAI4B,kBAAkBlB,GAAG,CAAC,MAAQV,EAAIW,gBAAgB,YAAc,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBb,EAAIc,iBAAiBC,MAAM,KAAMC,UAAU,KAAMhB,EAAIqB,WAAYnB,EAAG,WAAW,CAACI,YAAY,4IAA4IuB,SAAS,CAAC,MAAQ,SAASjB,GAAiC,OAAzBA,EAAOkB,kBAAyB9B,EAAI+B,SAAShB,MAAM,KAAMC,UAAU,KAAKhB,EAAIsB,MAAM,GAAGpB,EAAG,aAAa,CAACqB,MAAM,CAAC,KAAO,SAAS,CAACrB,EAAG,MAAM,CAAC8B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOnC,EAAIoC,YAAaC,WAAW,gBAAgB/B,YAAY,mLAAmLI,GAAG,CAAC,UAAYV,EAAIsC,WAAW,WAAatC,EAAIuC,aAAa,CAACrC,EAAG,MAAM,CAACI,YAAY,oJAAqJN,EAAIqB,WAAYnB,EAAG,WAAW,CAACI,YAAY,gHAAgHuB,SAAS,CAAC,MAAQ,SAASjB,GAAiC,OAAzBA,EAAOkB,kBAAyB9B,EAAI+B,SAAShB,MAAM,KAAMC,UAAU,KAAKhB,EAAIsB,KAAMtB,EAAIqB,WAAYnB,EAAG,YAAY,CAACI,YAAY,kHAAkHuB,SAAS,CAAC,MAAQ,SAASjB,GAAiC,OAAzBA,EAAOkB,kBAAyB9B,EAAIwC,yBAAyBzB,MAAM,KAAMC,UAAU,KAAKhB,EAAIsB,KAAKpB,EAAG,aAAa,CAACI,YAAY,gHAAgHuB,SAAS,CAAC,MAAQ,SAASjB,GAAiC,OAAzBA,EAAOkB,kBAAyB9B,EAAIyC,qBAAqB1B,MAAM,KAAMC,UAAU,MAAM,MAAM,GAAIhB,EAAIqB,WAAYnB,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC8B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOnC,EAAIiB,YAAcjB,EAAI0C,UAAWL,WAAW,4BAA4B/B,YAAY,8CAA8CN,EAAI2C,GAAI,CAAC,EAAG,IAAI,SAASC,GAAM,OAAO1C,EAAG,kBAAkB,CAAC2C,IAAID,EAAKtC,YAAY,+CAA+C,IAAG,GAAGJ,EAAG,MAAM,CAAC8B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOnC,EAAIiB,aAAejB,EAAI0C,UAAWL,WAAW,8BAA8B,CAACnC,EAAG,YAAY,CAACqB,MAAM,CAAC,UAAYvB,EAAI8C,QAAQ,cAAc,aAAa,GAAK9C,EAAIwB,MAAMuB,IAAI,MAAQ,QAAQrC,GAAG,CAAC,MAAQV,EAAIgD,YAAY,IAAMhD,EAAIiD,WAAWC,MAAM,CAACf,MAAOnC,EAAIwB,KAAK2B,gBAAiBC,SAAS,SAAUC,GAAMrD,EAAIsD,KAAKtD,EAAIwB,KAAM,kBAAmB6B,EAAI,EAAEhB,WAAW,yBAAyBrC,EAAI2C,GAAI3C,EAAIwB,MAAM2B,iBAAiB,SAASI,EAAMC,GAAO,OAAOtD,EAAG,MAAM,CAAC2C,IAAIU,GAAOR,KAAK,CAAC7C,EAAG,WAAW,CAACE,MAAM,CACtjI,IAAdJ,EAAIK,OAAemD,IAAUxD,EAAIwB,MAAM2B,iBAAiBM,OAAS,EAC7D,iBACA,iBACJlC,MAAM,CAAC,WAAWgC,EAAM,MAAQG,OAAO1D,EAAIK,MAAQ,GAAG,MAAQmD,EAAM,mBAAmBxD,EAAIoB,aAAa,mBAAmBpB,EAAI2D,gBAAgB,qBAAqB3D,EAAI4D,iBAAiB,mBAAmB5D,EAAI4B,mBAAmB,EAAE,IAAG,IAAI,KAAK5B,EAAIsB,MACnQ,EACIuC,EAAkB,G,mDCsItB,GACA5B,KAAA,WACA6B,WAAA,CACAC,UAAA,IACAC,SAAAA,IAAA,+BACAC,WAAAA,IAAA,gCACAC,UAAAA,IAAA,+BACAC,gBAAAA,IAAA,gCAEAC,MAAA,CACAC,QAAA,CACAC,KAAAC,OACAC,UAAA,GAEAnE,MAAA,CACAiE,KAAAZ,OACAe,QAAA,GAEAjB,MAAA,CACAc,KAAAZ,OACAc,UAAA,GAEAE,gBAAA,CACAJ,KAAAK,QAEAhB,gBAAA,CACAW,KAAAC,QAEAX,iBAAA,CACAU,KAAAC,OACAE,QAAAA,KAAA,CAAAG,QAAA,KAEAhD,eAAA,CACA0C,KAAAK,OACAF,QAAA,KAGAI,IAAAA,GACA,OACA5D,WAAA,KAAA2C,kBAAAgB,OACAlC,WAAA,EACAoC,YAAA,EACAhC,SAAA,EACAtB,KAAA,KAAA6C,QACAjC,aAAA,EACA2C,eAAA,KACAC,WAAA,KAEA,EACAC,OAAAA,GACA,KAAAC,cAAA,OAAAC,KAAAC,qBACA,QAAA5D,MAAAuB,MAAAoC,EAAA,CACA,KAAAE,KAAAC,MAAA,cAAAC,YAAA,IACA,IAAAC,EAAA,CACAL,KACAM,OAAA,CACAC,WAAAN,EAAA,eAGA,MAAAO,QAAA,KAAAC,qBAAAJ,GACAG,GAAAE,SACA,KAAAC,OAAAD,QAAAF,GAAAI,SACA,KAAAV,KAAAC,MAAA,iBACA,KAAAD,KAAAC,MAAA,8BAEA,KAAAD,KAAAC,MAAA,iBACA,KAAAQ,OAAAE,MAAAL,GAAAI,SAEA,GAEA,KAAAV,KAAAY,IAAA,8BAAAf,cACA,EACAgB,SAAA,CACA9E,YAAAA,GACA,YAAAsD,gBAGA,QAAAA,kBAAA,KAAAlB,MAAA,KAFA,KAAAA,MAAA,KAGA,EACA/C,SAAAA,GACA,uBAAAe,MAAA8C,IACA,EACAjD,UAAAA,GACA,wBAAAG,MAAA8C,IACA,EACA/D,iBAAAA,GACA,YAAAoD,iBAAAZ,MAAA,KAAAvB,MAAAuB,GACA,EACAvC,gBAAAA,GACA,YAAAa,YAAA,KAAAG,MAAA2B,iBAAAM,OAAA,CACA,GAEA0C,MAAA,CACA9B,QAAA,CACA+B,OAAAA,GACA,KAAA5E,KAAA,KAAA6C,OACA,EACAgC,MAAA,EACAC,WAAA,GAEA1C,iBAAA,CACAwC,OAAAA,CAAAG,GACA,KAAAtF,WAAAsF,GAAA3B,MACA,EACAyB,MAAA,EACAC,WAAA,GAEArF,WAAA,CACAmF,OAAAA,GAEA,KAAA5F,kBAAA,KAAAC,YACA,KAAAQ,YAAA,EAEA,EACAqF,WAAA,IAGAE,QAAA,KACAC,EAAAA,EAAAA,IAAA,YACA,yBACA,yBAEA3F,gBAAAA,GACA,KAAA4F,aACA,EACAA,WAAAA,GACA,KAAAtE,aAAA,EACA,KAAAG,YACA,EACAoE,WAAAA,GACA,KAAAvE,aAAA,CACA,EACAG,UAAAA,GACA,KAAAD,aACA,KAAAyC,eAAA6B,YAAA,KACA,KAAAD,cACA,KAAArE,YAAA,GACA,KACA,EACAA,UAAAA,GACA,KAAAyC,iBACA8B,aAAA,KAAA9B,gBACA,KAAAA,eAAA,KAEA,EACA,YAAA+B,GACA,KAAA7F,YAAA,KAAAA,UACA,EACAc,QAAAA,GACA,KAAAsD,KAAAC,MAAA,iCACAyB,WAAA,EACAC,OAAA,KAAAxF,KACAnB,MAAA,KAAAA,OAEA,EACAM,eAAAA,GACA,KAAAF,UACA,KAAA4E,KAAAC,MAAA,4BAAA9D,MACA,KAAAA,KAAA2B,iBAAAM,OAAA,GACA,KAAAqD,QAEA,EACA9D,WAAAA,GACA,KAAAgC,WAAAiC,gBAAA,KAAAzF,MACA,KAAA6D,KAAAC,MAAA,iCAAAhB,KAAA,UACA,KAAAQ,YAAA,CACA,EACA7B,SAAAA,CAAAiE,GACA,KAAApC,YAAA,EACAoC,GAAAC,MAAAhC,KAAA+B,GAAAE,IAAAjC,IAAA+B,EAAAG,WAAAH,EAAAI,UACA,KAAAC,kBAAAL,GAAAC,MAAAhC,GAAA+B,GAAAE,IAAAjC,GAAA+B,GAAAG,SAAAH,GAAAI,SACA,EACA,uBAAAC,CAAAJ,EAAAC,EAAAC,EAAAC,GACA,KAAAxE,SAAA,EACA,KAAAuC,KAAAC,MAAA,cAAAC,YAAA,IACA,MAAAI,QAAA,KAAA6B,uBAAA,CACAC,KAAA,CACAN,OACAC,KACAC,WACAC,WACAI,OAAA,KAAA1C,YAAA7B,kBAAAkE,IAAAtE,OAGA4C,GAAAE,SACA,KAAAC,OAAAD,QAAAF,GAAAI,SACA,KAAAV,KAAAC,MAAA,iBACA,KAAAD,KAAAC,MAAA,8BAEA,KAAAD,KAAAC,MAAA,iBACA,KAAAQ,OAAAE,MAAAL,GAAAI,SACA,KAAAV,KAAAC,MAAA,iCAAAhB,KAAA,aAEA,KAAAU,WAAA,KACA,KAAAlC,SAAA,CACA,EACAL,oBAAAA,GACA,KAAApB,WACA,KAAAgE,KAAAC,MAAA,6BACAyB,WAAA,EACAY,oBAAA,KAAAnH,iBACA,wDACA,GACAoH,iBAAA,uBAAApG,MAAAC,0GACAoG,aAAA,yBACA1C,GAAA,KAAA3D,MAAAuB,MAGA,KAAAsC,KAAAC,MAAA,6BACAyB,WAAA,EACAa,iBAAA,sBAAApG,MAAAC,kGACAoG,aAAA,yBACA1C,GAAA,KAAA3D,MAAAuB,KAGA,EACAP,wBAAAA,GACA,KAAAnB,YACA,KAAAgE,KAAAC,MAAA,iCACAyB,WAAA,EACAe,QAAA,EACAxD,KAAA,WACAyD,SAAA,CACAtG,MAAA,KAAAD,MAAAC,OAEA0D,GAAA,KAAA3D,MAAAuB,KAGA,GAEAiF,aAAAA,GACA,KAAA1F,aACA,KAAA+C,KAAA4C,KAAA,8BAAA/C,cACA,GCzXgQ,I,WCO5PgD,GAAY,OACd,EACAnI,EACA8D,GACA,EACA,KACA,KACA,MAIF,EAAeqE,EAAiB,O","sources":["webpack://construction-commercial-search-frontend/./src/components/Category/TreeView.vue","webpack://construction-commercial-search-frontend/src/components/Category/TreeView.vue","webpack://construction-commercial-search-frontend/./src/components/Category/TreeView.vue?c95b","webpack://construction-commercial-search-frontend/./src/components/Category/TreeView.vue?59f4"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:_vm.level > 0 ? 'pl-spacing-300' : ''},[_c('div',{staticClass:\"relative\"},[_c('div',{staticClass:\"truncate py-spacing-50 text-[0.9375rem] text-body/m/relaxed/400\",class:[\n        _vm.isProductSelected\n          ? 'text-constant-brand-primary'\n          : 'text-content-on-neutral-primary',\n      ]},[_c('span',{class:_vm.categoryHasChild || _vm.isProduct ? 'cursor-pointer' : '',on:{\"click\":_vm.handleNodeClick,\"contextmenu\":function($event){$event.preventDefault();return _vm.handleRightClick.apply(null, arguments)}}},[(_vm.categoryHasChild)?_c('span',{staticClass:\"mr-spacing-50 inline-block cursor-pointer\"},[(_vm.isExpanded)?_c('i',{staticClass:\"fa-solid fa-caret-down h-spacing-200 w-spacing-200 text-content-on-neutral-secondary\"}):_c('i',{staticClass:\"fa-solid fa-caret-right h-spacing-200 w-spacing-200 text-content-on-neutral-secondary\"})]):_c('span',{staticClass:\"mr-spacing-50 inline-block h-spacing-200 w-spacing-200\"}),_c('span',{staticClass:\"mr-spacing-100 text-body/s/relaxed/500 text-content-on-neutral-tertiary\"},[_vm._v(_vm._s(_vm.getNumbering))]),(_vm.isProduct)?_c('i',{staticClass:\"fa-brands fa-pinterest scale-[1.2] rounded-full bg-constant-neutral-white text-[0.9375rem] text-constant-status-error\"}):(_vm.isCategory && _vm.isExpanded)?_c('i',{staticClass:\"fa fa-folder-open text-[0.9375rem] text-yellow-500 dark:text-yellow-200\"}):(_vm.isCategory && !_vm.isExpanded)?_c('i',{staticClass:\"fa fa-folder text-[0.9375rem] text-yellow-500 dark:text-yellow-200\"}):_vm._e()]),_c('span',{staticClass:\"pl-spacing-100\",class:_vm.categoryHasChild || _vm.isProduct ? 'cursor-pointer' : '',attrs:{\"title\":_vm.node?.title},domProps:{\"innerHTML\":_vm._s(_vm.$highlightMatch(_vm.node?.title, _vm.searchItemName))},on:{\"click\":_vm.handleNodeClick,\"contextmenu\":function($event){$event.preventDefault();return _vm.handleRightClick.apply(null, arguments)}}}),(_vm.isCategory)?_c('IconPlus',{staticClass:\"ml-spacing-100 inline-block h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-primary hover:text-constant-status-success\",nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.addChild.apply(null, arguments)}}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showActions),expression:\"showActions\"}],staticClass:\"absolute bottom-spacing-400 left-spacing-500 flex min-w-spacing-1400 items-center justify-center gap-spacing-200 rounded-full bg-bg-neutral-raised px-spacing-200 py-spacing-150\",on:{\"mouseover\":_vm.resetTimer,\"mouseleave\":_vm.startTimer}},[_c('div',{staticClass:\"absolute -bottom-spacing-100 left-spacing-600 h-0 w-0 rotate-180 border-b-8 border-l-8 border-r-8 border-transparent border-b-bg-neutral-raised\"}),(_vm.isCategory)?_c('IconPlus',{staticClass:\"h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-primary hover:text-constant-status-success\",nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.addChild.apply(null, arguments)}}}):_vm._e(),(_vm.isCategory)?_c('IconEdit3',{staticClass:\"h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-secondary hover:text-constant-status-warning\",nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.handleEditCommercialItem.apply(null, arguments)}}}):_vm._e(),_c('IconTrash2',{staticClass:\"h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-secondary hover:text-constant-status-error\",nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.removeCommercialItem.apply(null, arguments)}}})],1)])],1),(_vm.isCategory)?_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isExpanded && _vm.isLoading),expression:\"isExpanded && isLoading\"}],staticClass:\"my-spacing-50 flex flex-col gap-spacing-50\"},_vm._l(([1, 2]),function(item){return _c('GeneralSkeleton',{key:item,staticClass:\"ml-spacing-300 h-spacing-250 w-spacing-1600\"})}),1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isExpanded && !_vm.isLoading),expression:\"isExpanded && !isLoading\"}]},[_c('draggable',{attrs:{\"disabled\":!_vm.canDrag,\"ghost-class\":\"opacity-40\",\"id\":_vm.node?._id,\"group\":\"tree\"},on:{\"start\":_vm.onDragStart,\"end\":_vm.onDragEnd},model:{value:(_vm.node.commercialItems),callback:function ($$v) {_vm.$set(_vm.node, \"commercialItems\", $$v)},expression:\"node.commercialItems\"}},_vm._l((_vm.node?.commercialItems),function(child,index){return _c('div',{key:child?._id},[_c('TreeView',{class:[\n              _vm.level === 1 && index === _vm.node?.commercialItems?.length - 1\n                ? 'mb-spacing-100'\n                : 'mb-spacing-50',\n            ],attrs:{\"node-obj\":child,\"level\":Number(_vm.level + 1),\"index\":index,\"parent-numbering\":_vm.getNumbering,\"selected-product\":_vm.selectedProduct,\"expanded-tree-view\":_vm.expandedTreeView,\"search-item-name\":_vm.searchItemName}})],1)}),0)],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :class=\"level > 0 ? 'pl-spacing-300' : ''\">\r\n    <div class=\"relative\">\r\n      <div\r\n        :class=\"[\r\n          isProductSelected\r\n            ? 'text-constant-brand-primary'\r\n            : 'text-content-on-neutral-primary',\r\n        ]\"\r\n        class=\"truncate py-spacing-50 text-[0.9375rem] text-body/m/relaxed/400\"\r\n      >\r\n        <span\r\n          @click=\"handleNodeClick\"\r\n          @click.right.prevent=\"handleRightClick\"\r\n          :class=\"categoryHasChild || isProduct ? 'cursor-pointer' : ''\"\r\n        >\r\n          <span\r\n            v-if=\"categoryHasChild\"\r\n            class=\"mr-spacing-50 inline-block cursor-pointer\"\r\n          >\r\n            <i\r\n              v-if=\"isExpanded\"\r\n              class=\"fa-solid fa-caret-down h-spacing-200 w-spacing-200 text-content-on-neutral-secondary\"\r\n            />\r\n            <i\r\n              v-else\r\n              class=\"fa-solid fa-caret-right h-spacing-200 w-spacing-200 text-content-on-neutral-secondary\"\r\n            />\r\n          </span>\r\n          <span\r\n            v-else\r\n            class=\"mr-spacing-50 inline-block h-spacing-200 w-spacing-200\"\r\n          />\r\n          <span\r\n            class=\"mr-spacing-100 text-body/s/relaxed/500 text-content-on-neutral-tertiary\"\r\n            >{{ getNumbering }}</span\r\n          >\r\n          <i\r\n            v-if=\"isProduct\"\r\n            class=\"fa-brands fa-pinterest scale-[1.2] rounded-full bg-constant-neutral-white text-[0.9375rem] text-constant-status-error\"\r\n          />\r\n          <i\r\n            v-else-if=\"isCategory && isExpanded\"\r\n            class=\"fa fa-folder-open text-[0.9375rem] text-yellow-500 dark:text-yellow-200\"\r\n          />\r\n          <i\r\n            v-else-if=\"isCategory && !isExpanded\"\r\n            class=\"fa fa-folder text-[0.9375rem] text-yellow-500 dark:text-yellow-200\"\r\n          />\r\n        </span>\r\n        <span\r\n          class=\"pl-spacing-100\"\r\n          :class=\"categoryHasChild || isProduct ? 'cursor-pointer' : ''\"\r\n          :title=\"node?.title\"\r\n          @click=\"handleNodeClick\"\r\n          @click.right.prevent=\"handleRightClick\"\r\n          v-html=\"$highlightMatch(node?.title, searchItemName)\"\r\n        />\r\n        <IconPlus\r\n          v-if=\"isCategory\"\r\n          @click.native.stop=\"addChild\"\r\n          class=\"ml-spacing-100 inline-block h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-primary hover:text-constant-status-success\"\r\n        />\r\n      </div>\r\n      <transition name=\"fade\">\r\n        <div\r\n          class=\"absolute bottom-spacing-400 left-spacing-500 flex min-w-spacing-1400 items-center justify-center gap-spacing-200 rounded-full bg-bg-neutral-raised px-spacing-200 py-spacing-150\"\r\n          v-show=\"showActions\"\r\n          @mouseover=\"resetTimer\"\r\n          @mouseleave=\"startTimer\"\r\n        >\r\n          <div\r\n            class=\"absolute -bottom-spacing-100 left-spacing-600 h-0 w-0 rotate-180 border-b-8 border-l-8 border-r-8 border-transparent border-b-bg-neutral-raised\"\r\n          />\r\n\r\n          <IconPlus\r\n            v-if=\"isCategory\"\r\n            @click.native.stop=\"addChild\"\r\n            class=\"h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-primary hover:text-constant-status-success\"\r\n          />\r\n          <IconEdit3\r\n            v-if=\"isCategory\"\r\n            @click.native.stop=\"handleEditCommercialItem\"\r\n            class=\"h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-secondary hover:text-constant-status-warning\"\r\n          />\r\n          <IconTrash2\r\n            @click.native.stop=\"removeCommercialItem\"\r\n            class=\"h-spacing-200 w-spacing-200 cursor-pointer text-content-on-neutral-secondary hover:text-constant-status-error\"\r\n          />\r\n        </div>\r\n      </transition>\r\n    </div>\r\n\r\n    <!-- Render child nodes recursively with draggable -->\r\n    <div v-if=\"isCategory\">\r\n      <div\r\n        v-show=\"isExpanded && isLoading\"\r\n        class=\"my-spacing-50 flex flex-col gap-spacing-50\"\r\n      >\r\n        <GeneralSkeleton\r\n          v-for=\"item in [1, 2]\"\r\n          :key=\"item\"\r\n          class=\"ml-spacing-300 h-spacing-250 w-spacing-1600\"\r\n        />\r\n      </div>\r\n      <div v-show=\"isExpanded && !isLoading\">\r\n        <draggable\r\n          v-model=\"node.commercialItems\"\r\n          @start=\"onDragStart\"\r\n          @end=\"onDragEnd\"\r\n          :disabled=\"!canDrag\"\r\n          ghost-class=\"opacity-40\"\r\n          :id=\"node?._id\"\r\n          group=\"tree\"\r\n        >\r\n          <div\r\n            v-for=\"(child, index) in node?.commercialItems\"\r\n            :key=\"child?._id\"\r\n          >\r\n            <TreeView\r\n              :node-obj=\"child\"\r\n              :level=\"Number(level + 1)\"\r\n              :index=\"index\"\r\n              :parent-numbering=\"getNumbering\"\r\n              :selected-product=\"selectedProduct\"\r\n              :expanded-tree-view=\"expandedTreeView\"\r\n              :class=\"[\r\n                level === 1 && index === node?.commercialItems?.length - 1\r\n                  ? 'mb-spacing-100'\r\n                  : 'mb-spacing-50',\r\n              ]\"\r\n              :search-item-name=\"searchItemName\"\r\n            />\r\n          </div>\r\n        </draggable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport draggable from \"vuedraggable\";\r\n\r\nexport default {\r\n  name: \"TreeView\",\r\n  components: {\r\n    draggable,\r\n    IconPlus: () => import(\"@/components/svgIcons/plus.vue\"),\r\n    IconTrash2: () => import(\"@/components/svgIcons/trash-2.vue\"),\r\n    IconEdit3: () => import(\"@/components/svgIcons/edit-3.vue\"),\r\n    GeneralSkeleton: () => import(\"@/components/General/Skeleton.vue\"),\r\n  },\r\n  props: {\r\n    nodeObj: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    level: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    index: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    parentNumbering: {\r\n      type: String,\r\n    },\r\n    selectedProduct: {\r\n      type: Object,\r\n    },\r\n    expandedTreeView: {\r\n      type: Object,\r\n      default: () => ({ expand: false }),\r\n    },\r\n    searchItemName: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isExpanded: this.expandedTreeView?.expand,\r\n      isLoading: false,\r\n      isDragging: false,\r\n      canDrag: true,\r\n      node: this.nodeObj,\r\n      showActions: false,\r\n      tooltipTimeout: null,\r\n      clonedData: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.deleteHandler = async ({ id, optionSelected }) => {\r\n      if (this.node?._id === id) {\r\n        this.$bus.$emit(\"showLoader\", { showLoader: true });\r\n        let payload = {\r\n          id,\r\n          params: {\r\n            deleteType: optionSelected ? \"this\" : \"all\",\r\n          },\r\n        };\r\n        const res = await this.deleteCommercialItem(payload);\r\n        if (res?.success) {\r\n          this.$toast.success(res?.message);\r\n          this.$bus.$emit(\"showLoader\", false);\r\n          this.$bus.$emit(\"refetch-commercial-items\");\r\n        } else {\r\n          this.$bus.$emit(\"showLoader\", false);\r\n          this.$toast.error(res?.message);\r\n        }\r\n      }\r\n    };\r\n    this.$bus.$on(\"delete-commercial-item\", this.deleteHandler);\r\n  },\r\n  computed: {\r\n    getNumbering() {\r\n      if (!this.parentNumbering) {\r\n        return this.index + 1 + \".\";\r\n      }\r\n      return `${this.parentNumbering}${this.index + 1}.`;\r\n    },\r\n    isProduct() {\r\n      return this.node?.type === \"product\";\r\n    },\r\n    isCategory() {\r\n      return this.node?.type === \"category\";\r\n    },\r\n    isProductSelected() {\r\n      return this.selectedProduct?._id === this.node?._id;\r\n    },\r\n    categoryHasChild() {\r\n      return this.isCategory && this.node?.commercialItems?.length > 0;\r\n    },\r\n  },\r\n  watch: {\r\n    nodeObj: {\r\n      handler() {\r\n        this.node = this.nodeObj;\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n    expandedTreeView: {\r\n      handler(newValue) {\r\n        this.isExpanded = newValue?.expand;\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n    isExpanded: {\r\n      handler() {\r\n        // prevent collapsing of empty folders to drop items inside them\r\n        if (!this.categoryHasChild && !this.isProduct) {\r\n          this.isExpanded = true;\r\n        }\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"category\", [\r\n      \"reorderCommercialItems\",\r\n      \"deleteCommercialItem\",\r\n    ]),\r\n    handleRightClick() {\r\n      this.showToolTip();\r\n    },\r\n    showToolTip() {\r\n      this.showActions = true;\r\n      this.startTimer();\r\n    },\r\n    hideToolTip() {\r\n      this.showActions = false;\r\n    },\r\n    startTimer() {\r\n      this.resetTimer();\r\n      this.tooltipTimeout = setTimeout(() => {\r\n        this.hideToolTip();\r\n        this.resetTimer();\r\n      }, 1500);\r\n    },\r\n    resetTimer() {\r\n      if (this.tooltipTimeout) {\r\n        clearTimeout(this.tooltipTimeout);\r\n        this.tooltipTimeout = null;\r\n      }\r\n    },\r\n    async toggle() {\r\n      this.isExpanded = !this.isExpanded;\r\n    },\r\n    addChild() {\r\n      this.$bus.$emit(\"add-new-commercial-item-modal\", {\r\n        showModal: true,\r\n        parent: this.node,\r\n        level: this.level,\r\n      });\r\n    },\r\n    handleNodeClick() {\r\n      if (this.isProduct) {\r\n        this.$bus.$emit(\"set-selected-product\", this.node);\r\n      } else if (this.node.commercialItems?.length > 0) {\r\n        this.toggle();\r\n      }\r\n    },\r\n    onDragStart() {\r\n      this.clonedData = structuredClone(this.node);\r\n      this.$bus.$emit(\"handle-commercial-items-state\", { type: \"CLONE\" });\r\n      this.isDragging = true;\r\n    },\r\n    onDragEnd(e) {\r\n      this.isDragging = false;\r\n      if (e?.from?.id === e?.to?.id && e.oldIndex === e.newIndex) return;\r\n      this.reorderChildNodes(e?.from?.id, e?.to?.id, e?.oldIndex, e?.newIndex);\r\n    },\r\n    async reorderChildNodes(from, to, oldIndex, newIndex) {\r\n      this.canDrag = false;\r\n      this.$bus.$emit(\"showLoader\", { showLoader: true });\r\n      const res = await this.reorderCommercialItems({\r\n        body: {\r\n          from,\r\n          to,\r\n          oldIndex,\r\n          newIndex,\r\n          itemId: this.clonedData?.commercialItems?.[oldIndex]?._id,\r\n        },\r\n      });\r\n      if (res?.success) {\r\n        this.$toast.success(res?.message);\r\n        this.$bus.$emit(\"showLoader\", false);\r\n        this.$bus.$emit(\"refetch-commercial-items\");\r\n      } else {\r\n        this.$bus.$emit(\"showLoader\", false);\r\n        this.$toast.error(res?.message);\r\n        this.$bus.$emit(\"handle-commercial-items-state\", { type: \"RESTORE\" });\r\n      }\r\n      this.clonedData = null;\r\n      this.canDrag = true;\r\n    },\r\n    removeCommercialItem() {\r\n      if (this.isCategory) {\r\n        this.$bus.$emit(\"remove-confirmation-modal\", {\r\n          showModal: true,\r\n          checkboxDescription: this.categoryHasChild\r\n            ? \"Move contents to the parent category before deletion?\"\r\n            : \"\",\r\n          confirmationText: `This category (${this.node?.title}) and all of its associated data, product prices and market-researches will be deleted pemanently.`,\r\n          confirmEvent: \"delete-commercial-item\",\r\n          id: this.node?._id,\r\n        });\r\n      } else {\r\n        this.$bus.$emit(\"remove-confirmation-modal\", {\r\n          showModal: true,\r\n          confirmationText: `This product (${this.node?.title}) and all of its associated data, prices and market-researches will be deleted pemanently.`,\r\n          confirmEvent: \"delete-commercial-item\",\r\n          id: this.node?._id,\r\n        });\r\n      }\r\n    },\r\n    handleEditCommercialItem() {\r\n      if (this.isCategory) {\r\n        this.$bus.$emit(\"add-new-commercial-item-modal\", {\r\n          showModal: true,\r\n          update: true,\r\n          type: \"CATEGORY\",\r\n          formData: {\r\n            title: this.node?.title,\r\n          },\r\n          id: this.node?._id,\r\n        });\r\n      }\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.resetTimer();\r\n    this.$bus.$off(\"delete-commercial-item\", this.deleteHandler);\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TreeView.vue?vue&type=template&id=1c564840\"\nimport script from \"./TreeView.vue?vue&type=script&lang=js\"\nexport * from \"./TreeView.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","class","level","staticClass","isProductSelected","categoryHasChild","isProduct","on","handleNodeClick","$event","preventDefault","handleRightClick","apply","arguments","isExpanded","_v","_s","getNumbering","isCategory","_e","attrs","node","title","domProps","$highlightMatch","searchItemName","nativeOn","stopPropagation","addChild","directives","name","rawName","value","showActions","expression","resetTimer","startTimer","handleEditCommercialItem","removeCommercialItem","isLoading","_l","item","key","canDrag","_id","onDragStart","onDragEnd","model","commercialItems","callback","$$v","$set","child","index","length","Number","selectedProduct","expandedTreeView","staticRenderFns","components","draggable","IconPlus","IconTrash2","IconEdit3","GeneralSkeleton","props","nodeObj","type","Object","required","default","parentNumbering","String","expand","data","isDragging","tooltipTimeout","clonedData","mounted","deleteHandler","id","optionSelected","$bus","$emit","showLoader","payload","params","deleteType","res","deleteCommercialItem","success","$toast","message","error","$on","computed","watch","handler","deep","immediate","newValue","methods","mapActions","showToolTip","hideToolTip","setTimeout","clearTimeout","toggle","showModal","parent","structuredClone","e","from","to","oldIndex","newIndex","reorderChildNodes","reorderCommercialItems","body","itemId","checkboxDescription","confirmationText","confirmEvent","update","formData","beforeDestroy","$off","component"],"sourceRoot":""}