"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[1212],{37767:function(e,t,s){s.d(t,{A:function(){return o}});var i={props:{active:{required:!0,type:Boolean},eventName:{required:!0,type:String},preventClose:{required:!1,type:Boolean},customStyle:{required:!1,type:[String,Array],default:""},customBackground:{required:!1,type:String,default:""},fullScreen:{required:!1,type:String,default:""},customVerticalPadding:{required:!1,type:String,default:""},customHorizontalPadding:{required:!1,type:String,default:""},customPadding:{required:!1,type:String,default:""},customWidth:{required:!1,type:String,default:""},customHeight:{required:!1,type:String,default:""},customBorderRadius:{required:!1,type:String,default:""},customOverlay:{required:!1,type:String,default:"bg-bg-overlay"}},computed:{customClass(){return[this.widthClass,this.paddingClass,this.heightClass,this.roundedClass,this.backgroundClass]},widthClass(){let e="w-full nexus:w-[448px]";return this.customWidth&&(e=this.customWidth),e},heightClass(){let e="min-h-[268px]";return this.customHeight&&(e=`min-h-[268px] ${this.customHeight}`),"mobile"===this.fullScreen?e=this.customHeight?`min-h-[268px] h-[100dvh] ${this.customHeight}`:"min-h-[268px] h-[100dvh] nexus:h-auto":"nexus"===this.fullScreen?e=this.customHeight?`min-h-[268px] h-[100dvh] ${this.customHeight}`:"min-h-[268px] h-[100dvh] ipad:h-auto":"ipad"===this.fullScreen&&(e="min-h-[268px] h-[100dvh]"),e},paddingClass(){let e="py-spacing-200 nexus:py-spacing-250 ipad:py-spacing-300 px-spacing-200 nexus:px-spacing-250 ipad:px-spacing-300";return this.customPadding?e=this.customPadding:(this.customVerticalPadding||this.customHorizontalPadding)&&(e=`${this.customVerticalPadding} ${this.customHorizontalPadding}`),e},backgroundClass(){let e="bg-bg-neutral-default";return this.customBackground&&(e=this.customBackground),e},roundedClass(){let e="rounded-t-08 nexus:rounded-b-08";return"ipad"===this.fullScreen?e="":"nexus"===this.fullScreen?e="ipad:rounded-t-08 ipad:rounded-b-08":"mobile"===this.fullScreen?e="nexus:rounded-t-08 nexus:rounded-b-08":this.customBorderRadius&&(e=this.customBorderRadius),e}},watch:{active(e){e?(document.addEventListener("keyup",this.handleKeyUp),document.body.style.cssText="overflow:hidden"):(document.removeEventListener("keyup",this.handleKeyUp),document.body.style.cssText="")}},methods:{handleKeyUp(e){const t="Escape"===e?.key,s=document.getElementById(this.eventName);t&&this.active&&(this.closeModal(),document.removeEventListener("keyup",this.handleKeyUp)),this.active&&s||document.removeEventListener("keyup",this.handleKeyUp)},closeModal(){this.preventClose||(document.removeEventListener("keyup",this.handleKeyUp),this.$bus.$emit(this.eventName,!1))}},beforeDestroy(){document.body.style.cssText=""}},a=i,n=(0,s(81656).A)(a,(function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"fade"}},[e.active?t("div",{staticClass:"fixed inset-0 z-[9999] flex h-screen w-full items-center justify-center overflow-y-auto",class:e.customOverlay,attrs:{id:e.eventName},on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal()}}},[t("div",{staticClass:"fixed bottom-0 overflow-y-auto shadow-lg nexus:relative",class:e.customClass},[e._t("default")],2)]):e._e()])}),[],!1,null,null,null),o=n.exports},11212:function(e,t,s){s.r(t),s.d(t,{default:function(){return r}});var i=s(37767),a=s(93518),n={components:{Modal:i.A,SelectableTreeView:()=>s.e(8116).then(s.bind(s,28116)),GeneralForm:()=>s.e(6277).then(s.bind(s,76277)),Search:()=>s.e(8130).then(s.bind(s,8130)),GeneralButton:()=>s.e(695).then(s.bind(s,90695))},data:()=>({showModal:!1,data:[],selectedProducts:[],expandedTreeView:{expand:!0},searchItemName:"",isLoading:!1,modalHandler:null,id:null}),mounted(){this.modalHandler=e=>{e?.showModal?(this.showModal=e?.showModal,this.getCategoryList(),this.selectedProducts=e?.products||[],this.id=e?.id):(this.showModal=!1,this.selectedProducts=[],this.id=null)},this.$bus.$on("product-select-modal",this.modalHandler)},methods:{...(0,a.i0)("category",["getCommercialItems"]),async expandTreeView(){this.expandedTreeView={expand:!0}},async collapseTreeView(){this.expandedTreeView={expand:!1}},async getCategoryList(){this.isLoading=!0,this.$bus.$emit("showLoader",{showLoader:!0});const e=await this.getCommercialItems({params:{mode:"FULL"}});e?.success?this.data=e?.data:this.$toast.error("Unable to load data"),this.$bus.$emit("showLoader",!1),this.isLoading=!1},searchByItemName(e){this.searchItemName=e,this.expandedTreeView={expand:!0}},handleClose(){this.$bus.$emit("product-select-modal",!1)},handleSelectProduct(e){const t=this.selectedProducts?.some((t=>t?._id===e?._id));this.selectedProducts=t?this.selectedProducts?.filter((t=>t?._id!==e?._id)):[...this.selectedProducts,e]},handleSubmit(){this.$bus.$emit("selected-products-from-product-select",{products:[...this.selectedProducts],id:this.id}),this.handleClose()}},beforeDestroy(){this.$bus.$off("product-select-modal",this.modalHandler),this.modalHandler=null}},o=n,d=(0,s(81656).A)(o,(function(){var e=this,t=e._self._c;return t("Modal",{attrs:{active:e.showModal,"event-name":"product-select-modal","custom-width":"w-full ipad:w-[768px] ipadPro:w-[1000px]","full-screen":"nexus","custom-padding":"p-spacing-0","prevent-close":!0}},[t("GeneralForm",{staticClass:"flex-1",attrs:{heading:"PRODUCTS","sub-heading":"Click on the products to add","show-submit-button":!0,"submit-button-label":"Confirm"},on:{"close-pressed":e.handleClose,"form-submitted":e.handleSubmit},scopedSlots:e._u([{key:"form-body",fn:function(){return[t("div",{staticClass:"flex h-full min-h-[500px] w-full flex-col"},[t("div",{staticClass:"flex flex-col-reverse items-center gap-spacing-100 ipad:flex-row ipad:gap-spacing-200"},[t("Search",{staticClass:"mb-spacing-200 ipadPro:max-w-[400px]",attrs:{placeholder:"Search...",label:"Name","search-id":"commercial-item-name-search"},on:{search:e.searchByItemName}}),t("div",{staticClass:"mb-spacing-200 flex items-center gap-spacing-150"},[t("GeneralButton",{attrs:{"button-type":"button",type:"success",size:"small",emphasis:"secondary",label:"Refresh","icon-slot":!0,"icon-position":"leading"},nativeOn:{click:function(t){return e.getCategoryList()}},scopedSlots:e._u([{key:"leading-icon",fn:function(){return[t("i",{staticClass:"fa-solid fa-refresh relative bottom-spacing-50",class:e.isLoading?"animate-spin":""})]},proxy:!0}])}),t("GeneralButton",{attrs:{"button-type":"button",type:"brand",size:"small",emphasis:"secondary",label:"Expand","icon-slot":!0,"icon-position":"leading"},nativeOn:{click:function(t){return e.expandTreeView()}},scopedSlots:e._u([{key:"leading-icon",fn:function(){return[t("i",{staticClass:"fa-solid fa-expand relative bottom-spacing-50"})]},proxy:!0}])}),t("GeneralButton",{attrs:{"button-type":"button",type:"brand-secondary",size:"small",emphasis:"secondary",label:"Collapse","icon-slot":!0,"icon-position":"leading"},nativeOn:{click:function(t){return e.collapseTreeView()}},scopedSlots:e._u([{key:"leading-icon",fn:function(){return[t("i",{staticClass:"fa-solid fa-compress relative bottom-spacing-50"})]},proxy:!0}])})],1)],1),e._l(e.data,(function(s,i){return t("div",{key:s?._id},[t("SelectableTreeView",{staticClass:"mb-spacing-150",attrs:{"node-obj":s,level:Number(0),index:i,"expanded-tree-view":e.expandedTreeView,"search-item-name":e.searchItemName,"selected-products":e.selectedProducts},on:{"select-product":e.handleSelectProduct}})],1)}))],2)]},proxy:!0}])})],1)}),[],!1,null,null,null),r=d.exports}}]);