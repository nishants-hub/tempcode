"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[5856],{85856:function(t,o,r){r.r(o),r.d(o,{default:function(){return a}});var e=r(93518),s={props:{companyName:{type:String,required:!0},companyId:{type:String,required:!0},products:{type:Array,required:!1}},components:{GeneralForm:()=>r.e(6277).then(r.bind(r,76277)),ProductSearchDropdown:()=>r.e(8118).then(r.bind(r,98118))},computed:{...(0,e.L8)({user:"auth/getUser"}),blackListed(){return this?.products?.map((t=>t?._id))||[]}},data:()=>({formData:{products:[]},isFormSubmitting:!1}),methods:{...(0,e.i0)({addProductToCompany:"company/addProductToCompany"}),async handleSubmit(){this.isFormSubmitting=!0;let t={id:this.companyId,body:this.formData?.products?.map((t=>({productId:t?._id})))};try{const o=await this.addProductToCompany(t);o?.success?(this.handleClose(),this.$bus.$emit("refetch-company-details")):console.error("error",o)}catch(t){console.error("error",t)}this.isFormSubmitting=!1},handleClose(){this.$bus.$emit("update-category-to-company-modal",{showModal:!1})},updateProducts(t){this.formData.products=t}}},d=s,n=(0,r(81656).A)(d,(function(){var t=this,o=t._self._c;return o("div",{staticClass:"flex h-full min-h-[500px] w-full flex-col"},[o("GeneralForm",{staticClass:"flex-1",attrs:{heading:`Add Products to ${t.companyName}`,showCloseButton:!0,"is-form-submitting":t.isFormSubmitting},on:{"close-pressed":t.handleClose,"form-submitted":t.handleSubmit},scopedSlots:t._u([{key:"form-body",fn:function(){return[o("ProductSearchDropdown",{attrs:{"dropdown-label":"Products","dropdown-id":"products",products:t.formData.products,"is-multi-select":!0,"black-listed":t.blackListed,"show-select-button":!1},on:{"on-products-update":t.updateProducts}})]},proxy:!0}])})],1)}),[],!1,null,null,null),a=n.exports}}]);