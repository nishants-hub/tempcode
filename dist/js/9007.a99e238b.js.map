{"version":3,"file":"js/9007.a99e238b.js","mappings":"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","sources":["webpack://construction-commercial-search-frontend/./src/components/Utility/CustomDropdowns/LocationSearch.vue","webpack://construction-commercial-search-frontend/src/components/Utility/CustomDropdowns/LocationSearch.vue","webpack://construction-commercial-search-frontend/./src/components/Utility/CustomDropdowns/LocationSearch.vue?a0f8","webpack://construction-commercial-search-frontend/./src/components/Utility/CustomDropdowns/LocationSearch.vue?c08f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isMultiSelect && _vm.locations.length > 0)?_c('div',{staticClass:\"mb-spacing-250 flex w-full flex-wrap gap-spacing-150\"},_vm._l((_vm.locations),function(location){return _c('GeneralRemovableItem',{key:location.lat + location.lon,attrs:{\"item-name\":location?.display_name},on:{\"on-item-removed\":function($event){return _vm.removeLocationFromSelection(location)}}})}),1):_vm._e(),_c('FormInput',{attrs:{\"label\":_vm.dropdownLabel,\"input-type\":'searchable-input',\"inputId\":_vm.dropdownId,\"prevent-v-model\":true,\"clear-button\":_vm.location ? true : false,\"suggestions\":_vm.locationSuggestions,\"is-suggestions-fetching\":_vm.isLocationSuggestionsFetching},on:{\"set-suggestion\":_vm.handleSelect,\"reset-suggestions\":_vm.handleReset,\"fetch-suggestions\":_vm.fetchDebouncedLocationSuggestions,\"enter-pressed\":function($event){return _vm.$emit('enter-pressed')},\"clear-button-press\":_vm.handleClearButtonPress},model:{value:(_vm.location),callback:function ($$v) {_vm.location=$$v},expression:\"location\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- Render selected locations for multi-select -->\r\n    <div\r\n      v-if=\"isMultiSelect && locations.length > 0\"\r\n      class=\"mb-spacing-250 flex w-full flex-wrap gap-spacing-150\"\r\n    >\r\n      <GeneralRemovableItem\r\n        v-for=\"location in locations\"\r\n        :key=\"location.lat + location.lon\"\r\n        :item-name=\"location?.display_name\"\r\n        @on-item-removed=\"removeLocationFromSelection(location)\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Form input for searching locations -->\r\n    <FormInput\r\n      v-model=\"location\"\r\n      :label=\"dropdownLabel\"\r\n      :input-type=\"'searchable-input'\"\r\n      :inputId=\"dropdownId\"\r\n      :prevent-v-model=\"true\"\r\n      :clear-button=\"location ? true : false\"\r\n      :suggestions=\"locationSuggestions\"\r\n      :is-suggestions-fetching=\"isLocationSuggestionsFetching\"\r\n      @set-suggestion=\"handleSelect\"\r\n      @reset-suggestions=\"handleReset\"\r\n      @fetch-suggestions=\"fetchDebouncedLocationSuggestions\"\r\n      @enter-pressed=\"$emit('enter-pressed')\"\r\n      @clear-button-press=\"handleClearButtonPress\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { debounce } from \"lodash\";\r\nimport axiosInstance from \"@/axiosInstance\";\r\n\r\nexport default {\r\n  components: {\r\n    FormInput: () => import(\"@/components/General/FormInput.vue\"),\r\n    GeneralRemovableItem: () =>\r\n      import(\"@/components/General/RemovableItem.vue\"),\r\n  },\r\n  props: {\r\n    dropdownLabel: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    dropdownId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    locations: {\r\n      type: Array,\r\n      required: false,\r\n      default: () => [],\r\n    },\r\n    selectedLocation: {\r\n      type: Object,\r\n      required: false,\r\n      default: null,\r\n    },\r\n    isMultiSelect: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      location: this.selectedLocation?.display_name,\r\n      locationSuggestions: [],\r\n      isLocationSuggestionsFetching: false,\r\n      fetchDebouncedLocationSuggestions: debounce(\r\n        this.fetchLocationSuggestions,\r\n        300,\r\n      ),\r\n    };\r\n  },\r\n  watch: {\r\n    selectedLocation() {\r\n      this.location = this.selectedLocation?.display_name;\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchLocationSuggestions(query) {\r\n      if (query.length < 2) {\r\n        this.locationSuggestions = [];\r\n        return;\r\n      }\r\n      this.isLocationSuggestionsFetching = true;\r\n      const url = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(\r\n        query,\r\n      )}&format=json`;\r\n\r\n      const response = await axiosInstance.get(url);\r\n\r\n      this.locationSuggestions = response.data?.map((item) => ({\r\n        display_name: item?.display_name,\r\n        lat: item?.lat,\r\n        lon: item?.lon,\r\n      }));\r\n      this.isLocationSuggestionsFetching = false;\r\n    },\r\n    handleSelect(location) {\r\n      if (this.isMultiSelect) {\r\n        this.addLocationToSelection(location);\r\n      } else {\r\n        this.setLocation(location);\r\n      }\r\n    },\r\n    addLocationToSelection(location) {\r\n      const locationExists = this.locations.some(\r\n        (item) => item.lat === location.lat && item.lon === location.lon,\r\n      );\r\n      if (!locationExists) {\r\n        let output = [...this.locations, location];\r\n        this.$emit(\"on-locations-update\", output);\r\n      }\r\n      this.location = \"\";\r\n    },\r\n    removeLocationFromSelection(location) {\r\n      let output = this.locations.filter(\r\n        (item) => item.lat !== location.lat || item.lon !== location.lon,\r\n      );\r\n      this.$emit(\"on-locations-update\", output);\r\n    },\r\n    handleReset(forceReset) {\r\n      if (!this.isMultiSelect || forceReset) {\r\n        this.locationSuggestions = [];\r\n      }\r\n    },\r\n    setLocation(location) {\r\n      this.location = location?.display_name;\r\n      this.$emit(\"on-location-update\", location);\r\n    },\r\n    handleClearButtonPress() {\r\n      this.$emit(\"on-location-update\", null);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LocationSearch.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LocationSearch.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LocationSearch.vue?vue&type=template&id=7d44aff5\"\nimport script from \"./LocationSearch.vue?vue&type=script&lang=js\"\nexport * from \"./LocationSearch.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","isMultiSelect","locations","length","staticClass","_l","location","key","lat","lon","attrs","display_name","on","$event","removeLocationFromSelection","_e","dropdownLabel","dropdownId","locationSuggestions","isLocationSuggestionsFetching","handleSelect","handleReset","fetchDebouncedLocationSuggestions","$emit","handleClearButtonPress","model","value","callback","$$v","expression","staticRenderFns","components","FormInput","GeneralRemovableItem","props","type","String","required","Array","default","selectedLocation","Object","Boolean","data","debounce","fetchLocationSuggestions","watch","methods","query","url","encodeURIComponent","response","axiosInstance","get","map","item","addLocationToSelection","setLocation","locationExists","some","output","filter","forceReset","component"],"sourceRoot":""}