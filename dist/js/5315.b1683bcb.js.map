{"version":3,"file":"js/5315.b1683bcb.js","mappings":"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","sources":["webpack://construction-commercial-search-frontend/./src/components/General/Modal.vue","webpack://construction-commercial-search-frontend/src/components/General/Modal.vue","webpack://construction-commercial-search-frontend/./src/components/General/Modal.vue?022d","webpack://construction-commercial-search-frontend/./src/components/General/Modal.vue?c152","webpack://construction-commercial-search-frontend/./src/components/Utility/FileViewer/FileViewerModal.vue","webpack://construction-commercial-search-frontend/src/components/Utility/FileViewer/FileViewerModal.vue","webpack://construction-commercial-search-frontend/./src/components/Utility/FileViewer/FileViewerModal.vue?d3a8","webpack://construction-commercial-search-frontend/./src/components/Utility/FileViewer/FileViewerModal.vue?8d7c","webpack://construction-commercial-search-frontend/./node_modules/viewerjs/dist/viewer.js","webpack://construction-commercial-search-frontend/./src/utilities/constants/constants.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.active)?_c('div',{staticClass:\"fixed inset-0 z-[9999] flex h-screen w-full items-center justify-center overflow-y-auto\",class:_vm.customOverlay,attrs:{\"id\":_vm.eventName},on:{\"click\":function($event){if($event.target !== $event.currentTarget)return null;return _vm.closeModal()}}},[_c('div',{staticClass:\"fixed bottom-0 overflow-y-auto shadow-lg nexus:relative\",class:_vm.customClass},[_vm._t(\"default\")],2)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"fade\">\r\n    <div\r\n      v-if=\"active\"\r\n      :id=\"eventName\"\r\n      class=\"fixed inset-0 z-[9999] flex h-screen w-full items-center justify-center overflow-y-auto\"\r\n      :class=\"customOverlay\"\r\n      @click.self=\"closeModal()\"\r\n    >\r\n      <div\r\n        class=\"fixed bottom-0 overflow-y-auto shadow-lg nexus:relative\"\r\n        :class=\"customClass\"\r\n      >\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    active: {\r\n      required: true,\r\n      type: Boolean,\r\n    },\r\n    eventName: {\r\n      required: true,\r\n      type: String,\r\n    },\r\n    preventClose: {\r\n      required: false,\r\n      type: Boolean,\r\n    },\r\n    customStyle: {\r\n      required: false,\r\n      type: [String, Array],\r\n      default: \"\",\r\n    },\r\n    customBackground: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    fullScreen: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customVerticalPadding: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customHorizontalPadding: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customPadding: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customWidth: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customHeight: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customBorderRadius: {\r\n      required: false,\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    customOverlay: {\r\n      required: false,\r\n      type: String,\r\n      default: \"bg-bg-overlay\",\r\n    },\r\n  },\r\n  computed: {\r\n    customClass() {\r\n      return [\r\n        this.widthClass,\r\n        this.paddingClass,\r\n        this.heightClass,\r\n        this.roundedClass,\r\n        this.backgroundClass,\r\n      ];\r\n    },\r\n    widthClass() {\r\n      let output = \"w-full nexus:w-[448px]\";\r\n      if (this.customWidth) {\r\n        output = this.customWidth;\r\n      }\r\n      return output;\r\n    },\r\n    heightClass() {\r\n      let output = \"min-h-[268px]\";\r\n      if (this.customHeight) {\r\n        output = `min-h-[268px] ${this.customHeight}`;\r\n      }\r\n      if (this.fullScreen === \"mobile\") {\r\n        output = this.customHeight\r\n          ? `min-h-[268px] h-[100dvh] ${this.customHeight}`\r\n          : `min-h-[268px] h-[100dvh] nexus:h-auto`;\r\n      } else if (this.fullScreen === \"nexus\") {\r\n        output = this.customHeight\r\n          ? `min-h-[268px] h-[100dvh] ${this.customHeight}`\r\n          : `min-h-[268px] h-[100dvh] ipad:h-auto`;\r\n      } else if (this.fullScreen === \"ipad\") {\r\n        output = `min-h-[268px] h-[100dvh]`;\r\n      }\r\n      return output;\r\n    },\r\n    paddingClass() {\r\n      let output =\r\n        \"py-spacing-200 nexus:py-spacing-250 ipad:py-spacing-300 px-spacing-200 nexus:px-spacing-250 ipad:px-spacing-300\";\r\n      if (this.customPadding) {\r\n        output = this.customPadding;\r\n      } else if (this.customVerticalPadding || this.customHorizontalPadding) {\r\n        output = `${this.customVerticalPadding} ${this.customHorizontalPadding}`;\r\n      }\r\n      return output;\r\n    },\r\n    backgroundClass() {\r\n      let output = \"bg-bg-neutral-default\";\r\n      if (this.customBackground) {\r\n        output = this.customBackground;\r\n      }\r\n      return output;\r\n    },\r\n    roundedClass() {\r\n      let output = `rounded-t-08 nexus:rounded-b-08`;\r\n      if (this.fullScreen === \"ipad\") {\r\n        output = \"\";\r\n      } else if (this.fullScreen === \"nexus\") {\r\n        output = `ipad:rounded-t-08 ipad:rounded-b-08`;\r\n      } else if (this.fullScreen === \"mobile\") {\r\n        output = `nexus:rounded-t-08 nexus:rounded-b-08`;\r\n      } else if (this.customBorderRadius) {\r\n        output = this.customBorderRadius;\r\n      }\r\n      return output;\r\n    },\r\n  },\r\n  watch: {\r\n    active(newValue) {\r\n      if (newValue) {\r\n        document.addEventListener(\"keyup\", this.handleKeyUp);\r\n        document.body.style.cssText = \"overflow:hidden\";\r\n      } else {\r\n        document.removeEventListener(\"keyup\", this.handleKeyUp);\r\n        document.body.style.cssText = \"\";\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    handleKeyUp(event) {\r\n      const escPressed = event?.key === \"Escape\";\r\n      const element = document.getElementById(this.eventName);\r\n      if (escPressed && this.active) {\r\n        this.closeModal();\r\n        document.removeEventListener(\"keyup\", this.handleKeyUp);\r\n      }\r\n      if (!this.active || !element) {\r\n        document.removeEventListener(\"keyup\", this.handleKeyUp);\r\n      }\r\n    },\r\n    closeModal() {\r\n      if (!this.preventClose) {\r\n        document.removeEventListener(\"keyup\", this.handleKeyUp);\r\n        this.$bus.$emit(this.eventName, false);\r\n      }\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    document.body.style.cssText = \"\";\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=64cedc62\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"active\":_vm.showModal,\"event-name\":'file-view-modal',\"custom-background\":'bg-transparent',\"custom-overlay\":_vm.type === 'image' ? 'bg-transparent' : undefined,\"full-screen\":'ipad',\"custom-width\":'w-full',\"custom-padding\":'p-spacing-0'}},[_c('div',{staticClass:\"relative h-full w-full\"},[_c('div',{staticClass:\"absolute -left-spacing-500 -top-spacing-500 z-[100000] h-spacing-1000 w-spacing-1000 cursor-pointer rounded-full bg-bg-overlay hover:bg-alpha-black-80\",class:_vm.type === 'image' ? 'hidden' : '',attrs:{\"aria-label\":\"Close\",\"role\":\"button\",\"tabindex\":\"0\"},on:{\"click\":_vm.handleClose,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleClose.apply(null, arguments)}}},[_c('IconX',{staticClass:\"absolute bottom-spacing-150 right-spacing-150 h-spacing-300 w-spacing-300 text-constant-neutral-white\"})],1),_c('div',{staticClass:\"flex h-full w-full flex-col items-center justify-center gap-spacing-100 text-body/l/relaxed/400 text-content-on-neutral-primary\"},[(_vm.tempFileLink && _vm.type === 'image' && !_vm.isLoading)?_c('div',[_c('img',{ref:\"imageViewer\",staticClass:\"invisible h-0 w-0\",attrs:{\"src\":_vm.tempFileLink,\"alt\":\"Preview Image\"},on:{\"load\":_vm.initializeViewer,\"error\":_vm.handleImageError}})]):(_vm.tempFileLink && _vm.type === 'document' && !_vm.isLoading)?_c('iframe',{class:_vm.isIFrameLoading ? 'h-0 w-0' : 'h-full w-full',attrs:{\"src\":`https://docs.google.com/gview?url=${_vm.tempFileLink}&embedded=true`},on:{\"load\":_vm.handleIframeLoad,\"error\":_vm.handleIframeError}}):_vm._e(),(_vm.isLoading || _vm.isIFrameLoading)?_c('div',{staticClass:\"h-spacing-400 w-spacing-400 animate-spin text-constant-brand-primary\"},[_c('IconLoader2')],1):_vm._e(),(_vm.error)?_c('IconFileQuestion',{staticClass:\"h-spacing-600 w-spacing-600 text-content-on-neutral-tertiary\"}):_vm._e(),(_vm.error)?_c('p',{staticClass:\"text-body/l/relaxed/400 text-content-on-neutral-secondary\"},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Modal\r\n    :active=\"showModal\"\r\n    :event-name=\"'file-view-modal'\"\r\n    :custom-background=\"'bg-transparent'\"\r\n    :custom-overlay=\"type === 'image' ? 'bg-transparent' : undefined\"\r\n    :full-screen=\"'ipad'\"\r\n    :custom-width=\"'w-full'\"\r\n    :custom-padding=\"'p-spacing-0'\"\r\n  >\r\n    <div class=\"relative h-full w-full\">\r\n      <!-- Close Button -->\r\n      <div\r\n        class=\"absolute -left-spacing-500 -top-spacing-500 z-[100000] h-spacing-1000 w-spacing-1000 cursor-pointer rounded-full bg-bg-overlay hover:bg-alpha-black-80\"\r\n        aria-label=\"Close\"\r\n        :class=\"type === 'image' ? 'hidden' : ''\"\r\n        role=\"button\"\r\n        tabindex=\"0\"\r\n        @click=\"handleClose\"\r\n        @keyup.enter=\"handleClose\"\r\n      >\r\n        <IconX\r\n          class=\"absolute bottom-spacing-150 right-spacing-150 h-spacing-300 w-spacing-300 text-constant-neutral-white\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        class=\"flex h-full w-full flex-col items-center justify-center gap-spacing-100 text-body/l/relaxed/400 text-content-on-neutral-primary\"\r\n      >\r\n        <!-- Image Preview with Viewer.js -->\r\n        <div v-if=\"tempFileLink && type === 'image' && !isLoading\">\r\n          <img\r\n            ref=\"imageViewer\"\r\n            :src=\"tempFileLink\"\r\n            class=\"invisible h-0 w-0\"\r\n            @load=\"initializeViewer\"\r\n            @error=\"handleImageError\"\r\n            alt=\"Preview Image\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Document Preview -->\r\n        <iframe\r\n          v-else-if=\"tempFileLink && type === 'document' && !isLoading\"\r\n          :src=\"`https://docs.google.com/gview?url=${tempFileLink}&embedded=true`\"\r\n          :class=\"isIFrameLoading ? 'h-0 w-0' : 'h-full w-full'\"\r\n          @load=\"handleIframeLoad\"\r\n          @error=\"handleIframeError\"\r\n        />\r\n\r\n        <!-- Loader -->\r\n        <div\r\n          v-if=\"isLoading || isIFrameLoading\"\r\n          class=\"h-spacing-400 w-spacing-400 animate-spin text-constant-brand-primary\"\r\n        >\r\n          <IconLoader2 />\r\n        </div>\r\n\r\n        <!-- Error State -->\r\n        <IconFileQuestion\r\n          v-if=\"error\"\r\n          class=\"h-spacing-600 w-spacing-600 text-content-on-neutral-tertiary\"\r\n        />\r\n        <p\r\n          v-if=\"error\"\r\n          class=\"text-body/l/relaxed/400 text-content-on-neutral-secondary\"\r\n        >\r\n          {{ error }}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from \"@/components/General/Modal.vue\";\r\nimport { FILE_VALIDATION_OBJECT } from \"@/utilities/constants/constants\";\r\nimport { mapActions } from \"vuex\";\r\nimport Viewer from \"viewerjs\";\r\nimport \"viewerjs/dist/viewer.css\";\r\n\r\nexport default {\r\n  name: \"FileViewerModal\",\r\n  components: {\r\n    Modal,\r\n    IconX: () => import(\"@/components/svgIcons/x.vue\"),\r\n    IconFileQuestion: () => import(\"@/components/svgIcons/file-question.vue\"),\r\n    IconLoader2: () => import(\"@/components/svgIcons/loader-2.vue\"),\r\n  },\r\n  data() {\r\n    return {\r\n      showModal: false,\r\n      isLoading: false,\r\n      tempFileLink: null,\r\n      isIFrameLoading: false,\r\n      type: null,\r\n      error: null,\r\n      modalHandler: null,\r\n      viewer: null, // Viewer.js instance\r\n    };\r\n  },\r\n  mounted() {\r\n    this.modalHandler = (data) => {\r\n      if (data?.showModal) {\r\n        this.showModal = true;\r\n        if (data?.fileUrl) {\r\n          const normalizedUrl = data?.fileUrl?.toLowerCase();\r\n          if (this.isImage(normalizedUrl)) {\r\n            this.type = \"image\";\r\n          } else if (this.isDocument(normalizedUrl)) {\r\n            this.type = \"document\";\r\n            this.isIFrameLoading = true; // Show loader for document preview\r\n          } else {\r\n            this.error = \"File format not supported.\";\r\n            return;\r\n          }\r\n          this.fetchTempLink(data.fileUrl);\r\n        } else if (data?.tempFileLink) {\r\n          this.tempFileLink = data?.tempFileLink;\r\n          this.initializeViewer();\r\n        }\r\n      } else {\r\n        this.closeModal();\r\n      }\r\n    };\r\n    this.$bus.$on(\"file-view-modal\", this.modalHandler);\r\n  },\r\n  methods: {\r\n    ...mapActions(\"utils\", [\"getTempFileViewLink\"]),\r\n\r\n    // Helper to detect image formats\r\n    isImage(fileUrl) {\r\n      return FILE_VALIDATION_OBJECT?.EXTENSIONS?.IMAGE?.some((ext) =>\r\n        fileUrl?.endsWith(ext),\r\n      );\r\n    },\r\n\r\n    // Helper to detect document formats\r\n    isDocument(fileUrl) {\r\n      return FILE_VALIDATION_OBJECT?.EXTENSIONS?.DOC?.some((ext) =>\r\n        fileUrl?.endsWith(ext),\r\n      );\r\n    },\r\n\r\n    // Close modal and reset state\r\n    handleClose() {\r\n      this.$bus.$emit(\"file-view-modal\", { showModal: false });\r\n      this.destroyViewer();\r\n    },\r\n\r\n    // Fetch temporary file view link\r\n    async fetchTempLink(fileUrl) {\r\n      this.isLoading = true;\r\n      this.error = null;\r\n      this.tempFileLink = null;\r\n\r\n      const res = await this.getTempFileViewLink({\r\n        params: {\r\n          fileUrl,\r\n        },\r\n      });\r\n      if (res?.success) {\r\n        this.tempFileLink = res.filePath;\r\n        if (this.type === \"image\") {\r\n          this.initializeViewer();\r\n        }\r\n      } else {\r\n        this.error = \"Unable to generate preview for this file.\";\r\n      }\r\n      this.isLoading = false;\r\n    },\r\n\r\n    // Handle iframe load (hide loader when iframe is fully loaded)\r\n    handleIframeLoad() {\r\n      this.isIFrameLoading = false;\r\n    },\r\n\r\n    // Handle iframe error (in case the file fails to load)\r\n    handleIframeError() {\r\n      this.error = \"Failed to load the document.\";\r\n      this.isIFrameLoading = false;\r\n    },\r\n\r\n    // Handle image error\r\n    handleImageError() {\r\n      this.error = \"Failed to load the image.\";\r\n    },\r\n\r\n    // Initialize Viewer.js\r\n    initializeViewer() {\r\n      var self = this;\r\n      if (this.viewer) return; // Avoid re-initializing if viewer already exists\r\n      this.$nextTick(() => {\r\n        if (this.$refs.imageViewer) {\r\n          this.viewer = new Viewer(this.$refs.imageViewer, {\r\n            button: true,\r\n            navbar: true,\r\n            title: true,\r\n            toolbar: true,\r\n            tooltip: true,\r\n            movable: true,\r\n            zoomable: true,\r\n            rotatable: true,\r\n            scalable: true,\r\n            transition: true,\r\n            fullscreen: true,\r\n            keyboard: true,\r\n            url: \"src\",\r\n            play: true,\r\n            zIndex: 10000000000,\r\n            hidden() {\r\n              self.handleClose();\r\n            },\r\n          });\r\n          this.viewer.show();\r\n        }\r\n      });\r\n    },\r\n\r\n    // Destroy Viewer.js instance\r\n    destroyViewer() {\r\n      if (this.viewer) {\r\n        this.viewer.destroy();\r\n        this.viewer = null;\r\n      }\r\n    },\r\n\r\n    // Close modal and reset state\r\n    closeModal() {\r\n      this.showModal = false;\r\n      this.error = null;\r\n      this.isLoading = false;\r\n      this.tempFileLink = null;\r\n      this.isIFrameLoading = false;\r\n      this.type = null;\r\n      this.destroyViewer();\r\n    },\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"file-view-modal\", this.modalHandler);\r\n    this.destroyViewer();\r\n    this.modalHandler = null;\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FileViewerModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FileViewerModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FileViewerModal.vue?vue&type=template&id=7be43642\"\nimport script from \"./FileViewerModal.vue?vue&type=script&lang=js\"\nexport * from \"./FileViewerModal.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*!\n * Viewer.js v1.11.7\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2024-11-24T04:32:19.116Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Viewer = factory());\n})(this, (function () { 'use strict';\n\n  function _classCallCheck(a, n) {\n    if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n  function _defineProperties(e, r) {\n    for (var t = 0; t < r.length; t++) {\n      var o = r[t];\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n    }\n  }\n  function _createClass(e, r, t) {\n    return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n      writable: !1\n    }), e;\n  }\n  function _defineProperty(e, r, t) {\n    return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n      value: t,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[r] = t, e;\n  }\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n    /**\n     * Enable to request fullscreen when play.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/FullscreenOptions}\n     * @type {boolean|FullscreenOptions}\n     */\n    fullscreen: true,\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n    /**\n     * Define the initial coverage of the viewing image.\n     * @type {number}\n     */\n    initialCoverage: 0.9,\n    /**\n     * Define the initial index of the image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n  };\n\n  var TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer';\n\n  // Actions\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom';\n\n  // Classes\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\");\n\n  // Native events\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_FOCUSIN = 'focusin';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_ERROR = 'error';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_RESIZE = 'resize';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_WHEEL = 'wheel';\n\n  // Custom events\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_MOVE = 'move';\n  var EVENT_MOVED = 'moved';\n  var EVENT_ROTATE = 'rotate';\n  var EVENT_ROTATED = 'rotated';\n  var EVENT_SCALE = 'scale';\n  var EVENT_SCALED = 'scaled';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed';\n  var EVENT_PLAY = 'play';\n  var EVENT_STOP = 'stop';\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n\n  // RegExps\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  // Misc\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n  function isString(value) {\n    return typeof value === 'string';\n  }\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        var length = data.length;\n        var i;\n        for (i = 0; i < length; i += 1) {\n          if (callback.call(data, data[i], i, data) === false) {\n            break;\n          }\n        }\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @param {Object} options - The additional event options.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data, options) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, _objectSpread2({\n        bubbles: true,\n        cancelable: true,\n        detail: data\n      }, options));\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n   * @returns {string} A string contains the image name.\n   */\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /Version\\/\\d+(\\.\\d+)+?\\s+Safari/i.test(WINDOW.navigator.userAgent);\n\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img');\n\n    // Modern browsers (except Safari)\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n    var body = document.body || document.documentElement;\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src;\n\n    // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n    return newImage;\n  }\n\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n      default:\n        return '';\n    }\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n        parent = this.parent;\n      var viewerData;\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n      var element = this.element,\n        options = this.options,\n        list = this.list;\n      var items = [];\n\n      // initList may be called in this.update, so should keep idempotent\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n        var url = _this.getImageURL(image);\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          if (options.navbar) {\n            img.src = src || url;\n          }\n          img.alt = alt;\n          img.setAttribute('data-original-url', url || src);\n          item.setAttribute('data-index', index);\n          item.setAttribute('data-viewer-action', 'view');\n          item.setAttribute('role', 'button');\n          if (options.keyboard) {\n            item.setAttribute('tabindex', 0);\n          }\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        var onLoad;\n        var onError;\n        setData(image, 'filled', true);\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n        addListener(image, EVENT_LOAD, onLoad = function onLoad(event) {\n          removeListener(image, EVENT_ERROR, onError);\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n        addListener(image, EVENT_ERROR, onError = function onError() {\n          removeListener(image, EVENT_LOAD, onLoad);\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n        }, {\n          once: true\n        });\n      });\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList() {\n      var index = this.index;\n      var item = this.items[index];\n      if (!item) {\n        return;\n      }\n      var next = item.nextElementSibling;\n      var gutter = parseInt(window.getComputedStyle(next || item).marginLeft, 10);\n      var offsetWidth = item.offsetWidth;\n      var outerWidth = offsetWidth + gutter;\n\n      // Place the active item in the center of the screen\n      setStyle(this.list, assign({\n        width: outerWidth * this.length - gutter\n      }, getTransforms({\n        translateX: (this.viewerData.width - offsetWidth) / 2 - outerWidth * index\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n      var options = this.options,\n        image = this.image,\n        viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var initialCoverage = Math.max(0, Math.min(1, options.initialCoverage));\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n        initialCoverage = isNumber(initialCoverage) ? initialCoverage : 0.9;\n        width = Math.min(width * initialCoverage, naturalWidth);\n        height = Math.min(height * initialCoverage, naturalHeight);\n        var left = (viewerWidth - width) / 2;\n        var top = (viewerHeight - height) / 2;\n        var imageData = {\n          left: left,\n          top: top,\n          x: left,\n          y: top,\n          width: width,\n          height: height,\n          oldRatio: 1,\n          ratio: width / naturalWidth,\n          aspectRatio: aspectRatio,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        };\n        var initialImageData = assign({}, imageData);\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n      var image = this.image,\n        imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.x,\n        marginTop: imageData.y\n      }, getTransforms(imageData)));\n      if (done) {\n        if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      var image = this.image;\n      if (image) {\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n        image.parentNode.removeChild(image);\n        this.image = null;\n        this.title.innerHTML = '';\n      }\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n        viewer = this.viewer,\n        canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n        viewer = this.viewer,\n        canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n\n  var handlers = {\n    click: function click(event) {\n      var options = this.options,\n        imageData = this.imageData;\n      var target = event.target;\n      var action = getData(target, DATA_ACTION);\n      if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n        target = target.parentElement;\n        action = getData(target, DATA_ACTION);\n      }\n\n      // Cancel the emulated click when the native click event was triggered.\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n          break;\n        case 'hide':\n          if (!this.pointerMoved) {\n            this.hide();\n          }\n          break;\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n        case 'one-to-one':\n          this.toggle();\n          break;\n        case 'reset':\n          this.reset();\n          break;\n        case 'prev':\n          this.prev(options.loop);\n          break;\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n        case 'next':\n          this.next(options.loop);\n          break;\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n        default:\n          if (this.played) {\n            this.stop();\n          }\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        // XXX: No pageX/Y properties in custom event, fallback to the original event.\n        this.toggle(event.isTrusted ? event : event.detail && event.detail.originalEvent);\n      }\n    },\n    load: function load() {\n      var _this = this;\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n      var element = this.element,\n        options = this.options,\n        image = this.image,\n        index = this.index,\n        viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:relative;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          }, {\n            cancelable: false\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n      if (!options.keyboard) {\n        return;\n      }\n      var keyCode = event.keyCode || event.which || event.charCode;\n      switch (keyCode) {\n        // Enter\n        case 13:\n          if (this.viewer.contains(event.target)) {\n            this.click(event);\n          }\n          break;\n      }\n      if (!this.fulled) {\n        return;\n      }\n      switch (keyCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n          break;\n\n        // Space\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n          break;\n\n        // ArrowLeft\n        case 37:\n          if (this.played && this.playing) {\n            this.playing.prev();\n          } else {\n            this.prev(options.loop);\n          }\n          break;\n\n        // ArrowUp\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault();\n\n          // Zoom in\n          this.zoom(options.zoomRatio, true);\n          break;\n\n        // ArrowRight\n        case 39:\n          if (this.played && this.playing) {\n            this.playing.next();\n          } else {\n            this.next(options.loop);\n          }\n          break;\n\n        // ArrowDown\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault();\n\n          // Zoom out\n          this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Ctrl + 0\n        case 48:\n        // Fall through\n\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.localName === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n        pointers = this.pointers;\n      var buttons = event.buttons,\n        button = event.button;\n      this.pointerMoved = false;\n      if (!this.viewed || this.showing || this.viewing || this.hiding\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      // Prevent default behaviours as page zooming in touch devices.\n      event.preventDefault();\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      var action = options.movable ? ACTION_MOVE : false;\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n        action = this.action;\n      if (!this.viewed || !action) {\n        return;\n      }\n      event.preventDefault();\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n      var options = this.options,\n        action = this.action,\n        pointers = this.pointers;\n      var pointer;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n      this.action = false;\n\n      // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false;\n\n            // This timeout will be cleared later when a native dblclick event is triggering\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK, {\n                originalEvent: event\n              });\n            }, 50);\n          } else {\n            this.imageClicked = true;\n\n            // The default timing of a double click in Windows is 500 ms\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK, {\n                originalEvent: event\n              });\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n      if (!this.viewed) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, true, null, event);\n    }\n  };\n\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n        options = this.options;\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n      if (!this.ready) {\n        this.build();\n        if (this.ready) {\n          this.show(immediate);\n        }\n        return this;\n      }\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('aria-hidden');\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n      return this;\n    },\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var _this = this;\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n        options = this.options;\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n      this.hiding = true;\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n      var viewer = this.viewer,\n        image = this.image;\n      var hideImmediately = function hideImmediately() {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      };\n      if (options.transition && !immediate) {\n        var _onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n          // Ignore all propagating `transitionend` events (#275).\n          if (event && event.target === viewer) {\n            removeListener(viewer, EVENT_TRANSITION_END, _onViewerTransitionEnd);\n            _this.hidden();\n          }\n        };\n        var onImageTransitionEnd = function onImageTransitionEnd() {\n          // In case of show the viewer by `viewer.show(true)` previously (#407).\n          if (hasClass(viewer, CLASS_TRANSITION)) {\n            addListener(viewer, EVENT_TRANSITION_END, _onViewerTransitionEnd);\n            removeClass(viewer, CLASS_IN);\n          } else {\n            hideImmediately();\n          }\n        };\n        this.transitioning = {\n          abort: function abort() {\n            if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n              removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n            } else if (hasClass(viewer, CLASS_TRANSITION)) {\n              removeListener(viewer, EVENT_TRANSITION_END, _onViewerTransitionEnd);\n            }\n          }\n        };\n\n        // In case of hiding the viewer when holding on the image (#255),\n        // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n        if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n          addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n            once: true\n          });\n          this.zoomTo(0, false, null, null, true);\n        } else {\n          onImageTransitionEnd();\n        }\n      } else {\n        hideImmediately();\n      }\n      return this;\n    },\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this2 = this;\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n      var element = this.element,\n        options = this.options,\n        title = this.title,\n        canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n      var activeItem = this.items[this.index];\n      if (activeItem) {\n        removeClass(activeItem, CLASS_ACTIVE);\n        activeItem.removeAttribute('aria-selected');\n      }\n      addClass(item, CLASS_ACTIVE);\n      item.setAttribute('aria-selected', true);\n      if (options.focus) {\n        item.focus();\n      }\n      this.image = image;\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n      canvas.innerHTML = '';\n      canvas.appendChild(image);\n\n      // Center current item\n      this.renderList();\n\n      // Clear title\n      title.innerHTML = '';\n\n      // Generate title after viewed\n      var onViewed = function onViewed() {\n        var imageData = _this2.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n      var onLoad;\n      var onError;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n          if (image.complete) {\n            if (_this2.imageRendering) {\n              _this2.imageRendering.abort();\n            } else if (_this2.imageInitializing) {\n              _this2.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n            if (_this2.timeout) {\n              clearTimeout(_this2.timeout);\n            }\n          }\n        }\n      };\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = function onLoad() {\n          removeListener(image, EVENT_ERROR, onError);\n          _this2.load();\n        }, {\n          once: true\n        });\n        addListener(image, EVENT_ERROR, onError = function onError() {\n          removeListener(image, EVENT_LOAD, onLoad);\n          if (_this2.timeout) {\n            clearTimeout(_this2.timeout);\n            _this2.timeout = false;\n          }\n          removeClass(image, CLASS_INVISIBLE);\n          if (options.loading) {\n            removeClass(_this2.canvas, CLASS_LOADING);\n          }\n        }, {\n          once: true\n        });\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this2.timeout = false;\n        }, 1000);\n      }\n      return this;\n    },\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n      this.view(index);\n      return this;\n    },\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n      this.view(index);\n      return this;\n    },\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n      return this;\n    },\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var _this3 = this;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n      if (this.viewed && !this.played && options.movable) {\n        var oldX = imageData.x;\n        var oldY = imageData.y;\n        var changed = false;\n        if (isNumber(x)) {\n          changed = true;\n        } else {\n          x = oldX;\n        }\n        if (isNumber(y)) {\n          changed = true;\n        } else {\n          y = oldY;\n        }\n        if (changed) {\n          if (isFunction(options.move)) {\n            addListener(element, EVENT_MOVE, options.move, {\n              once: true\n            });\n          }\n          if (dispatchEvent(element, EVENT_MOVE, {\n            x: x,\n            y: y,\n            oldX: oldX,\n            oldY: oldY,\n            originalEvent: _originalEvent\n          }) === false) {\n            return this;\n          }\n          imageData.x = x;\n          imageData.y = y;\n          imageData.left = x;\n          imageData.top = y;\n          this.moving = true;\n          this.renderImage(function () {\n            _this3.moving = false;\n            if (isFunction(options.moved)) {\n              addListener(element, EVENT_MOVED, options.moved, {\n                once: true\n              });\n            }\n            dispatchEvent(element, EVENT_MOVED, {\n              x: x,\n              y: y,\n              oldX: oldX,\n              oldY: oldY,\n              originalEvent: _originalEvent\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n      return this;\n    },\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var _this4 = this;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      degree = Number(degree);\n      if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n        var oldDegree = imageData.rotate;\n        if (isFunction(options.rotate)) {\n          addListener(element, EVENT_ROTATE, options.rotate, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_ROTATE, {\n          degree: degree,\n          oldDegree: oldDegree\n        }) === false) {\n          return this;\n        }\n        imageData.rotate = degree;\n        this.rotating = true;\n        this.renderImage(function () {\n          _this4.rotating = false;\n          if (isFunction(options.rotated)) {\n            addListener(element, EVENT_ROTATED, options.rotated, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_ROTATED, {\n            degree: degree,\n            oldDegree: oldDegree\n          }, {\n            cancelable: false\n          });\n        });\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var _this5 = this;\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.viewed && !this.played && options.scalable) {\n        var oldScaleX = imageData.scaleX;\n        var oldScaleY = imageData.scaleY;\n        var changed = false;\n        if (isNumber(scaleX)) {\n          changed = true;\n        } else {\n          scaleX = oldScaleX;\n        }\n        if (isNumber(scaleY)) {\n          changed = true;\n        } else {\n          scaleY = oldScaleY;\n        }\n        if (changed) {\n          if (isFunction(options.scale)) {\n            addListener(element, EVENT_SCALE, options.scale, {\n              once: true\n            });\n          }\n          if (dispatchEvent(element, EVENT_SCALE, {\n            scaleX: scaleX,\n            scaleY: scaleY,\n            oldScaleX: oldScaleX,\n            oldScaleY: oldScaleY\n          }) === false) {\n            return this;\n          }\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n          this.scaling = true;\n          this.renderImage(function () {\n            _this5.scaling = false;\n            if (isFunction(options.scaled)) {\n              addListener(element, EVENT_SCALED, options.scaled, {\n                once: true\n              });\n            }\n            dispatchEvent(element, EVENT_SCALED, {\n              scaleX: scaleX,\n              scaleY: scaleY,\n              oldScaleX: oldScaleX,\n              oldScaleY: oldScaleY\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [showTooltip=false] - Indicates whether to show the tooltip.\n     * @param {Object} [pivot] - The pivot point coordinate for zooming.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var showTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var pivot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var _originalEvent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, showTooltip, pivot, _originalEvent);\n      return this;\n    },\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [showTooltip] - Indicates whether to show the tooltip.\n     * @param {Object} [pivot] - The pivot point coordinate for zooming.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this6 = this;\n      var showTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var pivot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var _originalEvent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var _zoomable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var element = this.element,\n        options = this.options,\n        pointers = this.pointers,\n        imageData = this.imageData;\n      var x = imageData.x,\n        y = imageData.y,\n        width = imageData.width,\n        height = imageData.height,\n        naturalWidth = imageData.naturalWidth,\n        naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n        if (_originalEvent) {\n          switch (_originalEvent.type) {\n            case 'wheel':\n              if (options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n                ratio = 1;\n              }\n              break;\n            case 'pointermove':\n            case 'touchmove':\n            case 'mousemove':\n              if (ratio > 0.99 && ratio < 1.01) {\n                ratio = 1;\n              }\n              break;\n          }\n        }\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = imageData.ratio;\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        this.zooming = true;\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length > 0 ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n          imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          imageData.x -= offsetWidth * ((pivot.x - x) / width);\n          imageData.y -= offsetHeight * ((pivot.y - y) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.x -= offsetWidth / 2;\n          imageData.y -= offsetHeight / 2;\n        }\n        imageData.left = imageData.x;\n        imageData.top = imageData.y;\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.oldRatio = oldRatio;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this6.zooming = false;\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          }, {\n            cancelable: false\n          });\n        });\n        if (showTooltip) {\n          this.tooltip();\n        }\n      }\n      return this;\n    },\n    /**\n     * Play the images\n     * @param {boolean|FullscreenOptions} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this7 = this;\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.isShown || this.played) {\n        return this;\n      }\n      var element = this.element,\n        options = this.options;\n      if (isFunction(options.play)) {\n        addListener(element, EVENT_PLAY, options.play, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_PLAY) === false) {\n        return this;\n      }\n      var player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n      if (fullscreen) {\n        this.requestFullscreen(fullscreen);\n      }\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n      if (isNumber(options.interval) && options.interval > 0) {\n        var _prev = function prev() {\n          clearTimeout(_this7.playing.timeout);\n          removeClass(list[index], CLASS_IN);\n          index -= 1;\n          index = index >= 0 ? index : total - 1;\n          addClass(list[index], CLASS_IN);\n          _this7.playing.timeout = setTimeout(_prev, options.interval);\n        };\n        var _next = function next() {\n          clearTimeout(_this7.playing.timeout);\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          _this7.playing.timeout = setTimeout(_next, options.interval);\n        };\n        if (total > 1) {\n          this.playing = {\n            prev: _prev,\n            next: _next,\n            timeout: setTimeout(_next, options.interval)\n          };\n        }\n      }\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this8 = this;\n      if (!this.played) {\n        return this;\n      }\n      var element = this.element,\n        options = this.options;\n      if (isFunction(options.stop)) {\n        addListener(element, EVENT_STOP, options.stop, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_STOP) === false) {\n        return this;\n      }\n      var player = this.player;\n      clearTimeout(this.playing.timeout);\n      this.playing = false;\n      this.played = false;\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this9 = this;\n      var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('style');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n      if (options.focus) {\n        this.enforceFocus();\n      }\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this9.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this10 = this;\n      var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n      if (options.focus) {\n        this.clearEnforceFocus();\n      }\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this10.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this11 = this;\n      var options = this.options,\n        tooltipBox = this.tooltipBox,\n        imageData = this.imageData;\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          tooltipBox.removeAttribute('aria-hidden');\n\n          // Force reflow to enable CSS3 transition\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.removeAttribute('aria-hidden');\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            tooltipBox.setAttribute('aria-hidden', true);\n            _this11.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this11.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.setAttribute('aria-hidden', true);\n        }\n        _this11.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n    /**\n     * Toggle the image size between its current size and natural size\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    toggle: function toggle() {\n      var _originalEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.imageData.oldRatio, true, null, _originalEvent);\n      } else {\n        this.zoomTo(1, true, null, _originalEvent);\n      }\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this12 = this;\n      var element = this.element,\n        options = this.options,\n        isImg = this.isImg;\n\n      // Destroy viewer if the target image was deleted\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this12, image)) {\n            images.push(image);\n          }\n        } else if (_this12.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n      if (!images.length) {\n        return this;\n      }\n      this.images = images;\n      this.length = images.length;\n      if (this.ready) {\n        var changedIndexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n          if (image && img) {\n            if (image.src !== img.src\n\n            // Title changed (#408)\n            || image.alt !== img.alt) {\n              changedIndexes.push(i);\n            }\n          } else {\n            changedIndexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var changedIndex = changedIndexes.indexOf(this.index);\n              if (changedIndex >= 0) {\n                this.viewed = false;\n                this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n              } else {\n                var activeItem = this.items[this.index];\n\n                // Reactivate the current viewing item after reset the list.\n                addClass(activeItem, CLASS_ACTIVE);\n                activeItem.setAttribute('aria-selected', true);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n        options = this.options;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      this.destroyed = true;\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n      return url;\n    },\n    enforceFocus: function enforceFocus() {\n      var _this = this;\n      this.clearEnforceFocus();\n      addListener(document, EVENT_FOCUSIN, this.onFocusin = function (event) {\n        var viewer = _this.viewer;\n        var target = event.target;\n        if (target === document || target === viewer || viewer.contains(target)) {\n          return;\n        }\n        while (target) {\n          // Avoid conflicts with other modals (#474, #540)\n          if (target.getAttribute('tabindex') !== null || target.getAttribute('aria-modal') === 'true') {\n            return;\n          }\n          target = target.parentElement;\n        }\n        viewer.focus();\n      });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n      if (this.onFocusin) {\n        removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n        this.onFocusin = null;\n      }\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      if (this.scrollbarWidth > 0) {\n        body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n      }\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      if (this.scrollbarWidth > 0) {\n        body.style.paddingRight = this.initialBodyPaddingRight;\n      }\n    },\n    shown: function shown() {\n      var element = this.element,\n        options = this.options,\n        viewer = this.viewer;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n      if (options.focus) {\n        viewer.focus();\n        this.enforceFocus();\n      }\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n        options = this.options,\n        viewer = this.viewer;\n      if (options.fucus) {\n        this.clearEnforceFocus();\n      }\n      this.close();\n      this.unbind();\n      addClass(viewer, CLASS_HIDE);\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      viewer.setAttribute('aria-hidden', true);\n      this.resetList();\n      this.resetImage();\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.hiding = false;\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_HIDDEN, null, {\n          cancelable: false\n        });\n      }\n    },\n    requestFullscreen: function requestFullscreen(options) {\n      var document = this.element.ownerDocument;\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement;\n\n        // Element.requestFullscreen()\n        if (documentElement.requestFullscreen) {\n          // Avoid TypeError when convert `options` to dictionary\n          if (isPlainObject(options)) {\n            documentElement.requestFullscreen(options);\n          } else {\n            documentElement.requestFullscreen();\n          }\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n        pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]];\n\n      // In the case of the `pointers` object is empty (#421)\n      if (!pointer) {\n        return;\n      }\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          if (offsetX !== 0 || offsetY !== 0) {\n            this.pointerMoved = true;\n            this.move(offsetX, offsetY, event);\n          }\n          break;\n\n        // Zoom the current image\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, null, event);\n          break;\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n            break;\n          }\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n        viewerData = this.viewerData;\n      return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n\n  var AnotherViewer = WINDOW.Viewer;\n  var getUniqueID = function (id) {\n    return function () {\n      id += 1;\n      return id;\n    };\n  }(-1);\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Viewer);\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.moving = false;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.rotating = false;\n      this.scaling = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.pointerMoved = false;\n      this.id = getUniqueID();\n      this.init();\n    }\n    return _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n        var element = this.element,\n          options = this.options;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n\n        // The `focus` option requires the `keyboard` option set to `true`.\n        if (options.focus && !options.keyboard) {\n          options.focus = false;\n        }\n        var isImg = element.localName === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody();\n\n        // Override `transition` option if it is not supported\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n        if (options.inline) {\n          var count = 0;\n          var progress = function progress() {\n            count += 1;\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              };\n\n              // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n                _this.build();\n              }, 0);\n            }\n          };\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                  removeListener(image, EVENT_ERROR, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              var onLoad;\n              var onError;\n              addListener(image, EVENT_LOAD, onLoad = function onLoad() {\n                removeListener(image, EVENT_ERROR, onError);\n                progress();\n              }, {\n                once: true\n              });\n              addListener(image, EVENT_ERROR, onError = function onError() {\n                removeListener(image, EVENT_LOAD, onLoad);\n                progress();\n              }, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n            if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n        title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n        if (options.keyboard) {\n          button.setAttribute('tabindex', 0);\n        }\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n            if (options.keyboard) {\n              item.setAttribute('tabindex', 0);\n            }\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n          if (!container) {\n            container = this.body;\n          }\n          container.appendChild(viewer);\n        }\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n        this.ready = true;\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n  }();\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n\n  return Viewer;\n\n}));\n","const FILE_VALIDATION_OBJECT = {\r\n  DEFAULT: {\r\n    MAX_FILE_SIZE: 10 * 1024 * 1024, // Default 10MB\r\n    ALLOWED_FILE_EXTENSIONS: [\r\n      \".pdf\",\r\n      \".doc\",\r\n      \".docx\",\r\n      \".xlsx\",\r\n      \".xls\",\r\n      \".png\",\r\n      \".jpeg\",\r\n      \".jpg\",\r\n      \".txt\",\r\n      \".gif\",\r\n      \".bmp\",\r\n      \".ppt\",\r\n      \".pptx\",\r\n    ],\r\n    UPLOAD_DIRECTORY: \"/storage/uploads\", // Default directory for all uploads\r\n  },\r\n\r\n  // You can add more specific configurations for certain use cases\r\n  QUOTATION: {\r\n    MAX_FILE_SIZE: 5 * 1024 * 1024, // Max 5MB for quotations\r\n    ALLOWED_FILE_EXTENSIONS: [\r\n      \".pdf\",\r\n      \".doc\",\r\n      \".docx\",\r\n      \".xlsx\",\r\n      \".xls\",\r\n      \".png\",\r\n      \".jpeg\",\r\n      \".jpg\",\r\n      \".txt\",\r\n      \".gif\",\r\n      \".bmp\",\r\n      \".ppt\",\r\n      \".pptx\",\r\n    ],\r\n    UPLOAD_DIRECTORY: \"/storage/documents/quotations\", // Specific directory for quotations\r\n  },\r\n\r\n  MARKET_RESEARCH_FILES: {\r\n    MAX_FILE_SIZE: 5 * 1024 * 1024, // Max 5MB for quotations\r\n    ALLOWED_FILE_EXTENSIONS: [\r\n      \".pdf\",\r\n      \".doc\",\r\n      \".docx\",\r\n      \".xlsx\",\r\n      \".xls\",\r\n      \".png\",\r\n      \".jpeg\",\r\n      \".jpg\",\r\n      \".txt\",\r\n      \".gif\",\r\n      \".bmp\",\r\n      \".ppt\",\r\n      \".pptx\",\r\n    ],\r\n    UPLOAD_DIRECTORY: \"/storage/documents/files\", // Specific directory for quotations\r\n  },\r\n\r\n  IMAGE: {\r\n    MAX_FILE_SIZE: 2 * 1024 * 1024, // Max 2MB for images\r\n    ALLOWED_FILE_EXTENSIONS: [\".jpg\", \".jpeg\", \".png\"],\r\n    UPLOAD_DIRECTORY: \"/storage/images\", // Specific directory for images\r\n  },\r\n\r\n  EXTENSIONS: {\r\n    DOC: [\r\n      \".doc\",\r\n      \".docx\",\r\n      \".html\",\r\n      \".htm\",\r\n      \".odt\",\r\n      \".pdf\",\r\n      \".xls\",\r\n      \".xlsx\",\r\n      \".ods\",\r\n      \".ppt\",\r\n      \".pptx\",\r\n      \".txt\",\r\n    ],\r\n    IMAGE: [\".png\", \".jpeg\", \".jpg\", \".gif\", \".bmp\"],\r\n  },\r\n};\r\n\r\nexport { FILE_VALIDATION_OBJECT };\r\n"],"names":["render","_vm","this","_c","_self","attrs","active","staticClass","class","customOverlay","eventName","on","$event","target","currentTarget","closeModal","customClass","_t","_e","staticRenderFns","props","required","type","Boolean","String","preventClose","customStyle","Array","default","customBackground","fullScreen","customVerticalPadding","customHorizontalPadding","customPadding","customWidth","customHeight","customBorderRadius","computed","widthClass","paddingClass","heightClass","roundedClass","backgroundClass","output","watch","newValue","document","addEventListener","handleKeyUp","body","style","cssText","removeEventListener","methods","event","escPressed","key","element","getElementById","$bus","$emit","beforeDestroy","component","showModal","undefined","handleClose","indexOf","_k","keyCode","apply","arguments","tempFileLink","isLoading","ref","initializeViewer","handleImageError","isIFrameLoading","handleIframeLoad","handleIframeError","error","_v","_s","name","components","Modal","IconX","IconFileQuestion","IconLoader2","data","modalHandler","viewer","mounted","fileUrl","normalizedUrl","toLowerCase","isImage","isDocument","fetchTempLink","$on","mapActions","FILE_VALIDATION_OBJECT","EXTENSIONS","IMAGE","some","ext","endsWith","DOC","destroyViewer","res","getTempFileViewLink","params","success","filePath","self","$nextTick","$refs","imageViewer","Viewer","button","navbar","title","toolbar","tooltip","movable","zoomable","rotatable","scalable","transition","fullscreen","keyboard","url","play","zIndex","hidden","show","destroy","$off","global","factory","module","exports","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","_createClass","prototype","_defineProperty","value","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread2","forEach","getOwnPropertyDescriptors","defineProperties","_toPrimitive","Symbol","toPrimitive","i","call","Number","_typeof","iterator","constructor","DEFAULTS","backdrop","className","container","inheritedAttributes","initialCoverage","initialViewIndex","inline","interval","focus","loading","loop","minWidth","minHeight","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","ready","shown","hide","view","viewed","move","moved","rotate","rotated","scale","scaled","zoom","zoomed","stop","TEMPLATE","IS_BROWSER","window","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_FOCUSIN","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_ERROR","EVENT_TOUCH_END","EVENT_TOUCH_MOVE","EVENT_TOUCH_START","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_RESIZE","EVENT_TRANSITION_END","EVENT_WHEEL","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","EVENT_MOVE","EVENT_MOVED","EVENT_ROTATE","EVENT_ROTATED","EVENT_SCALE","EVENT_SCALED","EVENT_ZOOM","EVENT_ZOOMED","EVENT_PLAY","EVENT_STOP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","isFunction","callback","isArray","assign","obj","_len","args","_key","arg","REGEXP_SUFFIX","setStyle","styles","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","getData","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","get","set","removeListener","handler","split","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getImageNameFromURL","decodeURIComponent","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","onload","width","height","removeChild","src","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","b","getPointer","_ref2","endOnly","pageX","pageY","end","timeStamp","Date","now","getPointersCenter","count","_ref3","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","viewerData","parent","max","offsetWidth","offsetHeight","parentData","fulled","_this","list","items","innerHTML","images","index","alt","getImageURL","item","img","onLoad","onError","firstElementChild","loadImage","renderList","next","nextElementSibling","gutter","parseInt","marginLeft","outerWidth","resetList","initImage","done","sizingImage","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","imageInitializing","abort","aspectRatio","min","x","y","oldRatio","initialImageData","renderImage","_this3","marginTop","viewing","moving","rotating","scaling","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","localName","parentElement","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","pointerMoved","toggle","reset","prev","preventDefault","doubleClickImageTimeout","originalEvent","load","timeout","originalImage","parentWidth","parentHeight","filled","which","charCode","playing","ctrlKey","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","isSwitchable","change","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","immediate","build","transitioning","id","removeAttribute","initialOffsetWidth","hideImmediately","_onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","activeItem","onViewed","complete","maxIndex","moveTo","_originalEvent","oldX","oldY","changed","degree","rotateTo","oldDegree","_scaleX","_scaleY","_this5","oldScaleX","oldScaleY","showTooltip","pivot","_this6","_zoomable","newWidth","newHeight","offset","center","_this7","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","_prev","_next","_this8","exitFullscreen","_this9","enforceFocus","_this10","clearEnforceFocus","_this11","tooltipBox","textContent","round","tooltipping","fading","update","_this12","isImg","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","others","onFocusin","parseFloat","fucus","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","offsetX","offsetY","absoluteOffsetX","p","AnotherViewer","getUniqueID","nodeType","Error","init","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","DEFAULT","MAX_FILE_SIZE","ALLOWED_FILE_EXTENSIONS","UPLOAD_DIRECTORY","QUOTATION","MARKET_RESEARCH_FILES"],"sourceRoot":""}