"use strict";(self.webpackChunkconstruction_commercial_search_frontend=self.webpackChunkconstruction_commercial_search_frontend||[]).push([[4028],{37767:function(e,t,s){s.d(t,{A:function(){return o}});var a={props:{active:{required:!0,type:Boolean},eventName:{required:!0,type:String},preventClose:{required:!1,type:Boolean},customStyle:{required:!1,type:[String,Array],default:""},customBackground:{required:!1,type:String,default:""},fullScreen:{required:!1,type:String,default:""},customVerticalPadding:{required:!1,type:String,default:""},customHorizontalPadding:{required:!1,type:String,default:""},customPadding:{required:!1,type:String,default:""},customWidth:{required:!1,type:String,default:""},customHeight:{required:!1,type:String,default:""},customBorderRadius:{required:!1,type:String,default:""},customOverlay:{required:!1,type:String,default:"bg-bg-overlay"}},computed:{customClass(){return[this.widthClass,this.paddingClass,this.heightClass,this.roundedClass,this.backgroundClass]},widthClass(){let e="w-full nexus:w-[448px]";return this.customWidth&&(e=this.customWidth),e},heightClass(){let e="min-h-[268px]";return this.customHeight&&(e=`min-h-[268px] ${this.customHeight}`),"mobile"===this.fullScreen?e=this.customHeight?`min-h-[268px] h-[100dvh] ${this.customHeight}`:"min-h-[268px] h-[100dvh] nexus:h-auto":"nexus"===this.fullScreen?e=this.customHeight?`min-h-[268px] h-[100dvh] ${this.customHeight}`:"min-h-[268px] h-[100dvh] ipad:h-auto":"ipad"===this.fullScreen&&(e="min-h-[268px] h-[100dvh]"),e},paddingClass(){let e="py-spacing-200 nexus:py-spacing-250 ipad:py-spacing-300 px-spacing-200 nexus:px-spacing-250 ipad:px-spacing-300";return this.customPadding?e=this.customPadding:(this.customVerticalPadding||this.customHorizontalPadding)&&(e=`${this.customVerticalPadding} ${this.customHorizontalPadding}`),e},backgroundClass(){let e="bg-bg-neutral-default";return this.customBackground&&(e=this.customBackground),e},roundedClass(){let e="rounded-t-08 nexus:rounded-b-08";return"ipad"===this.fullScreen?e="":"nexus"===this.fullScreen?e="ipad:rounded-t-08 ipad:rounded-b-08":"mobile"===this.fullScreen?e="nexus:rounded-t-08 nexus:rounded-b-08":this.customBorderRadius&&(e=this.customBorderRadius),e}},watch:{active(e){e?(document.addEventListener("keyup",this.handleKeyUp),document.body.style.cssText="overflow:hidden"):(document.removeEventListener("keyup",this.handleKeyUp),document.body.style.cssText="")}},methods:{handleKeyUp(e){const t="Escape"===e?.key,s=document.getElementById(this.eventName);t&&this.active&&(this.closeModal(),document.removeEventListener("keyup",this.handleKeyUp)),this.active&&s||document.removeEventListener("keyup",this.handleKeyUp)},closeModal(){this.preventClose||(document.removeEventListener("keyup",this.handleKeyUp),this.$bus.$emit(this.eventName,!1))}},beforeDestroy(){document.body.style.cssText=""}},i=a,r=(0,s(81656).A)(i,(function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"fade"}},[e.active?t("div",{staticClass:"fixed inset-0 z-[9999] flex h-screen w-full items-center justify-center overflow-y-auto",class:e.customOverlay,attrs:{id:e.eventName},on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal()}}},[t("div",{staticClass:"fixed bottom-0 overflow-y-auto shadow-lg nexus:relative",class:e.customClass},[e._t("default")],2)]):e._e()])}),[],!1,null,null,null),o=r.exports},24028:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var a={components:{Modal:(s(44114),s(37767)).A,GeneralForm:()=>s.e(6277).then(s.bind(s,76277)),ClassicTable:()=>s.e(440).then(s.bind(s,30440)),DownloadAndView:()=>s.e(1004).then(s.bind(s,71004))},data:()=>({showModal:!1,data:null,sortKey:"dateOfPriceAdded",sortOrder:"desc"}),computed:{computedQuotations(){if(!this.data?.allQuotations?.length)return[];let e=this.data.allQuotations.map((e=>({...e,calculatedPrice:e.price*(e?.variableId?.coefficient||1)})));return e[0].latest=!0,"dateOfPriceAdded"===this.sortKey?"asc"===this.sortOrder&&(e=e?.reverse()):"price"!==this.sortKey&&"calculatedPrice"!==this.sortKey||(e=e.sort(((e,t)=>"asc"===this.sortOrder?e.price-t.price:t.price-e.price))),e},quotationHeaders(){let e=[{key:"origin",value:"Origin",sortable:!1},{key:"price",value:"Price/UNIT",sortable:!0},{key:"calculatedPrice",value:"=Price/UNIT",sortable:!0},{key:"dateOfPriceAdded",value:"Date added",sortable:!0},{key:"quotation",value:"Quotation"}];return this.data?.unit&&(e=[{key:"origin",value:"Origin",sortable:!1},{key:"price",value:`Price/${this.data?.unit}`,sortable:!0},{key:"=price",value:`=Price/${this.data?.unit}`,sortable:!0},{key:"dateOfPriceAdded",value:"Date added",sortable:!0},{key:"quotation",value:"Quotation"}]),e},getSubHeading(){let e="";return this.data?.productName&&(e=`${this.data?.productName} - [${this.data?.allQuotations?.[0]?.variableId?.name||"default"}, ${this.data?.allQuotations?.[0]?.variableId?.coefficient||1}]`),e}},mounted(){this.$bus.$on("all-quotation-prices-modal",(e=>{e?.showModal?(this.showModal=e?.showModal,this.data=e?.data):(this.showModal=!1,this.data=null)}))},methods:{goToMarketResearch(e){console.log("quotation",e),this.$router.push({path:`/dashboard/market-researches/${e?.marketResearchId?._id}`,query:{companyId:this.data?._id,productId:e?.variableId?._id?e?.variableId?._id:e?.productId}})},handleClose(){this.$bus.$emit("all-quotation-prices-modal",{showModal:!1})},handleSort({sortKey:e,sortOrder:t}){this.sortKey=e,this.sortOrder=t}},beforeDestroy(){this.$bus.$off("all-quotation-prices-modal")}},i=a,r=(0,s(81656).A)(i,(function(){var e=this,t=e._self._c;return t("Modal",{attrs:{active:e.showModal,"event-name":"all-quotation-prices-modal","full-screen":"nexus","custom-width":"w-full ipad:w-[768px] ipadPro:w-[1024px]","custom-padding":"p-spacing-0"}},[t("div",{staticClass:"h-full min-h-[400px] w-full"},[t("GeneralForm",{staticClass:"flex-1",attrs:{heading:e.data?.companyName,"sub-heading":e.getSubHeading,"show-submit-button":!1},on:{"close-pressed":e.handleClose},scopedSlots:e._u([{key:"form-body",fn:function(){return[t("ClassicTable",{attrs:{headers:e.quotationHeaders,"sort-key":e.sortKey,"sort-order":e.sortOrder,"horizontal-padding":"px-spacing-0",bgClass:"bg-transparent"},on:{"fetch-sorted-data":e.handleSort},scopedSlots:e._u([{key:"table-body",fn:function(){return e._l(e.computedQuotations,(function(s,a){return t("tr",{key:a,staticClass:"border-b border-stroke-medium text-body/m/relaxed/400 text-content-on-neutral-primary"},[t("td",{staticClass:"py-spacing-100 pr-spacing-100"},[t("p",[s?.marketResearchId?._id?t("span",{staticClass:"cursor-pointer",on:{click:function(t){return t.stopPropagation(),e.goToMarketResearch(s)}}},[e._v(e._s(s?.marketResearchId?.name))]):t("span",[e._v(e._s(s?.type))]),s?.latest?t("span",{staticClass:"ml-spacing-50 rounded-04 bg-bg-status-success px-spacing-50 py-spacing-0 text-overline/s/relaxed/500 text-content-on-status-on-success"},[e._v(" LATEST ")]):e._e()])]),t("td",{staticClass:"py-spacing-100 pr-spacing-100"},[e._v(" "+e._s(e._f("toCurrency")(s?.price))+" ")]),t("td",{staticClass:"py-spacing-100 pr-spacing-100"},[e._v(" "+e._s(e._f("toCurrency")(s?.calculatedPrice))+" ")]),t("td",{staticClass:"py-spacing-100 pr-spacing-100"},[e._v(" "+e._s(e._f("toDate")(s?.dateOfPriceAdded))+" ")]),t("td",{staticClass:"py-spacing-100 pr-spacing-100"},[s?.quotationFile?t("DownloadAndView",{attrs:{file:s?.quotationFile}}):t("span",{staticClass:"text-content-on-neutral-tertiary"},[e._v("Not Available")])],1)])}))},proxy:!0}])})]},proxy:!0}])})],1)])}),[],!1,null,null,null),o=r.exports}}]);