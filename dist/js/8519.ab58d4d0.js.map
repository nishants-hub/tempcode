{"version":3,"file":"js/8519.ab58d4d0.js","mappings":"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","sources":["webpack://construction-commercial-search-frontend/./src/components/ProductDetails/Table.vue","webpack://construction-commercial-search-frontend/src/components/ProductDetails/Table.vue","webpack://construction-commercial-search-frontend/./src/components/ProductDetails/Table.vue?bd91","webpack://construction-commercial-search-frontend/./src/components/ProductDetails/Table.vue?49ba"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"relative flex h-full w-full flex-col\"},[_c('div',{staticClass:\"mb-spacing-100 flex items-center\"},[(_vm.productData?.title)?_c('h2',{staticClass:\"px-spacing-200 text-headline/s/relaxed/500 text-constant-brand-primary ipad:px-spacing-300 ipad:text-headline/m/relaxed/500\"},[_vm._v(\" \"+_vm._s(_vm.productData?.title)+\" \")]):_vm._e(),(_vm.productData?.title)?_c('div',{on:{\"click\":function($event){return _vm.handleAddVariables()}}},[_c('GeneralButton',{attrs:{\"button-type\":'button',\"type\":'brand',\"size\":'small',\"emphasis\":'secondary',\"icon-position\":'none',\"label\":'Edit'}})],1):_vm._e(),_c('div',{staticClass:\"absolute right-spacing-200 top-spacing-0 cursor-pointer\",on:{\"click\":function($event){return _vm.close()}}},[_c('IconX',{staticClass:\"h-spacing-300 w-spacing-300 text-content-on-neutral-secondary hover:text-content-on-neutral-primary\"})],1)]),_c('div',{staticClass:\"flex flex-col gap-spacing-100 px-spacing-200 nexus:flex-row nexus:items-center ipad:px-spacing-300\"},[(_vm.productData?.title)?_c('div',{staticClass:\"flex items-center gap-spacing-100\"},[_c('p',{staticClass:\"text-body/m/relaxed/500 text-content-on-neutral-secondary\"},[_vm._v(\" Variables \")]),_c('div',{staticClass:\"flex h-spacing-200 w-spacing-200 cursor-pointer items-center justify-center rounded-full bg-constant-brand-primary\",on:{\"click\":function($event){return _vm.handleAddVariables()}}},[_c('IconPlus',{staticClass:\"h-spacing-150 w-spacing-150 text-constant-neutral-white\"})],1)]):_vm._e(),_c('p',{staticClass:\"text-body/m/relaxed/400 text-content-on-neutral-secondary\"},_vm._l((_vm.productData?.productDetails?.variables),function(variable,index){return _c('span',{key:index,staticClass:\"text-body/m/relaxed/400\"},[_vm._v(\" \"+_vm._s(index > 0 ? \"|\" : \"\")+\" \"+_vm._s(variable?.name)+\" [\"+_vm._s(variable?.coefficient)+\"] \")])}),0)]),_c('PaginatedTable',{attrs:{\"headers\":_vm.headerData,\"currentPage\":_vm.currentPage,\"total-pages\":_vm.totalPages,\"sort-key\":_vm.sortKey,\"sort-order\":_vm.sortOrder,\"total-count\":_vm.totalCount,\"bg-class\":_vm.bgClass},on:{\"fetch-sorted-data\":_vm.fetchSortedData,\"fetch-data\":_vm.fetchPage},scopedSlots:_vm._u([{key:\"table-body\",fn:function(){return _vm._l((_vm.paginatedAndSortedData),function(item,index){return _c('tr',{key:index,staticClass:\"border-b border-stroke-bold text-left text-body/m/relaxed/400 text-content-on-neutral-primary ipad:text-body/l/relaxed/400\",class:item?.allQuotations?.length > 0 ? 'cursor-pointer' : '',on:{\"click\":function($event){$event.stopPropagation();item?.allQuotations?.length > 0\n            ? _vm.allPrices({ ...item, productName: _vm.productData?.title })\n            : undefined}}},[_c('td',{staticClass:\"py-spacing-100 pr-spacing-100\"},[_c('span',{staticClass:\"block cursor-pointer text-body/m/relaxed/500 hover:text-constant-brand-primary ipad:text-body/l/relaxed/500\",on:{\"click\":function($event){return _vm.goToCompany(item?._id)}}},[_vm._v(_vm._s(item?.companyName))]),(item?.quotation?.variableId)?_c('span',{staticClass:\"block text-body/m/relaxed/400 italic text-content-on-neutral-secondary\"},[_vm._v(\"[\"+_vm._s(item?.quotation?.variableId?.name)+\", \"+_vm._s(item?.quotation?.variableId?.coefficient)+\"]\")]):_c('span',{staticClass:\"block text-body/m/relaxed/400 italic text-content-on-neutral-secondary\"},[_vm._v(\"[default, 1] \")])]),(!isNaN(parseFloat(item?.priceQuoted)))?_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_vm._v(\" \"+_vm._s(_vm._f(\"toCurrency\")(item?.priceQuoted))+\" \")]):_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"},[_vm._v(\" Not Available \")]),(!isNaN(parseFloat(item?.price)))?_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_vm._v(\" \"+_vm._s(_vm._f(\"toCurrency\")(item?.price))+\" \")]):_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"},[_vm._v(\" Not Available \")]),(\n            item?.quotation?.marketResearchId?._id || item?.quotation?.type\n          )?_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_vm._v(\" \"+_vm._s(item?.quotation?.marketResearchId?.name || item?.quotation?.type)+\" \")]):_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"},[_vm._v(\" Not Available \")]),(!isNaN(parseFloat(item?.score)))?_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_vm._v(\" \"+_vm._s(_vm._f(\"toPercentage\")(item?.score,true))+\" \")]):_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"},[_vm._v(\" Not Available \")]),_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_vm._v(\" \"+_vm._s(item?.GS)+\" \")]),(item?.quotation?.dateOfPriceAdded)?_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_vm._v(\" \"+_vm._s(_vm._f(\"toDate\")(item?.quotation?.dateOfPriceAdded))+\" \")]):_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"},[_vm._v(\" Not Available \")]),(item?.quotation?.quotationFile)?_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"},[_c('DownloadAndView',{attrs:{\"file\":item?.quotation?.quotationFile}})],1):_c('td',{staticClass:\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"},[_vm._v(\" Not Available \")])])})},proxy:true}])}),(_vm.productData?.title)?_c('div',{staticClass:\"my-spacing-200 ml-spacing-200\",on:{\"click\":function($event){return _vm.addCompanies()}}},[_c('GeneralButton',{attrs:{\"button-type\":'button',\"type\":'brand',\"size\":'small',\"emphasis\":'secondary',\"icon-position\":'none',\"label\":'Add Companies'}})],1):_vm._e(),_c('AddCompaniesToProductModal'),_c('AllQuotationPricesModal')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"relative flex h-full w-full flex-col\">\r\n    <div class=\"mb-spacing-100 flex items-center\">\r\n      <h2\r\n        v-if=\"productData?.title\"\r\n        class=\"px-spacing-200 text-headline/s/relaxed/500 text-constant-brand-primary ipad:px-spacing-300 ipad:text-headline/m/relaxed/500\"\r\n      >\r\n        {{ productData?.title }}\r\n      </h2>\r\n      <div v-if=\"productData?.title\" @click=\"handleAddVariables()\">\r\n        <GeneralButton\r\n          :button-type=\"'button'\"\r\n          :type=\"'brand'\"\r\n          :size=\"'small'\"\r\n          :emphasis=\"'secondary'\"\r\n          :icon-position=\"'none'\"\r\n          :label=\"'Edit'\"\r\n        />\r\n      </div>\r\n      <div\r\n        @click=\"close()\"\r\n        class=\"absolute right-spacing-200 top-spacing-0 cursor-pointer\"\r\n      >\r\n        <IconX\r\n          class=\"h-spacing-300 w-spacing-300 text-content-on-neutral-secondary hover:text-content-on-neutral-primary\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"flex flex-col gap-spacing-100 px-spacing-200 nexus:flex-row nexus:items-center ipad:px-spacing-300\"\r\n    >\r\n      <div v-if=\"productData?.title\" class=\"flex items-center gap-spacing-100\">\r\n        <p class=\"text-body/m/relaxed/500 text-content-on-neutral-secondary\">\r\n          Variables\r\n        </p>\r\n        <div\r\n          @click=\"handleAddVariables()\"\r\n          class=\"flex h-spacing-200 w-spacing-200 cursor-pointer items-center justify-center rounded-full bg-constant-brand-primary\"\r\n        >\r\n          <IconPlus\r\n            class=\"h-spacing-150 w-spacing-150 text-constant-neutral-white\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <p class=\"text-body/m/relaxed/400 text-content-on-neutral-secondary\">\r\n        <span\r\n          class=\"text-body/m/relaxed/400\"\r\n          v-for=\"(variable, index) in productData?.productDetails?.variables\"\r\n          :key=\"index\"\r\n        >\r\n          {{ index > 0 ? \"|\" : \"\" }} {{ variable?.name }} [{{\r\n            variable?.coefficient\r\n          }}]\r\n        </span>\r\n      </p>\r\n    </div>\r\n    <PaginatedTable\r\n      :headers=\"headerData\"\r\n      :currentPage=\"currentPage\"\r\n      :total-pages=\"totalPages\"\r\n      :sort-key=\"sortKey\"\r\n      :sort-order=\"sortOrder\"\r\n      :total-count=\"totalCount\"\r\n      :bg-class=\"bgClass\"\r\n      @fetch-sorted-data=\"fetchSortedData\"\r\n      @fetch-data=\"fetchPage\"\r\n    >\r\n      <template #table-body>\r\n        <tr\r\n          v-for=\"(item, index) in paginatedAndSortedData\"\r\n          :key=\"index\"\r\n          class=\"border-b border-stroke-bold text-left text-body/m/relaxed/400 text-content-on-neutral-primary ipad:text-body/l/relaxed/400\"\r\n          :class=\"item?.allQuotations?.length > 0 ? 'cursor-pointer' : ''\"\r\n          @click.stop=\"\r\n            item?.allQuotations?.length > 0\r\n              ? allPrices({ ...item, productName: productData?.title })\r\n              : undefined\r\n          \"\r\n        >\r\n          <td class=\"py-spacing-100 pr-spacing-100\">\r\n            <span\r\n              @click=\"goToCompany(item?._id)\"\r\n              class=\"block cursor-pointer text-body/m/relaxed/500 hover:text-constant-brand-primary ipad:text-body/l/relaxed/500\"\r\n              >{{ item?.companyName }}</span\r\n            >\r\n            <span\r\n              v-if=\"item?.quotation?.variableId\"\r\n              class=\"block text-body/m/relaxed/400 italic text-content-on-neutral-secondary\"\r\n              >[{{ item?.quotation?.variableId?.name }},\r\n              {{ item?.quotation?.variableId?.coefficient }}]</span\r\n            >\r\n            <span\r\n              v-else\r\n              class=\"block text-body/m/relaxed/400 italic text-content-on-neutral-secondary\"\r\n              >[default, 1]\r\n            </span>\r\n          </td>\r\n          <td\r\n            v-if=\"!isNaN(parseFloat(item?.priceQuoted))\"\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            {{ item?.priceQuoted | toCurrency }}\r\n          </td>\r\n          <td\r\n            v-else\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"\r\n          >\r\n            Not Available\r\n          </td>\r\n\r\n          <td\r\n            v-if=\"!isNaN(parseFloat(item?.price))\"\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            {{ item?.price | toCurrency }}\r\n          </td>\r\n          <td\r\n            v-else\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"\r\n          >\r\n            Not Available\r\n          </td>\r\n          <td\r\n            v-if=\"\r\n              item?.quotation?.marketResearchId?._id || item?.quotation?.type\r\n            \"\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            {{\r\n              item?.quotation?.marketResearchId?.name || item?.quotation?.type\r\n            }}\r\n          </td>\r\n          <td\r\n            v-else\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"\r\n          >\r\n            Not Available\r\n          </td>\r\n\r\n          <td\r\n            v-if=\"!isNaN(parseFloat(item?.score))\"\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            {{ item?.score | toPercentage(true) }}\r\n          </td>\r\n          <td\r\n            v-else\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"\r\n          >\r\n            Not Available\r\n          </td>\r\n          <td\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            {{ item?.GS }}\r\n          </td>\r\n          <td\r\n            v-if=\"item?.quotation?.dateOfPriceAdded\"\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            {{ item?.quotation?.dateOfPriceAdded | toDate }}\r\n          </td>\r\n          <td\r\n            v-else\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"\r\n          >\r\n            Not Available\r\n          </td>\r\n          <td\r\n            v-if=\"item?.quotation?.quotationFile\"\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 ipad:text-body/l/relaxed/500\"\r\n          >\r\n            <DownloadAndView :file=\"item?.quotation?.quotationFile\" />\r\n          </td>\r\n          <td\r\n            v-else\r\n            class=\"py-spacing-100 pr-spacing-100 text-body/m/relaxed/500 text-content-on-neutral-secondary ipad:text-body/l/relaxed/500\"\r\n          >\r\n            Not Available\r\n          </td>\r\n        </tr>\r\n      </template>\r\n    </PaginatedTable>\r\n    <div\r\n      v-if=\"productData?.title\"\r\n      @click=\"addCompanies()\"\r\n      class=\"my-spacing-200 ml-spacing-200\"\r\n    >\r\n      <GeneralButton\r\n        :button-type=\"'button'\"\r\n        :type=\"'brand'\"\r\n        :size=\"'small'\"\r\n        :emphasis=\"'secondary'\"\r\n        :icon-position=\"'none'\"\r\n        :label=\"'Add Companies'\"\r\n      />\r\n    </div>\r\n    <AddCompaniesToProductModal />\r\n    <AllQuotationPricesModal />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    IconPlus: () => import(\"@/components/svgIcons/plus.vue\"),\r\n    PaginatedTable: () =>\r\n      import(\"@/components/General/Table/PaginatedTable.vue\"),\r\n    GeneralButton: () => import(\"@/components/General/CustomButton.vue\"),\r\n    AddCompaniesToProductModal: () =>\r\n      import(\"@/components/Modals/AddCompaniesToProduct.vue\"),\r\n    IconX: () => import(\"@/components/svgIcons/x.vue\"),\r\n    DownloadAndView: () => import(\"@/components/Quotation/DownloadAndView.vue\"),\r\n    AllQuotationPricesModal: () =>\r\n      import(\"@/components/Modals/AllQuotationPricesModal.vue\"),\r\n  },\r\n  props: {\r\n    bgClass: {\r\n      type: String,\r\n      required: false,\r\n      default: \"bg-bg-neutral-raised\",\r\n    },\r\n  },\r\n  async mounted() {\r\n    this.$bus.$on(\"fetch-product-details\", (data) => {\r\n      if (data?.id) {\r\n        this.fetchData(data?.id);\r\n      }\r\n    });\r\n  },\r\n  watch: {\r\n    productData: {\r\n      handler: function () {\r\n        if (this.productData?.companies) {\r\n          this.tableData = this.productData?.companies;\r\n          this.totalPages = Math.ceil(\r\n            this.tableData?.length / this.itemsPerPage,\r\n          );\r\n          this.totalCount = this.tableData?.length;\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedProductId: null,\r\n      sortKey: \"\",\r\n      sortOrder: \"asc\",\r\n      tableData: [], // All fetched data\r\n      totalPages: 1,\r\n      currentPage: 1,\r\n      itemsPerPage: 10, // Define items per page\r\n      isLoading: false,\r\n      totalCount: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      productData: (state) => state.category.categoryData?.commercialItem,\r\n    }),\r\n    headerData() {\r\n      let output = [\r\n        { key: \"companyName\", value: \"Company\", sortable: true },\r\n        { key: \"priceQuoted\", value: \"Price/UNIT\", sortable: true },\r\n        {\r\n          key: \"price\",\r\n          value: \"=Price/UNIT\",\r\n          sortable: true,\r\n          description: \"Price * Variable coefficient\",\r\n        },\r\n        { key: \"origin\", value: \"Origin\", sortable: false },\r\n        { key: \"score\", value: \"SFC\", sortable: true },\r\n        { key: \"GS\", value: \"GS\", sortable: true },\r\n        { key: \"dateOfPriceAdded\", value: \"Date\", sortable: true },\r\n        { key: \"quotation\", value: \"Quotation\" },\r\n      ];\r\n      let unit = this.productData?.productDetails?.unit;\r\n      if (unit) {\r\n        output = [\r\n          { key: \"companyName\", value: \"Company\", sortable: true },\r\n          { key: \"priceQuoted\", value: `Price/${unit}`, sortable: true },\r\n          {\r\n            key: \"price\",\r\n            value: `=Price/${unit}`,\r\n            sortable: true,\r\n            description: \"Price * Variable coefficient\",\r\n          },\r\n          { key: \"origin\", value: \"Origin\", sortable: false },\r\n          { key: \"score\", value: \"SFC\", sortable: true },\r\n          { key: \"GS\", value: \"GS\", sortable: true },\r\n          { key: \"dateOfPriceAdded\", value: \"Date\", sortable: true },\r\n          { key: \"quotation\", value: \"Quotation\" },\r\n        ];\r\n      }\r\n      return output;\r\n    },\r\n    paginatedAndSortedData() {\r\n      let sortedData = [...this.tableData];\r\n\r\n      if (this.sortKey) {\r\n        sortedData?.sort((a, b) => {\r\n          const aValue = a[this.sortKey];\r\n          const bValue = b[this.sortKey];\r\n\r\n          if (aValue == null && bValue == null) return 0; // both null or undefined, treat as equal\r\n          if (aValue == null) return 1; // a is null/undefined, move it to the end\r\n          if (bValue == null) return -1; // b is null/undefined, move it to the end\r\n\r\n          // Determine if the values are numbers\r\n          const isNumeric =\r\n            typeof aValue === \"number\" && typeof bValue === \"number\";\r\n\r\n          // Handle date sorting by parsing date strings if needed\r\n          const isDate = this.sortKey === \"dateOfPriceAdded\"; // Add additional keys if necessary\r\n\r\n          // Compare based on type\r\n          if (isNumeric) {\r\n            return this.sortOrder === \"asc\" ? aValue - bValue : bValue - aValue;\r\n          } else if (isDate) {\r\n            const dateA = new Date(aValue);\r\n            const dateB = new Date(bValue);\r\n            return this.sortOrder === \"asc\" ? dateA - dateB : dateB - dateA;\r\n          } else {\r\n            // Default to string comparison\r\n            return this.sortOrder === \"asc\"\r\n              ? aValue?.localeCompare(bValue)\r\n              : bValue?.localeCompare(aValue);\r\n          }\r\n        });\r\n      }\r\n\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n\r\n      return sortedData?.slice(0, end);\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"category\", [\"getProductDetails\"]),\r\n    async fetchData(productId) {\r\n      this.isLoading = true;\r\n      await this.getProductDetails({ id: productId });\r\n      this.isLoading = false;\r\n    },\r\n    close() {\r\n      this.$bus.$emit(\"product-details-table-modal\", { showModal: false });\r\n      this.$bus.$emit(\"set-selected-product\", null);\r\n    },\r\n    fetchSortedData(options) {\r\n      this.sortKey = options?.sortKey || \"\";\r\n      this.sortOrder = options?.sortOrder || \"\";\r\n    },\r\n    fetchPage(page, resolve) {\r\n      this.currentPage = page;\r\n      resolve();\r\n    },\r\n    handleAddVariables() {\r\n      this.$bus.$emit(\"add-new-commercial-item-modal\", {\r\n        showModal: true,\r\n        update: true,\r\n        type: \"PRODUCT\",\r\n        formData: {\r\n          title: this.productData?.title,\r\n          unit: this.productData?.productDetails?.unit,\r\n          productDetails: {\r\n            variables: this.productData?.productDetails?.variables,\r\n          },\r\n        },\r\n        id: this.productData?._id,\r\n      });\r\n    },\r\n    addCompanies() {\r\n      this.$bus.$emit(\"add-companies-to-product-modal\", {\r\n        showModal: true,\r\n        productData: this.productData,\r\n      });\r\n    },\r\n    goToCompany(companyId) {\r\n      this.$router.push(`/dashboard/companies/${companyId}`);\r\n    },\r\n    allPrices(data) {\r\n      this.$bus.$emit(\"all-quotation-prices-modal\", {\r\n        showModal: true,\r\n        data: data,\r\n      });\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"fetch-product-details\");\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Table.vue?vue&type=template&id=581bbefb\"\nimport script from \"./Table.vue?vue&type=script&lang=js\"\nexport * from \"./Table.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","productData","title","_v","_s","_e","on","$event","handleAddVariables","attrs","close","_l","productDetails","variables","variable","index","key","name","coefficient","headerData","currentPage","totalPages","sortKey","sortOrder","totalCount","bgClass","fetchSortedData","fetchPage","scopedSlots","_u","fn","paginatedAndSortedData","item","class","allQuotations","length","stopPropagation","allPrices","productName","goToCompany","_id","companyName","quotation","variableId","isNaN","parseFloat","priceQuoted","_f","price","marketResearchId","type","score","GS","dateOfPriceAdded","quotationFile","proxy","addCompanies","staticRenderFns","components","IconPlus","PaginatedTable","GeneralButton","AddCompaniesToProductModal","IconX","DownloadAndView","AllQuotationPricesModal","props","String","required","default","mounted","$bus","$on","data","id","fetchData","watch","handler","companies","tableData","Math","ceil","itemsPerPage","deep","selectedProductId","isLoading","computed","mapState","state","category","categoryData","commercialItem","output","value","sortable","description","unit","sortedData","sort","a","b","aValue","bValue","isNumeric","isDate","dateA","Date","dateB","localeCompare","start","end","slice","methods","mapActions","productId","getProductDetails","$emit","showModal","options","page","resolve","update","formData","companyId","$router","push","beforeDestroy","$off","component"],"sourceRoot":""}